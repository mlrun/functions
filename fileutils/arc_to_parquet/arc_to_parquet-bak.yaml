kind: job
metadata:
  name: arc-to-parquet
spec:
  description: ''
  build:
    functionSourceCode: IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlciBvbiAyMDIwLTAxLTIxIDA2OjE2CgppbXBvcnQgbWxydW4KbWxydW4ubWxjb25mLmRicGF0aCA9ICdodHRwOi8vbWxydW4tYXBpOjgwODAnCgppbXBvcnQgdXJsbGliMwp1cmxsaWIzLmRpc2FibGVfd2FybmluZ3MoKQoKeGZuID0gbWxydW4uaW1wb3J0X2Z1bmN0aW9uKCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20veWpiLWRzL2Z1bmN0aW9ucy9hcmMycGFycS9maWxldXRpbHMvb3Blbl9hcmNoaXZlL2Z1bmN0aW9uLnlhbWwnKQoKeGZuLmFwcGx5KG1scnVuLm1vdW50X3YzaW8oKSkKeGZuLmludGVyYWN0aXZlID0gVHJ1ZQoKCmltYWdlc19wYXRoID0gJy9Vc2VyL21scnVuL2Z1bmN0aW9ucy9pbWFnZXMnCgpvcGVuX2FyY2hpdmVfdGFzayA9IG1scnVuLk5ld1Rhc2soCiAgICAnZG93bmxvYWQnLAogICAgaGFuZGxlcj0nb3Blbl9hcmNoaXZlJywgCiAgICBwYXJhbXM9eyd0YXJnZXRfcGF0aCc6IGltYWdlc19wYXRoLAogICAgICAgICAgICAna2V5JyAgICAgICAgOiAnY29udGVudHMnfSwKICAgIGlucHV0cz17J2FyY2hpdmVfdXJsJzogJ2h0dHA6Ly9pZ3VhemlvLXNhbXBsZS1kYXRhLnMzLmFtYXpvbmF3cy5jb20vY2F0c25kb2dzLnppcCd9CikKCnJ1biA9IHhmbi5ydW4ob3Blbl9hcmNoaXZlX3Rhc2spCgppbXBvcnQgbWxydW4KbWxydW4ubWxjb25mLmRicGF0aCA9ICdodHRwOi8vbWxydW4tYXBpOjgwODAnCgp4Zm4gPSBtbHJ1bi5jb2RlX3RvX2Z1bmN0aW9uKCcvVXNlci9yZXBvcy9mdW5jdGlvbnMvZmlsZXV0aWxzL2FyY190b19wYXJxdWV0L2FyY190b19wYXJxdWV0LnB5Jywga2luZD0nam9iJykKCnhmbi5leHBvcnQoJy9Vc2VyL3JlcG9zL2Z1bmN0aW9ucy9maWxldXRpbHMvYXJjX3RvX3BhcnF1ZXQvYXJjX3RvX3BhcnF1ZXQueWFtbCcpCgp4Zm4gPSBtbHJ1bi5pbXBvcnRfZnVuY3Rpb24oJy9Vc2VyL3JlcG9zL2Z1bmN0aW9ucy9maWxldXRpbHMvYXJjX3RvX3BhcnF1ZXQvYXJjX3RvX3BhcnF1ZXQueWFtbCcpCgp4Zm4uYXBwbHkobWxydW4ubW91bnRfdjNpbygpKQp4Zm4uaW50ZXJhY3RpdmUgPSBUcnVlCgp4Zm4uZGVwbG95KCkKCnRhcmdldF9wYXRoID0gJy9Vc2VyL21scnVuL2Z1bmN0aW9ucy9wYXJxdWV0JwphcmNoaXZlID0gJ2h0dHBzOi8vZnBzaWduYWxzLXB1YmxpYy5zMy5hbWF6b25hd3MuY29tL29uZV9jc3YudGFyLmd6JwpwYXJxdWV0X2ZpbGUgPSAneF90ZXN0XzUwLnBhcnF1ZXQnICMgdGhlIGZpbGUgZXh0ZW5zaW9uIGlzIG5vdCBuZWNlc3NhcnkKcGFycXVldF9maWxlX3BhdGggPSB0YXJnZXRfcGF0aCArICIvIiArIHBhcnF1ZXRfZmlsZQphcnRpZmFjdF9rZXkgPSAncmF3X2RhdGEnCgphcmNfdG9fcGFycV90YXNrID0gbWxydW4uTmV3VGFzaygKICAgICdhcmMycGFycScsIAogICAgaGFuZGxlcj0nYXJjX3RvX3BhcnF1ZXQnLCAgIyBhIHN0cmluZyBzaW5jZSB3ZSBhcmUgY2FsbGluZyB0aGlzICdyZW1vdGVseScsIG91dHNpZGUgdGhpcyBub3RlYm9vawogICAgcGFyYW1zPXsKICAgICAgICAndGFyZ2V0X3BhdGgnOiB0YXJnZXRfcGF0aCwKICAgICAgICAnbmFtZScgICAgICAgOiBwYXJxdWV0X2ZpbGUsIAogICAgICAgICdrZXknICAgICAgICA6IGFydGlmYWN0X2tleSwKICAgICAgICAnYXJjaGl2ZV91cmwnOiBhcmNoaXZlfSwKICAgIG91dHB1dHM9W2FydGlmYWN0X2tleV0pCgpydW4gPSB4Zm4ucnVuKGFyY190b19wYXJxX3Rhc2spCgppbXBvcnQgcHlhcnJvdy5wYXJxdWV0IGFzIHBxCmRmID0gcHEucmVhZF90YWJsZShwYXJxdWV0X2ZpbGVfcGF0aCkudG9fcGFuZGFzKCkKZGYuaGVhZCgpCgppbXBvcnQgb3MKaW1wb3J0IG51bXB5IGFzIG5wCmltcG9ydCBwYW5kYXMgYXMgcGQKCmFzc2VydCBhcnRpZmFjdF9rZXkgaW4gcnVuLm91dHB1dHMua2V5cygpLCBmIm1scnVuLmZ1bmN0aW9uczoga2V5IHthcnRpZmFjdF9rZXl9IG5vdCBmb25kIGluIG91dHB1dHMiCmFzc2VydCBvcy5wYXRoLmlzZmlsZShwYXJxdWV0X2ZpbGVfcGF0aCksICBmIm1scnVuLmZ1bmN0aW9uczogYXJ0aWZhY3Qgc291cmNlIG5vdCBmb3VuZCBhdCB7cGFycXVldF9maWxlX3BhdGh9IgoKb3JpZ2luYWwgPSBwZC5yZWFkX2NzdihhcmNoaXZlKQpjb3BpZWQgICA9IHBkLnJlYWRfcGFycXVldChwYXJxdWV0X2ZpbGVfcGF0aCwgZW5naW5lPSJweWFycm93IikKYXNzZXJ0IG5wLmFycmF5X2VxdWFsKG9yaWdpbmFsLCBjb3BpZWQpLCAgICJtbHJ1bi5mdW5jdGlvbnM6IG9yaWdpbmFsIGFuZCBjb3BpZWQgZGF0YSBub3QgZXF1YWwiCgpvcy5yZW1vdmUocGFycXVldF9maWxlX3BhdGgpCgo=
    base_image: python:3.6-jessie
    commands:
    - pip install -q mlrun
    - pip install -q pyarrow
    - pip install -q numpy
    - pip install -q pandas