kind: job
metadata:
  name: gen-class-data
  tag: ''
  hash: 069af5d6c752fd285dbaa5664d9d2794ec8c9c7b
  project: ''
  labels:
    author: yjb
    framework: sklearn
  categories:
  - simulators
  - ml
spec:
  command: ''
  args: []
  image: mlrun/ml-models:0.4.8
  env: []
  default_handler: gen_class_data
  entry_points:
    gen_class_data:
      name: gen_class_data
      doc: 'Create a binary classification sample dataset and save.

        If no filename is given it will default to:

        "simdata-{n_samples}X{m_features}.parquet".


        Additional scikit-learn parameters can be set using **sk_params, please see
        https://scikit-learn.org/stable/modules/generated/sklearn.datasets.make_classification.html
        for more details.'
      parameters:
      - name: context
        type: MLClientCtx
        doc: function context
      - name: n_samples
        type: int
        doc: number of rows/samples
      - name: m_features
        type: int
        doc: number of cols/features
      - name: k_classes
        type: int
        doc: number of classes
      - name: header
        type: Optional[List[str]]
        doc: header for features array
      - name: label_column
        type: Optional[str]
        doc: column name of ground-truth series
        default: labels
      - name: weight
        type: float
        doc: fraction of sample negative value (ground-truth=0)
        default: 0.5
      - name: random_state
        type: int
        doc: rng seed (see https://scikit-learn.org/stable/glossary.html#term-random-state)
        default: 1
      - name: key
        type: str
        doc: key of data in artifact store
        default: classifier-data
      - name: file_ext
        type: str
        doc: (pqt) extension for parquet file
        default: parquet
      - name: sk_params
        doc: additional parameters for `sklearn.datasets.make_classification`
      outputs: []
      lineno: 13
  description: simulate classification data using scikit-learn
  build:
    functionSourceCode: IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IG9zCmltcG9ydCBwYW5kYXMgYXMgcGQKaW1wb3J0IHB5YXJyb3cgYXMgcGEKaW1wb3J0IHB5YXJyb3cucGFycXVldCBhcyBwcQpmcm9tIHR5cGluZyBpbXBvcnQgT3B0aW9uYWwsIExpc3QsIEFueQpmcm9tIHNrbGVhcm4uZGF0YXNldHMgaW1wb3J0IG1ha2VfY2xhc3NpZmljYXRpb24KCmZyb20gbWxydW4uZXhlY3V0aW9uIGltcG9ydCBNTENsaWVudEN0eAoKCmRlZiBnZW5fY2xhc3NfZGF0YSgKICAgIGNvbnRleHQ6IE1MQ2xpZW50Q3R4LAogICAgbl9zYW1wbGVzOiBpbnQsCiAgICBtX2ZlYXR1cmVzOiBpbnQsCiAgICBrX2NsYXNzZXM6IGludCwKICAgIGhlYWRlcjogT3B0aW9uYWxbTGlzdFtzdHJdXSwKICAgIGxhYmVsX2NvbHVtbjogT3B0aW9uYWxbc3RyXSA9ICJsYWJlbHMiLAogICAgd2VpZ2h0OiBmbG9hdCA9IDAuNSwKICAgIHJhbmRvbV9zdGF0ZTogaW50ID0gMSwKICAgIGtleTogc3RyID0gImNsYXNzaWZpZXItZGF0YSIsIAogICAgZmlsZV9leHQ6IHN0ciA9ICJwYXJxdWV0IiwKICAgIHNrX3BhcmFtcyA9IHt9Cik6CiAgICAiIiJDcmVhdGUgYSBiaW5hcnkgY2xhc3NpZmljYXRpb24gc2FtcGxlIGRhdGFzZXQgYW5kIHNhdmUuCiAgICBJZiBubyBmaWxlbmFtZSBpcyBnaXZlbiBpdCB3aWxsIGRlZmF1bHQgdG86CiAgICAic2ltZGF0YS17bl9zYW1wbGVzfVh7bV9mZWF0dXJlc30ucGFycXVldCIuCiAgICAKICAgIEFkZGl0aW9uYWwgc2Npa2l0LWxlYXJuIHBhcmFtZXRlcnMgY2FuIGJlIHNldCB1c2luZyAqKnNrX3BhcmFtcywgcGxlYXNlIHNlZSBodHRwczovL3NjaWtpdC1sZWFybi5vcmcvc3RhYmxlL21vZHVsZXMvZ2VuZXJhdGVkL3NrbGVhcm4uZGF0YXNldHMubWFrZV9jbGFzc2lmaWNhdGlvbi5odG1sIGZvciBtb3JlIGRldGFpbHMuCiAgICAKICAgIDpwYXJhbSBjb250ZXh0OiAgICAgICBmdW5jdGlvbiBjb250ZXh0CiAgICA6cGFyYW0gbl9zYW1wbGVzOiAgICAgbnVtYmVyIG9mIHJvd3Mvc2FtcGxlcwogICAgOnBhcmFtIG1fZmVhdHVyZXM6ICAgIG51bWJlciBvZiBjb2xzL2ZlYXR1cmVzCiAgICA6cGFyYW0ga19jbGFzc2VzOiAgICAgbnVtYmVyIG9mIGNsYXNzZXMKICAgIDpwYXJhbSBoZWFkZXI6ICAgICAgICBoZWFkZXIgZm9yIGZlYXR1cmVzIGFycmF5CiAgICA6cGFyYW0gbGFiZWxfY29sdW1uOiAgY29sdW1uIG5hbWUgb2YgZ3JvdW5kLXRydXRoIHNlcmllcwogICAgOnBhcmFtIHdlaWdodDogICAgICAgIGZyYWN0aW9uIG9mIHNhbXBsZSBuZWdhdGl2ZSB2YWx1ZSAoZ3JvdW5kLXRydXRoPTApCiAgICA6cGFyYW0gcmFuZG9tX3N0YXRlOiAgcm5nIHNlZWQgKHNlZSBodHRwczovL3NjaWtpdC1sZWFybi5vcmcvc3RhYmxlL2dsb3NzYXJ5Lmh0bWwjdGVybS1yYW5kb20tc3RhdGUpCiAgICA6cGFyYW0ga2V5OiAgICAgICAgICAga2V5IG9mIGRhdGEgaW4gYXJ0aWZhY3Qgc3RvcmUKICAgIDpwYXJhbSBmaWxlX2V4dDogICAgICAocHF0KSBleHRlbnNpb24gZm9yIHBhcnF1ZXQgZmlsZQogICAgOnBhcmFtIHNrX3BhcmFtczogICAgIGFkZGl0aW9uYWwgcGFyYW1ldGVycyBmb3IgYHNrbGVhcm4uZGF0YXNldHMubWFrZV9jbGFzc2lmaWNhdGlvbmAKICAgICIiIgogICAgZmVhdHVyZXMsIGxhYmVscyA9IG1ha2VfY2xhc3NpZmljYXRpb24oCiAgICAgICAgbl9zYW1wbGVzPW5fc2FtcGxlcywKICAgICAgICBuX2ZlYXR1cmVzPW1fZmVhdHVyZXMsCiAgICAgICAgd2VpZ2h0cz13ZWlnaHQsCiAgICAgICAgbl9jbGFzc2VzPWtfY2xhc3NlcywKICAgICAgICByYW5kb21fc3RhdGU9cmFuZG9tX3N0YXRlLCAKICAgICAgICAqKnNrX3BhcmFtcykKCiAgICBYID0gcGQuRGF0YUZyYW1lKGZlYXR1cmVzKQogICAgaWYgbm90IGhlYWRlcjoKICAgICAgICBYLmNvbHVtbnMgPSBbImZlYXRfIiArIHN0cih4KSBmb3IgeCBpbiByYW5nZShtX2ZlYXR1cmVzKV0KICAgIGVsc2U6CiAgICAgICAgWC5jb2x1bW5zID0gaGVhZGVyCgogICAgeSA9IHBkLkRhdGFGcmFtZShsYWJlbHMsIGNvbHVtbnM9W2xhYmVsX2NvbHVtbl0pCiAgICBkYXRhID0gcGQuY29uY2F0KFtYLCB5XSwgYXhpcz0xKQogICAgCiAgICBjb250ZXh0LmxvZ19kYXRhc2V0KGtleSwgZGY9ZGF0YSwgZm9ybWF0PWZpbGVfZXh0LCBpbmRleD1GYWxzZSkKCg==
    commands: []
    code_origin: https://github.com/yjb-ds/functions.git#bbaf91c5a14454dea6ba72cafa3f035608315b67:gen_class_data.ipynb
