kind: job
metadata:
  name: get-model-config
  tag: ''
  hash: e56b8088ff6bd5403e5ac596e5ca2f7938308dd7
  project: ''
  categories: []
spec:
  command: ''
  args: []
  image: mlrun/ml-base:0.4.5
  env: []
  default_handler: get_model_config
  description: ''
  build:
    functionSourceCode: IyBDb3B5cmlnaHQgMjAxOCBJZ3VhemlvCiMKIyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKIyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiMgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiMKIyAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAojCiMgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQojIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiMgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiMgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAojIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgppbXBvcnQgb3MKaW1wb3J0IGpzb24KZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCmltcG9ydCBudW1weSBhcyBucAppbXBvcnQgcGFuZGFzIGFzIHBkCmZyb20gY2xvdWRwaWNrbGUgaW1wb3J0IGR1bXAsIGxvYWQKCmZyb20gbWxydW4uZXhlY3V0aW9uIGltcG9ydCBNTENsaWVudEN0eApmcm9tIHR5cGluZyBpbXBvcnQgSU8sIEFueVN0ciwgVW5pb24sIExpc3QsIE9wdGlvbmFsCgoKZGVmIGdldF9tb2RlbF9jb25maWcoCiAgICBjb250ZXh0OiBNTENsaWVudEN0eCwKICAgIGNvbmZpZ191cmw6IFVuaW9uW3N0ciwgUGF0aCwgSU9bQW55U3RyXV0sCikgLT4gTm9uZToKICAgICIiIlJldHJpZXZlIGEgbW9kZWwgY29uZmlnLgogICAgCiAgICBBIG1vZGVsIGNvbmZpZyBjb25zaXN0cyBvZiBhIGRpY3Qgd2l0aCAyIGtleXM6ICBjbGFzc19wYXJhbXMgYW5kCiAgICBmaXRfcGFyYW1zIGFuZCB0aGVzZSBtYXAgdG8gdGhlIG1vZGVsJ3Mgc2Npa2l0IGxlYXJuIEFQSS4KICAgICIiIgogICAgaW1wb3J0IGpzb24KICAgIGNvbmZpZyA9IGpzb24ubG9hZChvcGVuKHN0cihjb25maWdfdXJsKSwgInIiKSkKICAgIAogICAgb3MubWFrZWRpcnMob3MucGF0aC5qb2luKGNvbnRleHQuYXJ0aWZhY3RfcGF0aCwgJ21vZGVscycpLCBleGlzdF9vaz1UcnVlKQogICAgY29udGV4dC5sb2dfYXJ0aWZhY3QoJ2NsYXNzX3BhcmFtcycsIGJvZHk9anNvbi5kdW1wcyhjb25maWdbJ0NMQVNTX1BBUkFNUyddKSwgbG9jYWxfcGF0aD0nbW9kZWxzL2NsYXNzX3BhcmFtcy5qc29uJykgIywgbGFiZWxzPXsnZnJhbWV3b3JrJzogJ3hnYm9vc3QnfSkKICAgIGNvbnRleHQubG9nX2FydGlmYWN0KCdmaXRfcGFyYW1zJywgYm9keT1qc29uLmR1bXBzKGNvbmZpZ1snRklUX1BBUkFNUyddKSwgbG9jYWxfcGF0aD0nbW9kZWxzL2ZpdF9wYXJhbXMuanNvbicpICMsIGxhYmVscz17J2ZyYW1ld29yayc6ICd4Z2Jvb3N0J30pCiAgICAKCmRlZiBnZW5fbW9kZWxfY29uZmlnX2J5X2F0dHIoYXR0cjogc3RyID0gJ3BlZGljdF9wcm9iYScpOgogICAgIiIiR2VuZXJhdGUgYSBtb2RlbCBjb25maWcgYW5kIHNhdmUgYXMganNvbgogICAgRmlsdGVycyBtb2RlbCBieSBhdHRyaWJ1dGUgYGF0dHJgLCBmb3IgZXhhbXBsZSwgb25seSBjbGFzc2VzCiAgICB3aXRoIGEgYHByZWRpY3RfcHJvYmFgIG1ldGhvZAogICAgUmV0dXJucyBhIGxpc3Qgb2YgKHN0ciwgRnVsbEFyZ1NwZWMsIEZ1bGxBcmdTcGVjKSBUdXBsZXMsIHdoZXJlIHRoZSBmaXJzdCAKICAgIEZ1bGxBcmdTcGVjIG9iamVjdCBjb250YWlucyBhbGwgbW9kZWwgY2xhc3MgcGFyYW1ldGVycyBwbHVzIGRlZmF1bHRzLCBhbmQgCiAgICB0aGUgc2Vjb25kIGNvbnRhaW5zIGFsbCB0aGUgZml0IHBhcmFtcyBwbHVzIGRlZmF1bHRzCiAgICA6cGFyYW0gYXR0cmliOiAgIHRoZSBhdHRyaWJ1dGUgZmlsdGVyCiAgICAiIiIKICAgIGVzdGltYXRvcnMgPSBhbGxfZXN0aW1hdG9ycygpCiAgICBjbGZzID0gW10KICAgIGZvciBuYW1lLCBjbGFzc18gaW4gZXN0aW1hdG9yczoKICAgICAgICBpZiBoYXNhdHRyKGNsYXNzXywgJ3ByZWRpY3RfcHJvYmEnKToKICAgICAgICAgICAgY2xmcy5hcHBlbmQoKG5hbWUsIGdldGZ1bGxhcmdzcGVjKGNsYXNzXyksIGdldGZ1bGxhcmdzcGVjKGNsYXNzXy5maXQpKSkKLi4uIGV0YyAgICA=
    commands: []
    code_origin: https://raw.githubusercontent.com/mlrun/functions/master/get_model_config/get_model_config.py
