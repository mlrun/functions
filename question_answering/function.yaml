kind: job
metadata:
  name: question-answering
  tag: ''
  hash: 462bc3779a6f163dba968070ebb7cbcd1170644e
  project: ''
  labels:
    author: yonish
  categories:
  - machine-learning
spec:
  command: ''
  args: []
  image: mlrun/mlrun
  build:
    functionSourceCode: IyBDb3B5cmlnaHQgMjAxOSBJZ3VhemlvCiMKIyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKIyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiMgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiMKIyAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiMKIyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiMgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKIyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KIyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiMgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiMKaW1wb3J0IHBhdGhsaWIKZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QsIFR1cGxlCgppbXBvcnQgbWxydW4KaW1wb3J0IHBhbmRhcyBhcyBwZAppbXBvcnQgdHJhbnNmb3JtZXJzCmZyb20gdHFkbS5hdXRvIGltcG9ydCB0cWRtCgoKZGVmIF9nZXRfcHJvbXB0X3RlbXBsYXRlKAogICAgdGV4dF93cmFwcGVyOiBzdHIsCiAgICBxdWVzdGlvbnNfd3JhcHBlcjogc3RyLAogICAgcXVlc3Rpb25zOiBMaXN0W3N0cl0sCiAgICBhbnN3ZXJfcHJlYW1ibGU6IHN0ciwKKSAtPiBUdXBsZVtzdHIsIHN0cl06CiAgICAjIFZhbGlkYXRlIGFuZCBidWlsZCB0aGUgdGV4dCB3cmFwcGVyOgogICAgdGV4dF93cmFwcGVyID0gdGV4dF93cmFwcGVyIG9yICgKICAgICAgICAiR2l2ZW4gdGhlIGZvbGxvd2luZyB0ZXh0OlxuIiAiLS0tLS1cbiIgInt9XG4iICItLS0tLSIKICAgICkKICAgIGlmIHRleHRfd3JhcHBlci5jb3VudCgie30iKSAhPSAxOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoCiAgICAgICAgICAgICJUaGUgYHRleHRfd3JhcHBlcmAgbXVzdCBpbmNsdWRlIG9uZSBwbGFjZWhvbGRlciAne30nIGZvciB0aGUgdGV4dC4iCiAgICAgICAgKQoKICAgICMgVmFsaWRhdGUgYW5kIGJ1aWxkIHRoZSBxdWVzdGlvbiB3cmFwcGVyOgogICAgcXVlc3Rpb25zX3dyYXBwZXIgPSBxdWVzdGlvbnNfd3JhcHBlciBvciAiQW5zd2VyIHRoZSBxdWVzdGlvbnM6XG4iICJ7fSIKICAgIGlmIHF1ZXN0aW9uc193cmFwcGVyLmNvdW50KCJ7fSIpICE9IDE6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigKICAgICAgICAgICAgIlRoZSBgcXVlc3Rpb25zX3dyYXBwZXJgIG11c3QgaW5jbHVkZSBvbmUgcGxhY2Vob2xkZXIgJ3t9JyBmb3IgdGhlIHRleHQuIgogICAgICAgICkKCiAgICAjIFZhbGlkYXRlIGFuZCBwYXJzZSB0aGUgcXVlc3Rpb25zOgogICAgaWYgbGVuKHF1ZXN0aW9ucykgPT0gMDoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJQbGVhc2UgaW5jbHVkZSBhdCBsZWFzdCBvbmUgcXVlc3Rpb24uIikKICAgIHF1ZXN0aW9ucyA9ICJcbiIuam9pbigKICAgICAgICBbZiJ7aX0uIHtxdWVzdGlvbn0iIGZvciBpLCBxdWVzdGlvbiBpbiBlbnVtZXJhdGUocXVlc3Rpb25zLCAxKV0KICAgICkKCiAgICAjIFZhbGlkYXRlIGFuZCBidWlsZCB0aGUgYW5zd2VyIHdyYXBwZXI6CiAgICBhbnN3ZXJfcHJlYW1ibGUgPSBhbnN3ZXJfcHJlYW1ibGUgb3IgIkFuc3dlcjoiCiAgICBpZiBhbnN3ZXJfcHJlYW1ibGUuY291bnQoInt9IikgIT0gMDoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJUaGUgYGFuc3dlcl9wcmVhbWJsZWAgbXVzdCBub3QgaGF2ZSBhIHBsYWNlaG9sZGVyICd7fScuIikKCiAgICAjIENvbnN0cnVjdCB0aGUgdGVtcGxhdGU6CiAgICByZXR1cm4gKAogICAgICAgIGYie3RleHRfd3JhcHBlcn1cbiIKICAgICAgICBmIntxdWVzdGlvbnNfd3JhcHBlci5mb3JtYXQocXVlc3Rpb25zKX1cbiIKICAgICAgICAiXG4iCiAgICAgICAgZiJ7YW5zd2VyX3ByZWFtYmxlfVxuIgogICAgICAgICIxLiAiICAjIEFkZGl0aW9uIGZvciBiZXR0ZXIgYW5zd2VycyBpbiBnZW5lcmFsLgogICAgKSwgYW5zd2VyX3ByZWFtYmxlCgoKZGVmIGFuc3dlcl9xdWVzdGlvbnMoCiAgICBjb250ZXh0OiBtbHJ1bi5NTENsaWVudEN0eCwKICAgIGlucHV0X3BhdGg6IHN0ciwKICAgIG1vZGVsOiBzdHIsCiAgICBxdWVzdGlvbnM6IExpc3Rbc3RyXSwKICAgIHRva2VuaXplcjogc3RyID0gTm9uZSwKICAgIG1vZGVsX2t3YXJnczogZGljdCA9IE5vbmUsCiAgICB0ZXh0X3dyYXBwZXI6IHN0ciA9ICIiLAogICAgcXVlc3Rpb25zX3dyYXBwZXI6IHN0ciA9ICIiLAogICAgYW5zd2VyX3ByZWFtYmxlOiBzdHIgPSAiIiwKICAgIGdlbmVyYXRpb25fY29uZmlnOiBkaWN0ID0gTm9uZSwKICAgIHF1ZXN0aW9uc19jb2x1bW5zOiBMaXN0W3N0cl0gPSBOb25lLAogICAgbW9kZWxfYW5zd2VyaW5nX3RyeW91dHM6IGludCA9IDIsCikgLT4gVHVwbGVbcGQuRGF0YUZyYW1lLCBkaWN0XToKICAgICIiIgogICAgQW5zd2VyIHF1ZXN0aW9ucyB3aXRoIGNvbnRleHQgdG8gdGhlIGdpdmVuIHRleHQgZmlsZXMgYnkgYSBwcmV0cmFpbmVkIExMTSBtb2RlbC4KCiAgICA6cGFyYW0gY29udGV4dDogICAgICAgICAgICAgICAgIE1MUnVuIGNvbnRleHQuCiAgICA6cGFyYW0gaW5wdXRfcGF0aDogICAgICAgICAgICAgIEEgcGF0aCB0byBhIGRpcmVjdG9yeSBvZiB0ZXh0IGZpbGVzIG9yIGEgcGF0aCB0byBhIHRleHQgZmlsZSB0byBhc2sgcXVlc3Rpb25zIGFib3V0LgogICAgOnBhcmFtIG1vZGVsOiAgICAgICAgICAgICAgICAgICBUaGUgcHJlLXRyYWluZWQgbW9kZWwgdG8gdXNlIGZvciBhc2tpbmcgcXVlc3Rpb25zLgogICAgOnBhcmFtIHF1ZXN0aW9uczogICAgICAgICAgICAgICBUaGUgcXVlc3Rpb25zIHRvIGFzay4KICAgIDpwYXJhbSB0b2tlbml6ZXI6ICAgICAgICAgICAgICAgVGhlIHByZS10cmFpbmVkIHRva2VuaXplciB0byB1c2UuIERlZmF1bHRlZCB0byB0aGUgbW9kZWwgZ2l2ZW4uCiAgICA6cGFyYW0gbW9kZWxfa3dhcmdzOiAgICAgICAgICAgIEtleXdvcmQgYXJndW1lbnRzIHRvIHBhc3MgcmVnYXJkaW5nIHRoZSBsb2FkaW5nIG9mIHRoZSBtb2RlbCBpbiBIdWdnaW5nRmFjZSdzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBwaXBlbGluZWAgZnVuY3Rpb24uCiAgICA6cGFyYW0gdGV4dF93cmFwcGVyOiAgICAgICAgICAgIEEgd3JhcHBlciBmb3IgdGhlIHRleHQgcGFydC4gV2lsbCBiZSBhZGRlZCBhdCB0aGUgc3RhcnQgb2YgdGhlIHByb21wdC4gTXVzdCBoYXZlIGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXIgKCd7fScpIGZvciB0aGUgcXVlc3Rpb25zLgogICAgOnBhcmFtIHF1ZXN0aW9uc193cmFwcGVyOiAgICAgICBBIHdyYXBwZXIgZm9yIHRoZSBxdWVzdGlvbnMgcmVjZWl2ZWQuIFdpbGwgYmUgYWRkZWQgYWZ0ZXIgdGhlIHRleHQgcGxhY2Vob2xkZXIgaW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHByb21wdCB0ZW1wbGF0ZS4gTXVzdCBoYXZlIGEgcGxhY2Vob2xkZXIgKCd7fScpIGZvciB0aGUgcXVlc3Rpb25zLgogICAgOnBhcmFtIGFuc3dlcl9wcmVhbWJsZTogICAgICAgICBBIHByZWZpeCBmb3IgdGhlIGFuc3dlciBwYXJ0LiBXaWxsIGJlIGFkZGVkIGF0IHRoZSBlbmQgb2YgdGhlIHByb21wdCB0ZW1wbGF0ZS4KICAgIDpwYXJhbSBnZW5lcmF0aW9uX2NvbmZpZzogICAgICAgSHVnZ2luZ0ZhY2UncyBgR2VuZXJhdGlvbkNvbmZpZ2Aga2V5d29yZCBhcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgYGdlbmVyYXRlYCBtZXRob2QuCiAgICA6cGFyYW0gcXVlc3Rpb25zX2NvbHVtbnM6ICAgICAgIENvbHVtbnMgdG8gdXNlIGZvciB0aGUgZGF0YWZyYW1lIHJldHVybmVkLgogICAgOnBhcmFtIG1vZGVsX2Fuc3dlcmluZ190cnlvdXRzOiBBbW91bnQgb2YgaW5mZXJyaW5nIHRvIGRvIHBlciB0ZXh0IGJlZm9yZSByYWlzaW5nIGFuIGVycm9yIGR1ZSB0byBtaXNzaW5nIG9yIGVtcHR5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuc3dlcnMuCgogICAgOnJldHVybnM6IEEgdHVwbGUgb2Y6CgogICAgICAgICAgICAgICogQSBkYXRhZnJhbWUgZGF0YXNldCBvZiB0aGUgcXVlc3Rpb25zIGFuc3dlcnMuCiAgICAgICAgICAgICAgKiBBIGRpY3Rpb25hcnkgb2YgZXJyb3JlZCBmaWxlcyB0aGF0IHdlcmUgbm90IGluZmVycmVkIG9yIHdlcmUgbm90IGFuc3dlcmVkIHByb3Blcmx5LgogICAgIiIiCiAgICAjIEdldCB0aGUgcHJvbXB0IHRlbXBsYXRlOgogICAgY29udGV4dC5sb2dnZXIuaW5mbygiQ3JlYXRpbmcgcHJvbXB0IHRlbXBsYXRlIikKICAgIHByb21wdF90ZW1wbGF0ZSwgYW5zd2VyX3ByZWFtYmxlID0gX2dldF9wcm9tcHRfdGVtcGxhdGUoCiAgICAgICAgdGV4dF93cmFwcGVyPXRleHRfd3JhcHBlciwKICAgICAgICBxdWVzdGlvbnNfd3JhcHBlcj1xdWVzdGlvbnNfd3JhcHBlciwKICAgICAgICBxdWVzdGlvbnM9cXVlc3Rpb25zLAogICAgICAgIGFuc3dlcl9wcmVhbWJsZT1hbnN3ZXJfcHJlYW1ibGUsCiAgICApCiAgICBjb250ZXh0LmxvZ2dlci5pbmZvKGYiUHJvbXB0IHRlbXBsYXRlIGNyZWF0ZWQ6XG5cbntwcm9tcHRfdGVtcGxhdGV9XG4iKQoKICAgICMgR2V0IHRoZSBxdWVzdGlvbnMgY29sdW1uczoKICAgIHF1ZXN0aW9uc19jb2x1bW5zID0gcXVlc3Rpb25zX2NvbHVtbnMgb3IgWwogICAgICAgIGYicXtpfSIgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKHF1ZXN0aW9ucykgKyAxKQogICAgXQogICAgaWYgbGVuKHF1ZXN0aW9uc19jb2x1bW5zKSAhPSBsZW4ocXVlc3Rpb25zKToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKAogICAgICAgICAgICBmIlRoZSBwcm92aWRlZCBxdWVzdGlvbnMgY29sdW1ucyBsZW5ndGggKHtsZW4ocXVlc3Rpb25zX2NvbHVtbnMpfSkgIgogICAgICAgICAgICBmImRvZXMgbm90IG1hdGNoIHRoZSBxdWVzdGlvbnMgYW1vdW50ICh7bGVuKHF1ZXN0aW9ucyl9KSIKICAgICAgICApCgogICAgIyBQcmVwYXJlIHRoZSBkYXRhZnJhbWUgYW5kIGVycm9ycyB0byBiZSByZXR1cm5lZDoKICAgIGRmID0gcGQuRGF0YUZyYW1lKGNvbHVtbnM9WyJ0ZXh0X2ZpbGUiLCAqcXVlc3Rpb25zX2NvbHVtbnNdKQogICAgZXJyb3JzID0ge30KCiAgICAjIExvYWQgdGhlIHRva2VuaXplcjoKICAgIHRva2VuaXplciA9IHRva2VuaXplciBvciBtb2RlbAogICAgY29udGV4dC5sb2dnZXIuaW5mbyhmIkxvYWRpbmcgdG9rZW5pemVyOiB7dG9rZW5pemVyfSIpCiAgICB0b2tlbml6ZXIgPSB0cmFuc2Zvcm1lcnMuQXV0b1Rva2VuaXplci5mcm9tX3ByZXRyYWluZWQodG9rZW5pemVyKQogICAgY29udGV4dC5sb2dnZXIuaW5mbygiVG9rZW5pemVyIGxvYWRlZCIpCgogICAgIyBMb2FkIHRoZSBnZW5lcmF0aW9uIGNvbmZpZzoKICAgIGNvbnRleHQubG9nZ2VyLmluZm8oIkxvYWRpbmcgZ2VuZXJhdGlvbiBjb25maWd1cmF0aW9uIikKICAgIGdlbmVyYXRpb25fY29uZmlnID0gdHJhbnNmb3JtZXJzLkdlbmVyYXRpb25Db25maWcoKiooZ2VuZXJhdGlvbl9jb25maWcgb3Ige30pKQogICAgY29udGV4dC5sb2dnZXIuaW5mbygiR2VuZXJhdGlvbiBjb25maWd1cmF0aW9uIGxvYWRlZC4iKQoKICAgICMgTG9hZCB0aGUgbW9kZWwgYW5kIHRva2VuaXplciBpbnRvIGEgcGlwZWxpbmUgb2JqZWN0OgogICAgY29udGV4dC5sb2dnZXIuaW5mbyhmIkxvYWRpbmcgbW9kZWwgJ3ttb2RlbH0nIGFuZCB0b2tlbml6ZXIgaW50byBhIHBpcGVsaW5lIikKICAgIHBpcGVsaW5lID0gdHJhbnNmb3JtZXJzLnBpcGVsaW5lKAogICAgICAgIHRhc2s9InRleHQtZ2VuZXJhdGlvbiIsCiAgICAgICAgbW9kZWw9bW9kZWwsCiAgICAgICAgdG9rZW5pemVyPXRva2VuaXplciwKICAgICAgICB0cnVzdF9yZW1vdGVfY29kZT1UcnVlLAogICAgICAgIG1vZGVsX2t3YXJncz1tb2RlbF9rd2FyZ3MsCiAgICApCiAgICBjb250ZXh0LmxvZ2dlci5pbmZvKCJNb2RlbCBsb2FkZWQsIHBpcGVsaW5lIGNyZWF0ZWQiKQoKICAgICMgR28gb3ZlciB0aGUgYXVkaW8gZmlsZXMgYW5kIGluZmVyIHRocm91Z2ggdGhlIG1vZGVsOgogICAgaWYgcGF0aGxpYi5QYXRoKGlucHV0X3BhdGgpLmlzX2ZpbGUoKToKICAgICAgICBpbnB1dF9wYXRoID0gW2lucHV0X3BhdGhdCiAgICBlbHNlOgogICAgICAgIHRleHRfZmlsZXNfZGlyZWN0b3J5ID0gcGF0aGxpYi5QYXRoKGlucHV0X3BhdGgpLmFic29sdXRlKCkKICAgICAgICBpbnB1dF9wYXRoID0gbGlzdCh0ZXh0X2ZpbGVzX2RpcmVjdG9yeS5yZ2xvYigiKi4qIikpCiAgICBmb3IgaSwgdGV4dF9maWxlIGluIGVudW1lcmF0ZSgKICAgICAgICB0cWRtKAogICAgICAgICAgICBpbnB1dF9wYXRoLAogICAgICAgICAgICBkZXNjPSJHZW5lcmF0aW5nIGFuc3dlcnMiLAogICAgICAgICAgICB1bml0PSJmaWxlIiwKICAgICAgICApCiAgICApOgogICAgICAgIHRyeToKICAgICAgICAgICAgIyBSZWFkIHRoZSB0ZXh0OgogICAgICAgICAgICB3aXRoIG9wZW4odGV4dF9maWxlLCAiciIpIGFzIGZwOgogICAgICAgICAgICAgICAgdGV4dCA9IGZwLnJlYWQoKQogICAgICAgICAgICAjIEZvciBlYWNoIHRleHQsIHRyeSBtdWx0aXBsZSB0aW1lcyBhcyB0aGUgbGxtIG1pZ2h0IGV4cGVyaWVuY2UgemVybyBhbnN3ZXJzOgogICAgICAgICAgICB0cnlvdXQgPSAwCiAgICAgICAgICAgIGZvciB0cnlvdXQgaW4gcmFuZ2UobW9kZWxfYW5zd2VyaW5nX3RyeW91dHMpOgogICAgICAgICAgICAgICAgIyBJbmZlciB0aHJvdWdoIHRoZSBsbG06CiAgICAgICAgICAgICAgICBzZXF1ZW5jZXMgPSBwaXBlbGluZSgKICAgICAgICAgICAgICAgICAgICBwcm9tcHRfdGVtcGxhdGUuZm9ybWF0KHRleHQpLAogICAgICAgICAgICAgICAgICAgIGdlbmVyYXRpb25fY29uZmlnPWdlbmVyYXRpb25fY29uZmlnLAogICAgICAgICAgICAgICAgICAgIG51bV9yZXR1cm5fc2VxdWVuY2VzPTEsCiAgICAgICAgICAgICAgICAgICAgZW9zX3Rva2VuX2lkPXRva2VuaXplci5lb3NfdG9rZW5faWQsCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAjIFZhbGlkYXRlIHRoZSBhbnN3ZXJzOgogICAgICAgICAgICAgICAgYW5zd2VycyA9IHNlcXVlbmNlc1swXVsiZ2VuZXJhdGVkX3RleHQiXS5zcGxpdCgKICAgICAgICAgICAgICAgICAgICBmInthbnN3ZXJfcHJlYW1ibGV9XG4iLCAxCiAgICAgICAgICAgICAgICApWzFdCiAgICAgICAgICAgICAgICBhbnN3ZXJzID0gYW5zd2Vycy5zcGxpdCgiXG4iKQogICAgICAgICAgICAgICAgaWYgbGVuKGFuc3dlcnMpICE9IGxlbihxdWVzdGlvbnMpOgogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICBhbnN3ZXJzID0gWwogICAgICAgICAgICAgICAgICAgIGFuc3dlclszOl0gZm9yIGFuc3dlciBpbiBhbnN3ZXJzCiAgICAgICAgICAgICAgICBdICAjIFdpdGhvdXQgdGhlIHF1ZXN0aW9ucyBpbmRleCBwcmVmaXggJ2kuICcKICAgICAgICAgICAgICAgIGlmIGFsbChsZW4oYW5zd2VyKSA9PSAwIGZvciBhbnN3ZXIgaW4gYW5zd2Vycyk6CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICMgTm90ZSBpbiB0aGUgZGF0YWZyYW1lOgogICAgICAgICAgICAgICAgZGYubG9jW2kgLSBsZW4oZXJyb3JzKV0gPSBbCiAgICAgICAgICAgICAgICAgICAgc3RyKHRleHRfZmlsZS5yZWxhdGl2ZV90byh0ZXh0X2ZpbGVzX2RpcmVjdG9yeSkpLAogICAgICAgICAgICAgICAgICAgICphbnN3ZXJzLAogICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgaWYgdHJ5b3V0ID09IG1vZGVsX2Fuc3dlcmluZ190cnlvdXRzOgogICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgIGYiVGhlIExMTSBkaWQgbm90IGFuc3dlciBjb3JyZWN0bHkgLSBvbmUgb3IgbW9yZSBhbnN3ZXJzIGFyZSBtaXNzaW5nOiB7YW5zd2Vyc30iCiAgICAgICAgICAgICAgICApCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleGNlcHRpb246CiAgICAgICAgICAgICMgQ29sbGVjdCB0aGUgZXhjZXB0aW9uOgogICAgICAgICAgICBjb250ZXh0LmxvZ2dlci5lcnJvcihmIkVycm9yIGluIGZpbGU6ICd7dGV4dF9maWxlfSciKQogICAgICAgICAgICBlcnJvcnNbc3RyKHRleHRfZmlsZSldID0gc3RyKGV4Y2VwdGlvbikKCiAgICByZXR1cm4gZGYsIGVycm9ycwo=
    commands: []
    code_origin: https://github.com/yonishelach/functions.git#d50046e43179c0ec2cebe274679deb5c53fa86ce:/Users/Yonatan_Shelach/projects/functions/question_answering/question_answering.py
    origin_filename: /Users/Yonatan_Shelach/projects/functions/question_answering/question_answering.py
    requirements: []
  entry_points:
    answer_questions:
      name: answer_questions
      doc: Answer questions with context to the given text files by a pretrained LLM
        model.
      parameters:
      - name: context
        type: MLClientCtx
        doc: MLRun context.
        default: ''
      - name: input_path
        type: str
        doc: A path to a directory of text files or a path to a text file to ask questions
          about.
        default: ''
      - name: model
        type: str
        doc: The pre-trained model to use for asking questions.
        default: ''
      - name: questions
        type: List[str]
        doc: The questions to ask.
        default: ''
      - name: tokenizer
        type: str
        doc: The pre-trained tokenizer to use. Defaulted to the model given.
        default: null
      - name: model_kwargs
        type: dict
        doc: Keyword arguments to pass regarding the loading of the model in HuggingFace's
          `pipeline` function.
        default: null
      - name: text_wrapper
        type: str
        doc: A wrapper for the text part. Will be added at the start of the prompt.
          Must have a placeholder ('{}') for the questions.
        default: ''
      - name: questions_wrapper
        type: str
        doc: A wrapper for the questions received. Will be added after the text placeholder
          in the prompt template. Must have a placeholder ('{}') for the questions.
        default: ''
      - name: answer_preamble
        type: str
        doc: A prefix for the answer part. Will be added at the end of the prompt
          template.
        default: ''
      - name: generation_config
        type: dict
        doc: HuggingFace's `GenerationConfig` keyword arguments to pass to the `generate`
          method.
        default: null
      - name: questions_columns
        type: List[str]
        doc: Columns to use for the dataframe returned.
        default: null
      - name: model_answering_tryouts
        type: int
        doc: Amount of inferring to do per text before raising an error due to missing
          or empty answers.
        default: 2
      outputs:
      - default: ''
        doc: 'A tuple of:'
      lineno: 68
  description: GenAI approach of question answering on a given data
  default_handler: answer_questions
  disable_auto_mount: false
  clone_target_dir: ''
  env: []
  priority_class_name: ''
  preemption_mode: prevent
  affinity: null
  tolerations: null
  security_context: {}
verbose: false
