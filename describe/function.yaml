# Copyright 2019 Iguazio
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
kind: job
metadata:
  name: describe
  tag: ''
  hash: c6c09832096f560ba97db375a40dc3ceb7fb3bf7
  project: ''
  labels:
    author: Davids
  categories:
  - data-analysis
spec:
  command: ''
  args: []
  image: mlrun/mlrun
  build:
    functionSourceCode: IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IHdhcm5pbmdzCmZyb20gdHlwaW5nIGltcG9ydCBVbmlvbgoKaW1wb3J0IG1hdHBsb3RsaWIucHlwbG90IGFzIHBsdAppbXBvcnQgbWxydW4KaW1wb3J0IG51bXB5IGFzIG5wCmltcG9ydCBzZWFib3JuIGFzIHNucwoKd2FybmluZ3Muc2ltcGxlZmlsdGVyKGFjdGlvbj0iaWdub3JlIiwgY2F0ZWdvcnk9RnV0dXJlV2FybmluZykKCmltcG9ydCBtbHJ1bi5mZWF0dXJlX3N0b3JlIGFzIGZzdG9yZQppbXBvcnQgcGFuZGFzIGFzIHBkCmltcG9ydCBwbG90bHkuZXhwcmVzcyBhcyBweAppbXBvcnQgcGxvdGx5LmZpZ3VyZV9mYWN0b3J5IGFzIGZmCmltcG9ydCBwbG90bHkuZ3JhcGhfb2JqZWN0cyBhcyBnbwpmcm9tIG1scnVuLmFydGlmYWN0cyBpbXBvcnQgKERhdGFzZXRBcnRpZmFjdCwgUGxvdEFydGlmYWN0LCBQbG90bHlBcnRpZmFjdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUYWJsZUFydGlmYWN0LCB1cGRhdGVfZGF0YXNldF9tZXRhKQpmcm9tIG1scnVuLmRhdGFzdG9yZSBpbXBvcnQgRGF0YUl0ZW0KZnJvbSBtbHJ1bi5leGVjdXRpb24gaW1wb3J0IE1MQ2xpZW50Q3R4CmZyb20gbWxydW4uZmVhdHVyZV9zdG9yZSBpbXBvcnQgRmVhdHVyZVNldCwgRmVhdHVyZVZlY3Rvcgpmcm9tIHBsb3RseS5zdWJwbG90cyBpbXBvcnQgbWFrZV9zdWJwbG90cwoKcGQuc2V0X29wdGlvbigiZGlzcGxheS5mbG9hdF9mb3JtYXQiLCBsYW1iZGEgeDogIiUuMmYiICUgeCkKTUFYX1NJWkVfT0ZfREYgPSA1MDAwMDAKCgpkZWYgYW5hbHl6ZSgKICAgIGNvbnRleHQ6IE1MQ2xpZW50Q3R4LAogICAgbmFtZTogc3RyID0gImRhdGFzZXQiLAogICAgdGFibGU6IFVuaW9uW0ZlYXR1cmVTZXQsIERhdGFJdGVtXSA9IE5vbmUsCiAgICBsYWJlbF9jb2x1bW46IHN0ciA9IE5vbmUsCiAgICBwbG90c19kZXN0OiBzdHIgPSAicGxvdHMiLAogICAgcmFuZG9tX3N0YXRlOiBpbnQgPSAxLAogICAgcHJvYmxlbV90eXBlOiBzdHIgPSAiY2xhc3NpZmljYXRpb24iLAogICAgZGFza19rZXk6IHN0ciA9ICJkYXNrX2tleSIsCiAgICBkYXNrX2Z1bmN0aW9uOiBzdHIgPSBOb25lLAogICAgZGFza19jbGllbnQ9Tm9uZSwKKSAtPiBOb25lOgogICAgIiIiCiAgICBUaGUgZnVuY3Rpb24gd2lsbCBvdXRwdXQgdGhlIGZvbGxvd2luZyBhcnRpZmFjdHMgcGVyCiAgICBjb2x1bW4gd2l0aGluIHRoZSBkYXRhIGZyYW1lIChiYXNlZCBvbiBkYXRhIHR5cGVzKQogICAgSWYgdGhlIGRhdGEgaGFzIG1vcmUgdGhhbiA1MDAsMDAwIHNhbXBsZSB3ZQogICAgc2FtcGxlIHJhbmRvbWx5IDUwMCwwMDAgc2FtcGxlczoKCiAgICBkZXNjcmliZSBjc3YKICAgIGhpc3RvZ3JhbXMKICAgIHNjYXR0ZXItMmQKICAgIHZpb2xpbiBjaGFydAogICAgY29ycmVsYXRpb24tbWF0cml4IGNoYXJ0CiAgICBjb3JyZWxhdGlvbi1tYXRyaXggY3N2CiAgICBpbWJhbGFuY2UgcGllIGNoYXJ0CiAgICBpbWJhbGFuY2Utd2VpZ2h0cy12ZWMgY3N2CgogICAgOnBhcmFtIGNvbnRleHQ6ICAgICAgICAgICAgICAgICBUaGUgZnVuY3Rpb24gY29udGV4dAogICAgOnBhcmFtIG5hbWU6ICAgICAgICAgICAgICAgICAgICBLZXkgb2YgZGF0YXNldCB0byBkYXRhYmFzZSAoImRhdGFzZXQiIGZvciBkZWZhdWx0KQogICAgOnBhcmFtIHRhYmxlOiAgICAgICAgICAgICAgICAgICBNTFJ1biBpbnB1dCBwb2ludGluZyB0byBwYW5kYXMgZGF0YWZyYW1lIChjc3YvcGFycXVldCBmaWxlIHBhdGgpIG9yIEZlYXR1cmVTZXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXMgcGFyYW0KICAgIDpwYXJhbSBsYWJlbF9jb2x1bW46ICAgICAgICAgICAgR3JvdW5kIHRydXRoIGNvbHVtbiBsYWJlbAogICAgOnBhcmFtIHBsb3RzX2Rlc3Q6ICAgICAgICAgICAgICBEZXN0aW5hdGlvbiBmb2xkZXIgb2Ygc3VtbWFyeSBwbG90cyAocmVsYXRpdmUgdG8gYXJ0aWZhY3RfcGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCJwbG90cyIgZm9yIGRlZmF1bHQpCiAgICA6cGFyYW0gcmFuZG9tX3N0YXRlOiAgICAgICAgICAgIFdoZW4gdGhlIHRhYmxlIGhhcyBtb3JlIHRoYW4gNTAwLDAwMCBzYW1wbGVzLCB3ZSBzYW1wbGUgcmFuZG9tbHkgNTAwLDAwMCBzYW1wbGVzCiAgICA6cGFyYW0gcHJvYmxlbV90eXBlICAgICAgICAgICAgIFRoZSB0eXBlIG9mIHRoZSBNTCBwcm9ibGVtIHRoZSBkYXRhIGZhY2luZyAtIHJlZ3Jlc3Npb24sIGNsYXNzaWZpY2F0aW9uIG9yIE5vbmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNsYXNzaWZpY2F0aW9uIGZvciBkZWZhdWx0KQogICAgOnBhcmFtIGRhc2tfa2V5OiAgICAgICAgICAgICAgICBLZXkgb2YgZGF0YWZyYW1lIGluIGRhc2sgY2xpZW50ICJkYXRhc2V0cyIgYXR0cmlidXRlCiAgICA6cGFyYW0gZGFza19mdW5jdGlvbjogICAgICAgICAgIERhc2sgZnVuY3Rpb24gdXJsIChkYjovLy4uKQogICAgOnBhcmFtIGRhc2tfY2xpZW50OiAgICAgICAgICAgICBEYXNrIGNsaWVudCBvYmplY3QKICAgICIiIgogICAgZGF0YV9pdGVtLCBmZWF0dXJlc2V0LCBjcmVhdCwgdXBkYXRlID0gRmFsc2UsIEZhbHNlLCBGYWxzZSwgRmFsc2UKICAgIGdldF9mcm9tX3RhYmxlID0gVHJ1ZQogICAgaWYgZGFza19mdW5jdGlvbiBvciBkYXNrX2NsaWVudDoKICAgICAgICBkYXRhX2l0ZW0sIGNyZWF0ID0gVHJ1ZSwgVHJ1ZQogICAgICAgIGlmIGRhc2tfZnVuY3Rpb246CiAgICAgICAgICAgIGNsaWVudCA9IG1scnVuLmltcG9ydF9mdW5jdGlvbihkYXNrX2Z1bmN0aW9uKS5jbGllbnQKICAgICAgICBlbGlmIGRhc2tfY2xpZW50OgogICAgICAgICAgICBjbGllbnQgPSBkYXNrX2NsaWVudAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoImRhc2sgY2xpZW50IHdhcyBub3QgcHJvdmlkZWQiKQoKICAgICAgICBpZiBkYXNrX2tleSBpbiBjbGllbnQuZGF0YXNldHM6CiAgICAgICAgICAgIGRmID0gY2xpZW50LmdldF9kYXRhc2V0KGRhc2tfa2V5KQogICAgICAgICAgICBkYXRhX2l0ZW0sIGNyZWF0LCBnZXRfZnJvbV90YWJsZSA9IFRydWUsIFRydWUsIEZhbHNlCiAgICAgICAgZWxpZiB0YWJsZToKICAgICAgICAgICAgZ2V0X2Zyb21fdGFibGUgPSBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY29udGV4dC5sb2dnZXIuaW5mbygKICAgICAgICAgICAgICAgIGYib25seSB0aGVzZSBkYXRhc2V0cyBhcmUgYXZhaWxhYmxlIHtjbGllbnQuZGF0YXNldHN9IGluIGNsaWVudCB7Y2xpZW50fSIKICAgICAgICAgICAgKQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oImRhdGFzZXQgbm90IGZvdW5kIG9uIGRhc2sgY2x1c3RlciIpCgogICAgaWYgZ2V0X2Zyb21fdGFibGU6CiAgICAgICAgaWYgdHlwZSh0YWJsZSkgPT0gRGF0YUl0ZW06CiAgICAgICAgICAgIGlmIHRhYmxlLm1ldGEgaXMgTm9uZToKICAgICAgICAgICAgICAgIGRhdGFfaXRlbSwgY3JlYXQsIHVwZGF0ZSA9IFRydWUsIFRydWUsIEZhbHNlCiAgICAgICAgICAgIGVsaWYgdGFibGUubWV0YS5raW5kID09ICJkYXRhc2V0IjoKICAgICAgICAgICAgICAgIGRhdGFfaXRlbSwgY3JlYXQsIHVwZGF0ZSA9IFRydWUsIEZhbHNlLCBUcnVlCiAgICAgICAgICAgIGVsaWYgdGFibGUubWV0YS5raW5kID09ICJGZWF0dXJlVmVjdG9yIjoKICAgICAgICAgICAgICAgIGRhdGFfaXRlbSwgY3JlYXQsIHVwZGF0ZSA9IFRydWUsIEZhbHNlLCBGYWxzZQogICAgICAgICAgICBlbGlmIHRhYmxlLm1ldGEua2luZCA9PSAiRmVhdHVyZVNldCI6CiAgICAgICAgICAgICAgICBmZWF0dXJlc2V0LCBjcmVhdCwgdXBkYXRlID0gVHJ1ZSwgRmFsc2UsIEZhbHNlCgogICAgICAgIGlmIGRhdGFfaXRlbToKICAgICAgICAgICAgZGYgPSB0YWJsZS5hc19kZigpCiAgICAgICAgZWxpZiBmZWF0dXJlc2V0OgogICAgICAgICAgICBwcm9qZWN0X25hbWUsIHNldF9uYW1lID0gKAogICAgICAgICAgICAgICAgdGFibGUuX3BhdGguc3BsaXQoIi8iKVsyXSwKICAgICAgICAgICAgICAgIHRhYmxlLl9wYXRoLnNwbGl0KCIvIilbNF0sCiAgICAgICAgICAgICkKICAgICAgICAgICAgZmVhdHVyZV9zZXQgPSBmc3RvcmUuZ2V0X2ZlYXR1cmVfc2V0KAogICAgICAgICAgICAgICAgZiJzdG9yZTovL2ZlYXR1cmUtc2V0cy97cHJvamVjdF9uYW1lfS97c2V0X25hbWV9IgogICAgICAgICAgICApCiAgICAgICAgICAgIGRmID0gZmVhdHVyZV9zZXQudG9fZGF0YWZyYW1lKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBjb250ZXh0LmxvZ2dlci5lcnJvcihmIldyb25nIHRhYmxlIHR5cGUuIikKICAgICAgICAgICAgcmV0dXJuCgogICAgaWYgZGYuc2l6ZSA+IE1BWF9TSVpFX09GX0RGOgogICAgICAgIGRmID0gZGYuc2FtcGxlKG49TUFYX1NJWkVfT0ZfREYsIHJhbmRvbV9zdGF0ZT1yYW5kb21fc3RhdGUpCiAgICBleHRyYV9kYXRhID0ge30KCiAgICBpZiBsYWJlbF9jb2x1bW4gbm90IGluIGRmLmNvbHVtbnM6CiAgICAgICAgbGFiZWxfY29sdW1uID0gTm9uZQoKICAgIGV4dHJhX2RhdGFbImRlc2NyaWJlIGNzdiJdID0gY29udGV4dC5sb2dfYXJ0aWZhY3QoCiAgICAgICAgVGFibGVBcnRpZmFjdCgiZGVzY3JpYmUtY3N2IiwgZGY9ZGYuZGVzY3JpYmUoKSksCiAgICAgICAgbG9jYWxfcGF0aD1mIntwbG90c19kZXN0fS9kZXNjcmliZS5jc3YiLAogICAgKQoKICAgIHRyeToKICAgICAgICBfY3JlYXRlX2hpc3RvZ3JhbV9tYXRfYXJ0aWZhY3QoCiAgICAgICAgICAgIGNvbnRleHQsIGRmLCBleHRyYV9kYXRhLCBsYWJlbF9jb2x1bW4sIHBsb3RzX2Rlc3QKICAgICAgICApCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgY29udGV4dC5sb2dnZXIud2FybihmIkZhaWxlZCB0byBjcmVhdGUgaGlzdG9ncmFtIG1hdHJpeCBhcnRpZmFjdCBkdWUgdG86IHtlfSIpCiAgICB0cnk6CiAgICAgICAgX2NyZWF0ZV9mZWF0dXJlc19oaXN0b2dyYW1fYXJ0aWZhY3RzKAogICAgICAgICAgICBjb250ZXh0LCBkZiwgZXh0cmFfZGF0YSwgbGFiZWxfY29sdW1uLCBwbG90c19kZXN0LCBwcm9ibGVtX3R5cGUKICAgICAgICApCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgY29udGV4dC5sb2dnZXIud2FybihmIkZhaWxlZCB0byBjcmVhdGUgcGFpcnBsb3QgaGlzdG9ncmFtcyBkdWUgdG86IHtlfSIpCiAgICB0cnk6CiAgICAgICAgX2NyZWF0ZV9mZWF0dXJlc18yZF9zY2F0dGVyX2FydGlmYWN0cygKICAgICAgICAgICAgY29udGV4dCwgZGYsIGV4dHJhX2RhdGEsIGxhYmVsX2NvbHVtbiwgcGxvdHNfZGVzdCwgcHJvYmxlbV90eXBlCiAgICAgICAgKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGNvbnRleHQubG9nZ2VyLndhcm4oZiJGYWlsZWQgdG8gY3JlYXRlIHBhaXJwbG90IDJkX3NjYXR0ZXIgZHVlIHRvOiB7ZX0iKQogICAgdHJ5OgogICAgICAgIF9jcmVhdGVfdmlvbGluX2FydGlmYWN0KGNvbnRleHQsIGRmLCBleHRyYV9kYXRhLCBwbG90c19kZXN0KQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGNvbnRleHQubG9nZ2VyLndhcm4oZiJGYWlsZWQgdG8gY3JlYXRlIHZpb2xpbiBkaXN0cmlidXRpb24gcGxvdHMgZHVlIHRvOiB7ZX0iKQogICAgdHJ5OgogICAgICAgIF9jcmVhdGVfaW1iYWxhbmNlX2FydGlmYWN0KAogICAgICAgICAgICBjb250ZXh0LCBkZiwgZXh0cmFfZGF0YSwgbGFiZWxfY29sdW1uLCBwbG90c19kZXN0LCBwcm9ibGVtX3R5cGUKICAgICAgICApCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgY29udGV4dC5sb2dnZXIud2FybihmIkZhaWxlZCB0byBjcmVhdGUgY2xhc3MgaW1iYWxhbmNlIHBsb3QgZHVlIHRvOiB7ZX0iKQogICAgdHJ5OgogICAgICAgIF9jcmVhdGVfY29ycl9hcnRpZmFjdChjb250ZXh0LCBkZiwgZXh0cmFfZGF0YSwgbGFiZWxfY29sdW1uLCBwbG90c19kZXN0KQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGNvbnRleHQubG9nZ2VyLndhcm4oZiJGYWlsZWQgdG8gY3JlYXRlIGZlYXR1cmVzIGNvcnJlbGF0aW9uIHBsb3QgZHVlIHRvOiB7ZX0iKQoKICAgIGlmIG5vdCBkYXRhX2l0ZW06CiAgICAgICAgcmV0dXJuCgogICAgYXJ0aWZhY3QgPSB0YWJsZS5hcnRpZmFjdF91cmwKICAgIGlmIGNyZWF0OiAgIyBkYXRhc2V0IG5vdCBzdG9yZWQKICAgICAgICBhcnRpZmFjdCA9IERhdGFzZXRBcnRpZmFjdCgKICAgICAgICAgICAga2V5PSJkYXRhc2V0Iiwgc3RhdHM9VHJ1ZSwgZGY9ZGYsIGV4dHJhX2RhdGE9ZXh0cmFfZGF0YQogICAgICAgICkKICAgICAgICBhcnRpZmFjdCA9IGNvbnRleHQubG9nX2FydGlmYWN0KGFydGlmYWN0LCBkYl9rZXk9bmFtZSkKICAgICAgICBjb250ZXh0LmxvZ2dlci5pbmZvKGYiVGhlIGRhdGEgc2V0IGlzIGxvZ2dlZCB0byB0aGUgcHJvamVjdCB1bmRlciB7bmFtZX0gbmFtZSIpCgogICAgaWYgdXBkYXRlOgogICAgICAgIHVwZGF0ZV9kYXRhc2V0X21ldGEoYXJ0aWZhY3QsIGV4dHJhX2RhdGE9ZXh0cmFfZGF0YSkKICAgICAgICBjb250ZXh0LmxvZ2dlci5pbmZvKGYiVGhlIGRhdGEgc2V0IG5hbWVkIHtuYW1lfSBpcyB1cGRhdGVkIikKCiAgICAjIFRPRE8gOiAzLUQgcGxvdCBvbiBvbiBzZWxlY3RlZCBmZWF0dXJlcy4KICAgICMgVE9ETyA6IFJlaW50ZWdyYXRpb24gcGxvdCBvbiBvbiBzZWxlY3RlZCBmZWF0dXJlcy4KICAgICMgVE9ETyA6IFBDQSBwbG90ICh3aXRoIG9wdGlvbnMpCgoKZGVmIF9jcmVhdGVfaGlzdG9ncmFtX21hdF9hcnRpZmFjdCgKICAgIGNvbnRleHQ6IE1MQ2xpZW50Q3R4LAogICAgZGY6IHBkLkRhdGFGcmFtZSwKICAgIGV4dHJhX2RhdGE6IGRpY3QsCiAgICBsYWJlbF9jb2x1bW46IHN0ciwKICAgIHBsb3RzX2Rlc3Q6IHN0ciwKKToKICAgICIiIgogICAgQ3JlYXRlIGFuZCBsb2cgYSBoaXN0b2dyYW0gbWF0cml4IGFydGlmYWN0CiAgICAiIiIKCiAgICAjIGZpZyA9IGZmLmNyZWF0ZV9zY2F0dGVycGxvdG1hdHJpeChkZiwgZGlhZz0iYm94Iiwgd2lkdGg9MjUwMCwgaGVpZ2h0PTI1MDApCiAgICAjIGlmIGxhYmVsX2NvbHVtbiBpcyBub3QgTm9uZToKICAgICMgICAgIGRmX25ldyA9IGRmLmNvcHkoKQogICAgIyAgICAgZGZfbmV3W2xhYmVsX2NvbHVtbl0gPSBkZl9uZXdbbGFiZWxfY29sdW1uXS5hcHBseShzdHIpCiAgICAjICAgICBmaWcgPSBmZi5jcmVhdGVfc2NhdHRlcnBsb3RtYXRyaXgoCiAgICAjICAgICAgICAgZGZfbmV3LCBkaWFnPSJib3giLCBpbmRleD1sYWJlbF9jb2x1bW4sIHdpZHRoPTI1MDAsIGhlaWdodD0yNTAwCiAgICAjICAgICApCiAgICAjIGZpZy51cGRhdGVfbGF5b3V0KHRpdGxlX3RleHQ9IjxpPjxiPkhpc3RvZ3JhbXMgbWF0cml4PC9iPjwvaT4iKQogICAgIyBleHRyYV9kYXRhWyJoaXN0b2dyYW0tbWF0cml4Il0gPSBjb250ZXh0LmxvZ19hcnRpZmFjdCgKICAgICMgICAgIFBsb3RseUFydGlmYWN0KGtleT0iaGlzdG9ncmFtcy1tYXRyaXgiLCBmaWd1cmU9ZmlnKSwKICAgICMgICAgIGxvY2FsX3BhdGg9ZiJ7cGxvdHNfZGVzdH0vaGlzdF9tYXQuaHRtbCIsCiAgICAjICkKICAgIGNvbnRleHQubG9nX2FydGlmYWN0KGYie3Bsb3RzX2Rlc3R9L2hpc3QuaHRtbCIsIGJvZHk9Yic8Yj4gRGVwcmVjYXRlZCwgc2VlIHRoZSBhcnRpZmFjdHMgc2NhdHRlci0yZCBhbmQgJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiJ2hpc3RvZ3JhbXMgaW5zdGVhZDxiPicsIHZpZXdlcj0nd2ViLWFwcCcpCgojICAgICBzbnNwbHQgPSBzbnMucGFpcnBsb3QoZGYsIGh1ZT1sYWJlbF9jb2x1bW4pICAjICwgZGlhZ19rd3M9eyJidyI6IDEuNX0pCiMgICAgIGV4dHJhX2RhdGFbImhpc3RvZ3JhbXMtbWF0cml4Il0gPSBjb250ZXh0LmxvZ19hcnRpZmFjdCgKIyAgICAgICAgIFBsb3RBcnRpZmFjdCgiaGlzdG9ncmFtcy1tYXRyaXgiLCBib2R5PXBsdC5nY2YoKSksCiMgICAgICAgICBsb2NhbF9wYXRoPWYie3Bsb3RzX2Rlc3R9L2hpc3QuaHRtbCIsCiMgICAgICAgICBkYl9rZXk9RmFsc2UsCiMgICAgICkKCgpkZWYgX2NyZWF0ZV9mZWF0dXJlc19oaXN0b2dyYW1fYXJ0aWZhY3RzKAogICAgY29udGV4dDogTUxDbGllbnRDdHgsCiAgICBkZjogcGQuRGF0YUZyYW1lLAogICAgZXh0cmFfZGF0YTogZGljdCwKICAgIGxhYmVsX2NvbHVtbjogc3RyLAogICAgcGxvdHNfZGVzdDogc3RyLAogICAgcHJvYmxlbV90eXBlOiBzdHIsCik6CiAgICAiIiIKICAgIENyZWF0ZSBhbmQgbG9nIGEgaGlzdG9ncmFtIGFydGlmYWN0IGZvciBlYWNoIGZlYXR1cmUKICAgICIiIgoKICAgIGZpZ3MgPSBkaWN0KCkKICAgIGZpcnN0X2ZlYXR1cmVfbmFtZSA9ICIiCiAgICBpZiBsYWJlbF9jb2x1bW4gaXMgbm90IE5vbmUgYW5kIHByb2JsZW1fdHlwZSA9PSAiY2xhc3NpZmljYXRpb24iOgogICAgICAgIGFsbF9sYWJlbHMgPSBkZltsYWJlbF9jb2x1bW5dLnVuaXF1ZSgpCiAgICB2aXNpYmxlID0gVHJ1ZQogICAgZm9yIChjb2x1bW5OYW1lLCBfKSBpbiBkZi5pdGVyaXRlbXMoKToKICAgICAgICBpZiBjb2x1bW5OYW1lID09IGxhYmVsX2NvbHVtbjoKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgaWYgbGFiZWxfY29sdW1uIGlzIG5vdCBOb25lIGFuZCBwcm9ibGVtX3R5cGUgPT0gImNsYXNzaWZpY2F0aW9uIjoKICAgICAgICAgICAgZm9yIGxhYmVsIGluIGFsbF9sYWJlbHM6CiAgICAgICAgICAgICAgICBzdWJfZmlnID0gZ28uSGlzdG9ncmFtKAogICAgICAgICAgICAgICAgICAgIGhpc3RmdW5jPSJjb3VudCIsCiAgICAgICAgICAgICAgICAgICAgeD1kZi5sb2NbZGZbbGFiZWxfY29sdW1uXSA9PSBsYWJlbF1bY29sdW1uTmFtZV0sCiAgICAgICAgICAgICAgICAgICAgbmFtZT1zdHIobGFiZWwpLAogICAgICAgICAgICAgICAgICAgIHZpc2libGU9dmlzaWJsZSwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGZpZ3NbZiJ7Y29sdW1uTmFtZX1AP0B7bGFiZWx9Il0gPSBzdWJfZmlnCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc3ViX2ZpZyA9IGdvLkhpc3RvZ3JhbShoaXN0ZnVuYz0iY291bnQiLCB4PWRmW2NvbHVtbk5hbWVdLCB2aXNpYmxlPXZpc2libGUpCiAgICAgICAgICAgIGZpZ3NbZiJ7Y29sdW1uTmFtZX1AP0B7MX0iXSA9IHN1Yl9maWcKICAgICAgICBpZiB2aXNpYmxlOgogICAgICAgICAgICBmaXJzdF9mZWF0dXJlX25hbWUgPSBjb2x1bW5OYW1lCiAgICAgICAgdmlzaWJsZSA9IEZhbHNlCgogICAgZmlnID0gZ28uRmlndXJlKCkKICAgIGZvciBrIGluIGZpZ3Mua2V5cygpOgogICAgICAgIGZpZy5hZGRfdHJhY2UoZmlnc1trXSkKCiAgICBmaWcudXBkYXRlX2xheW91dCgKICAgICAgICB1cGRhdGVtZW51cz1bCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICJidXR0b25zIjogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgImxhYmVsIjogY29sdW1uX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICJtZXRob2QiOiAidXBkYXRlIiwKICAgICAgICAgICAgICAgICAgICAgICAgImFyZ3MiOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInZpc2libGUiOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleS5zcGxpdCgiQD9AIilbMF0gPT0gY29sdW1uX25hbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGtleSBpbiBmaWdzLmtleXMoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7InRpdGxlIjogZiI8aT48Yj5IaXN0b2dyYW0gb2Yge2NvbHVtbl9uYW1lfTwvYj48L2k+In0sCiAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZvciBjb2x1bW5fbmFtZSBpbiBkZi5jb2x1bW5zCiAgICAgICAgICAgICAgICAgICAgaWYgY29sdW1uX25hbWUgIT0gbGFiZWxfY29sdW1uCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgImRpcmVjdGlvbiI6ICJkb3duIiwKICAgICAgICAgICAgICAgICJwYWQiOiB7InIiOiAxMCwgInQiOiAxMH0sCiAgICAgICAgICAgICAgICAic2hvd2FjdGl2ZSI6IFRydWUsCiAgICAgICAgICAgICAgICAieCI6IDAuMjUsCiAgICAgICAgICAgICAgICAieGFuY2hvciI6ICJsZWZ0IiwKICAgICAgICAgICAgICAgICJ5IjogMS4xLAogICAgICAgICAgICAgICAgInlhbmNob3IiOiAidG9wIiwKICAgICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgYW5ub3RhdGlvbnM9WwogICAgICAgICAgICBkaWN0KAogICAgICAgICAgICAgICAgdGV4dD0iU2VsZWN0IEZlYXR1cmUgTmFtZSAiLAogICAgICAgICAgICAgICAgc2hvd2Fycm93PUZhbHNlLAogICAgICAgICAgICAgICAgeD0wLAogICAgICAgICAgICAgICAgeT0xLjA1LAogICAgICAgICAgICAgICAgeXJlZj0icGFwZXIiLAogICAgICAgICAgICAgICAgeHJlZj0icGFwZXIiLAogICAgICAgICAgICAgICAgYWxpZ249ImxlZnQiLAogICAgICAgICAgICAgICAgeGFuY2hvcj0ibGVmdCIsCiAgICAgICAgICAgICAgICB5YW5jaG9yPSJ0b3AiLAogICAgICAgICAgICAgICAgZm9udD17CiAgICAgICAgICAgICAgICAgICAgImNvbG9yIjogImJsdWUiLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgKQogICAgICAgIF0sCiAgICApCgogICAgZmlnLnVwZGF0ZV9sYXlvdXQoCiAgICAgICAgd2lkdGg9NjAwLAogICAgICAgIGhlaWdodD00MDAsCiAgICAgICAgYXV0b3NpemU9RmFsc2UsCiAgICAgICAgbWFyZ2luPWRpY3QodD0xMDAsIGI9MCwgbD0wLCByPTApLAogICAgICAgIHRlbXBsYXRlPSJwbG90bHlfd2hpdGUiLAogICAgKQoKICAgIGZpZy51cGRhdGVfbGF5b3V0KHRpdGxlX3RleHQ9ZiI8aT48Yj5IaXN0b2dyYW1zIG9mIHtmaXJzdF9mZWF0dXJlX25hbWV9PC9iPjwvaT4iKQogICAgZXh0cmFfZGF0YVtmImhpc3RvZ3JhbXMiXSA9IGNvbnRleHQubG9nX2FydGlmYWN0KAogICAgICAgIFBsb3RseUFydGlmYWN0KGtleT1mImhpc3RvZ3JhbXMiLCBmaWd1cmU9ZmlnKSwKICAgICAgICBsb2NhbF9wYXRoPWYie3Bsb3RzX2Rlc3R9L2hpc3RvZ3JhbXMuaHRtbCIsCiAgICApCgoKZGVmIF9jcmVhdGVfZmVhdHVyZXNfMmRfc2NhdHRlcl9hcnRpZmFjdHMoCiAgICBjb250ZXh0OiBNTENsaWVudEN0eCwKICAgIGRmOiBwZC5EYXRhRnJhbWUsCiAgICBleHRyYV9kYXRhOiBkaWN0LAogICAgbGFiZWxfY29sdW1uOiBzdHIsCiAgICBwbG90c19kZXN0OiBzdHIsCiAgICBwcm9ibGVtX3R5cGU6IHN0ciwKKToKICAgICIiIgogICAgQ3JlYXRlIGFuZCBsb2cgYSBzY2F0dGVyLTJkIGFydGlmYWN0IGZvciBlYWNoIGNvdXBsZSBvZiBmZWF0dXJlcwogICAgIiIiCiAgICBmZWF0dXJlcyA9IFsKICAgICAgICBjb2x1bW5OYW1lIGZvciAoY29sdW1uTmFtZSwgXykgaW4gZGYuaXRlcml0ZW1zKCkgaWYgY29sdW1uTmFtZSAhPSBsYWJlbF9jb2x1bW4KICAgIF0KICAgIG1heF9mZWF0dXJlX2xlbiA9IGZsb2F0KG1heChsZW4oZWxlbSkgZm9yIGVsZW0gaW4gZmVhdHVyZXMpKQogICAgaWYgbGFiZWxfY29sdW1uIGlzIG5vdCBOb25lOgogICAgICAgIGxhYmVscyA9IHNvcnRlZChkZltsYWJlbF9jb2x1bW5dLnVuaXF1ZSgpKQogICAgZWxzZToKICAgICAgICBsYWJlbHMgPSBbTm9uZV0KICAgIGZpZyA9IGdvLkZpZ3VyZSgpCiAgICBpZiBsYWJlbF9jb2x1bW4gaXMgbm90IE5vbmUgYW5kIHByb2JsZW1fdHlwZSA9PSAiY2xhc3NpZmljYXRpb24iOgogICAgICAgIGZvciBsIGluIGxhYmVsczoKICAgICAgICAgICAgZmlnLmFkZF90cmFjZSgKICAgICAgICAgICAgICAgIGdvLlNjYXR0ZXIoCiAgICAgICAgICAgICAgICAgICAgeD1kZi5sb2NbZGZbbGFiZWxfY29sdW1uXSA9PSBsXVtmZWF0dXJlc1swXV0sCiAgICAgICAgICAgICAgICAgICAgeT1kZi5sb2NbZGZbbGFiZWxfY29sdW1uXSA9PSBsXVtmZWF0dXJlc1swXV0sCiAgICAgICAgICAgICAgICAgICAgbW9kZT0ibWFya2VycyIsCiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZT1UcnVlLAogICAgICAgICAgICAgICAgICAgIHNob3dsZWdlbmQ9VHJ1ZSwKICAgICAgICAgICAgICAgICAgICBuYW1lPXN0cihsKSwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKQogICAgZWxpZiBsYWJlbF9jb2x1bW4gaXMgTm9uZToKICAgICAgICBmaWcuYWRkX3RyYWNlKAogICAgICAgICAgICBnby5TY2F0dGVyKAogICAgICAgICAgICAgICAgeD1kZltmZWF0dXJlc1swXV0sCiAgICAgICAgICAgICAgICB5PWRmW2ZlYXR1cmVzWzBdXSwKICAgICAgICAgICAgICAgIG1vZGU9Im1hcmtlcnMiLAogICAgICAgICAgICAgICAgdmlzaWJsZT1UcnVlLAogICAgICAgICAgICApCiAgICAgICAgKQogICAgZWxpZiBwcm9ibGVtX3R5cGUgPT0gInJlZ3Jlc3Npb24iOgogICAgICAgIGZpZy5hZGRfdHJhY2UoCiAgICAgICAgICAgIGdvLlNjYXR0ZXIoCiAgICAgICAgICAgICAgICB4PWRmW2ZlYXR1cmVzWzBdXSwKICAgICAgICAgICAgICAgIHk9ZGZbZmVhdHVyZXNbMF1dLAogICAgICAgICAgICAgICAgbW9kZT0ibWFya2VycyIsCiAgICAgICAgICAgICAgICBtYXJrZXI9ZGljdCgKICAgICAgICAgICAgICAgICAgICBjb2xvcj1kZltsYWJlbF9jb2x1bW5dLCBjb2xvcnNjYWxlPSJWaXJpZGlzIiwgc2hvd3NjYWxlPVRydWUKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB2aXNpYmxlPVRydWUsCiAgICAgICAgICAgICkKICAgICAgICApCgogICAgeF9idXR0b25zID0gW10KICAgIHlfYnV0dG9ucyA9IFtdCgogICAgZm9yIG5jb2wgaW4gZmVhdHVyZXM6CiAgICAgICAgaWYgcHJvYmxlbV90eXBlID09ICJjbGFzc2lmaWNhdGlvbiIgYW5kIGxhYmVsX2NvbHVtbiBpcyBub3QgTm9uZToKICAgICAgICAgICAgeF9idXR0b25zLmFwcGVuZCgKICAgICAgICAgICAgICAgIGRpY3QoCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kPSJ1cGRhdGUiLAogICAgICAgICAgICAgICAgICAgIGxhYmVsPW5jb2wsCiAgICAgICAgICAgICAgICAgICAgYXJncz1bCiAgICAgICAgICAgICAgICAgICAgICAgIHsieCI6IFtkZi5sb2NbZGZbbGFiZWxfY29sdW1uXSA9PSBsXVtuY29sXSBmb3IgbCBpbiBsYWJlbHNdfSwKICAgICAgICAgICAgICAgICAgICAgICAgbnAuYXJhbmdlKGxlbihsYWJlbHMpKS50b2xpc3QoKSwKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCgogICAgICAgICAgICB5X2J1dHRvbnMuYXBwZW5kKAogICAgICAgICAgICAgICAgZGljdCgKICAgICAgICAgICAgICAgICAgICBtZXRob2Q9InVwZGF0ZSIsCiAgICAgICAgICAgICAgICAgICAgbGFiZWw9bmNvbCwKICAgICAgICAgICAgICAgICAgICBhcmdzPVsKICAgICAgICAgICAgICAgICAgICAgICAgeyJ5IjogW2RmLmxvY1tkZltsYWJlbF9jb2x1bW5dID09IGxdW25jb2xdIGZvciBsIGluIGxhYmVsc119LAogICAgICAgICAgICAgICAgICAgICAgICBucC5hcmFuZ2UobGVuKGxhYmVscykpLnRvbGlzdCgpLAogICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKICAgICAgICBlbHNlOgogICAgICAgICAgICB4X2J1dHRvbnMuYXBwZW5kKAogICAgICAgICAgICAgICAgZGljdChtZXRob2Q9InVwZGF0ZSIsIGxhYmVsPW5jb2wsIGFyZ3M9W3sieCI6IFtkZltuY29sXV19XSkKICAgICAgICAgICAgKQoKICAgICAgICAgICAgeV9idXR0b25zLmFwcGVuZCgKICAgICAgICAgICAgICAgIGRpY3QobWV0aG9kPSJ1cGRhdGUiLCBsYWJlbD1uY29sLCBhcmdzPVt7InkiOiBbZGZbbmNvbF1dfV0pCiAgICAgICAgICAgICkKCiAgICAjIFBhc3MgYnV0dG9ucyB0byB0aGUgdXBkYXRlbWVudXMgYXJndW1lbnQKICAgIGZpZy51cGRhdGVfbGF5b3V0KAogICAgICAgIHVwZGF0ZW1lbnVzPVsKICAgICAgICAgICAgZGljdChidXR0b25zPXhfYnV0dG9ucywgZGlyZWN0aW9uPSJ1cCIsIHg9MC41LCB5PS0wLjEpLAogICAgICAgICAgICBkaWN0KGJ1dHRvbnM9eV9idXR0b25zLCBkaXJlY3Rpb249ImRvd24iLCB4PS1tYXhfZmVhdHVyZV9sZW4gLyAxMDAsIHk9MC41KSwKICAgICAgICBdCiAgICApCgogICAgZmlnLnVwZGF0ZV9sYXlvdXQoCiAgICAgICAgd2lkdGg9NjAwLAogICAgICAgIGhlaWdodD00MDAsCiAgICAgICAgYXV0b3NpemU9RmFsc2UsCiAgICAgICAgbWFyZ2luPWRpY3QodD0xMDAsIGI9MCwgbD0wLCByPTApLAogICAgICAgIHRlbXBsYXRlPSJwbG90bHlfd2hpdGUiLAogICAgKQoKICAgIGZpZy51cGRhdGVfbGF5b3V0KHRpdGxlX3RleHQ9ZiI8aT48Yj5TY2F0dGVyLTJkPC9iPjwvaT4iKQogICAgZXh0cmFfZGF0YVtmInNjYXR0ZXItMmQiXSA9IGNvbnRleHQubG9nX2FydGlmYWN0KAogICAgICAgIFBsb3RseUFydGlmYWN0KGtleT1mInNjYXR0ZXItMmQiLCBmaWd1cmU9ZmlnKSwKICAgICAgICBsb2NhbF9wYXRoPWYie3Bsb3RzX2Rlc3R9L3NjYXR0ZXItMmQuaHRtbCIsCiAgICApCgoKZGVmIF9jcmVhdGVfdmlvbGluX2FydGlmYWN0KAogICAgY29udGV4dDogTUxDbGllbnRDdHgsIGRmOiBwZC5EYXRhRnJhbWUsIGV4dHJhX2RhdGE6IGRpY3QsIHBsb3RzX2Rlc3Q6IHN0cgopOgogICAgIiIiCiAgICBDcmVhdGUgYW5kIGxvZyBhIHZpb2xpbiBhcnRpZmFjdAogICAgIiIiCiAgICBjb2xzID0gNQogICAgcm93cyA9IChkZi5zaGFwZVsxXSAvLyBjb2xzKSArIDEKICAgIGZpZyA9IG1ha2Vfc3VicGxvdHMocm93cz1yb3dzLCBjb2xzPWNvbHMpCgogICAgcGxvdF9udW0gPSAwCgogICAgZm9yIChjb2x1bW5OYW1lLCBjb2x1bW5EYXRhKSBpbiBkZi5pdGVyaXRlbXMoKToKICAgICAgICB2aW9saW4gPSBnby5WaW9saW4oCiAgICAgICAgICAgIHg9W2NvbHVtbk5hbWVdICogY29sdW1uRGF0YS5zaGFwZVswXSwKICAgICAgICAgICAgeT1jb2x1bW5EYXRhLAogICAgICAgICAgICBuYW1lPWNvbHVtbk5hbWUsCiAgICAgICAgKQoKICAgICAgICBmaWcuYWRkX3RyYWNlKAogICAgICAgICAgICB2aW9saW4sCiAgICAgICAgICAgIHJvdz0ocGxvdF9udW0gLy8gY29scykgKyAxLAogICAgICAgICAgICBjb2w9KHBsb3RfbnVtICUgY29scykgKyAxLAogICAgICAgICkKCiAgICAgICAgcGxvdF9udW0gKz0gMQoKICAgIGZpZ1sibGF5b3V0Il0udXBkYXRlKAogICAgICAgIGhlaWdodD0ocm93cyArIDEpICogMjAwLAogICAgICAgIHdpZHRoPShjb2xzICsgMSkgKiAyMDAsCiAgICAgICAgdGl0bGU9IjxpPjxiPlZpb2xpbiBQbG90czwvYj48L2k+IiwKICAgICkKCiAgICBmaWcudXBkYXRlX2xheW91dChzaG93bGVnZW5kPUZhbHNlKQogICAgZXh0cmFfZGF0YVsidmlvbGluIl0gPSBjb250ZXh0LmxvZ19hcnRpZmFjdCgKICAgICAgICBQbG90bHlBcnRpZmFjdChrZXk9InZpb2xpbiIsIGZpZ3VyZT1maWcpLAogICAgICAgIGxvY2FsX3BhdGg9ZiJ7cGxvdHNfZGVzdH0vdmlvbGluLmh0bWwiLAogICAgKQoKCmRlZiBfY3JlYXRlX2ltYmFsYW5jZV9hcnRpZmFjdCgKICAgIGNvbnRleHQ6IE1MQ2xpZW50Q3R4LAogICAgZGY6IHBkLkRhdGFGcmFtZSwKICAgIGV4dHJhX2RhdGE6IGRpY3QsCiAgICBsYWJlbF9jb2x1bW46IHN0ciwKICAgIHBsb3RzX2Rlc3Q6IHN0ciwKICAgIHByb2JsZW1fdHlwZTogc3RyLAopOgogICAgIiIiCiAgICBDcmVhdGUgYW5kIGxvZyBhbiBpbWJhbGFuY2UgY2xhc3MgYXJ0aWZhY3QgKGNzdiArIHBsb3QpCiAgICAiIiIKICAgIGlmIGxhYmVsX2NvbHVtbjoKICAgICAgICBpZiBwcm9ibGVtX3R5cGUgPT0gImNsYXNzaWZpY2F0aW9uIjoKICAgICAgICAgICAgbGFiZWxzX2NvdW50ID0gZGZbbGFiZWxfY29sdW1uXS52YWx1ZV9jb3VudHMoKS5zb3J0X2luZGV4KCkKICAgICAgICAgICAgZGZfbGFiZWxzX2NvdW50ID0gcGQuRGF0YUZyYW1lKGxhYmVsc19jb3VudCkKICAgICAgICAgICAgZGZfbGFiZWxzX2NvdW50LnJlbmFtZShjb2x1bW5zPXtsYWJlbF9jb2x1bW46ICJUb3RhbCJ9LCBpbnBsYWNlPVRydWUpCiAgICAgICAgICAgIGRmX2xhYmVsc19jb3VudFtsYWJlbF9jb2x1bW5dID0gbGFiZWxzX2NvdW50LmluZGV4CiAgICAgICAgICAgIGRmX2xhYmVsc19jb3VudFsid2VpZ2h0cyJdID0gZGZfbGFiZWxzX2NvdW50WyJUb3RhbCJdIC8gc3VtKAogICAgICAgICAgICAgICAgZGZfbGFiZWxzX2NvdW50WyJUb3RhbCJdCiAgICAgICAgICAgICkKCiAgICAgICAgICAgIGZpZyA9IHB4LnBpZShkZl9sYWJlbHNfY291bnQsIG5hbWVzPWxhYmVsX2NvbHVtbiwgdmFsdWVzPSJUb3RhbCIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZmlnID0gcHguaGlzdG9ncmFtKAogICAgICAgICAgICAgICAgaGlzdGZ1bmM9ImNvdW50IiwKICAgICAgICAgICAgICAgIHg9ZGZbbGFiZWxfY29sdW1uXSwKICAgICAgICAgICAgKQogICAgICAgICAgICBoaXN0ID0gbnAuaGlzdG9ncmFtKGRmW2xhYmVsX2NvbHVtbl0pCiAgICAgICAgICAgIGRmX2xhYmVsc19jb3VudCA9IHBkLkRhdGFGcmFtZSgKICAgICAgICAgICAgICAgIHsibWluX3ZhbCI6IGhpc3RbMV0sICJjb3VudCI6IGhpc3RbMF0udG9saXN0KCkgKyBbMF19CiAgICAgICAgICAgICkKICAgICAgICBmaWcudXBkYXRlX2xheW91dCh0aXRsZV90ZXh0PSI8aT48Yj5MYWJlbHMgSW1iYWxhbmNlPC9iPjwvaT4iKQogICAgICAgIGV4dHJhX2RhdGFbImltYmFsYW5jZSJdID0gY29udGV4dC5sb2dfYXJ0aWZhY3QoCiAgICAgICAgICAgIFBsb3RseUFydGlmYWN0KGtleT0iaW1iYWxhbmNlIiwgZmlndXJlPWZpZyksCiAgICAgICAgICAgIGxvY2FsX3BhdGg9ZiJ7cGxvdHNfZGVzdH0vaW1iYWxhbmNlLmh0bWwiLAogICAgICAgICkKICAgICAgICBleHRyYV9kYXRhWyJpbWJhbGFuY2UtY3N2Il0gPSBjb250ZXh0LmxvZ19hcnRpZmFjdCgKICAgICAgICAgICAgVGFibGVBcnRpZmFjdCgiaW1iYWxhbmNlLXdlaWdodHMtdmVjIiwgZGY9ZGZfbGFiZWxzX2NvdW50KSwKICAgICAgICAgICAgbG9jYWxfcGF0aD1mIntwbG90c19kZXN0fS9pbWJhbGFuY2Utd2VpZ2h0cy12ZWMuY3N2IiwKICAgICAgICApCgoKZGVmIF9jcmVhdGVfY29ycl9hcnRpZmFjdCgKICAgIGNvbnRleHQ6IE1MQ2xpZW50Q3R4LAogICAgZGY6IHBkLkRhdGFGcmFtZSwKICAgIGV4dHJhX2RhdGE6IGRpY3QsCiAgICBsYWJlbF9jb2x1bW46IHN0ciwKICAgIHBsb3RzX2Rlc3Q6IHN0ciwKKToKICAgICIiIgogICAgQ3JlYXRlIGFuZCBsb2cgYW4gY29ycmVsYXRpb24tbWF0cml4IGFydGlmYWN0IChjc3YgKyBwbG90KQogICAgIiIiCiAgICBpZiBsYWJlbF9jb2x1bW4gaXMgbm90IE5vbmU6CiAgICAgICAgZGYgPSBkZi5kcm9wKFtsYWJlbF9jb2x1bW5dLCBheGlzPTEpCiAgICB0Ymxjb3JyID0gZGYuY29ycigpCiAgICBleHRyYV9kYXRhWyJjb3JyZWxhdGlvbi1tYXRyaXgtY3N2Il0gPSBjb250ZXh0LmxvZ19hcnRpZmFjdCgKICAgICAgICBUYWJsZUFydGlmYWN0KCJjb3JyZWxhdGlvbi1tYXRyaXgtY3N2IiwgZGY9dGJsY29yciwgdmlzaWJsZT1UcnVlKSwKICAgICAgICBsb2NhbF9wYXRoPWYie3Bsb3RzX2Rlc3R9L2NvcnJlbGF0aW9uLW1hdHJpeC5jc3YiLAogICAgKQoKICAgIHogPSB0Ymxjb3JyLnZhbHVlcy50b2xpc3QoKQogICAgel90ZXh0ID0gW1siezouMmZ9Ii5mb3JtYXQoeSkgZm9yIHkgaW4geF0gZm9yIHggaW4gel0KICAgIGZpZyA9IGZmLmNyZWF0ZV9hbm5vdGF0ZWRfaGVhdG1hcCgKICAgICAgICB6LAogICAgICAgIHg9bGlzdCh0Ymxjb3JyLmNvbHVtbnMpLAogICAgICAgIHk9bGlzdCh0Ymxjb3JyLmNvbHVtbnMpLAogICAgICAgIGFubm90YXRpb25fdGV4dD16X3RleHQsCiAgICAgICAgY29sb3JzY2FsZT0iYWdzdW5zZXQiLAogICAgKQogICAgZmlnWyJsYXlvdXQiXVsieWF4aXMiXVsiYXV0b3JhbmdlIl0gPSAicmV2ZXJzZWQiICAjIGwgLT4gcgogICAgZmlnLnVwZGF0ZV9sYXlvdXQodGl0bGVfdGV4dD0iPGk+PGI+Q29ycmVsYXRpb24gbWF0cml4PC9iPjwvaT4iKQogICAgZmlnWyJkYXRhIl1bMF1bInNob3dzY2FsZSJdID0gVHJ1ZQoKICAgIGV4dHJhX2RhdGFbImNvcnJlbGF0aW9uIl0gPSBjb250ZXh0LmxvZ19hcnRpZmFjdCgKICAgICAgICBQbG90bHlBcnRpZmFjdChrZXk9ImNvcnJlbGF0aW9uIiwgZmlndXJlPWZpZyksCiAgICAgICAgbG9jYWxfcGF0aD1mIntwbG90c19kZXN0fS9jb3JyZWxhdGlvbi5odG1sIiwKICAgICkK
    commands: []
    code_origin: https://github.com/davesh0812/functions.git#8d4ad13e3b3001f9dfc679b537f59b1b11ccf4fb:/Users/davids/Projects/functions/describe/describe.py
    origin_filename: /Users/davids/Projects/functions/describe/describe.py
  entry_points:
    analyze:
      name: analyze
      doc: 'The function will output the following artifacts per

        column within the data frame (based on data types)

        If the data has more than 500,000 sample we

        sample randomly 500,000 samples:


        describe csv

        histograms

        scatter-2d

        violin chart

        correlation-matrix chart

        correlation-matrix csv

        imbalance pie chart

        imbalance-weights-vec csv'
      parameters:
      - name: context
        type: MLClientCtx
        doc: The function context
        default: ''
      - name: name
        type: str
        doc: Key of dataset to database ("dataset" for default)
        default: dataset
      - name: table
        type: Union[FeatureSet, DataItem]
        doc: MLRun input pointing to pandas dataframe (csv/parquet file path) or FeatureSet
          as param
        default: null
      - name: label_column
        type: str
        doc: Ground truth column label
        default: null
      - name: plots_dest
        type: str
        doc: Destination folder of summary plots (relative to artifact_path) ("plots"
          for default)
        default: plots
      - name: random_state
        type: int
        doc: When the table has more than 500,000 samples, we sample randomly 500,000
          samples
        default: 1
      - name: problem_type
        type: str
        default: classification
      - name: dask_key
        type: str
        doc: Key of dataframe in dask client "datasets" attribute
        default: dask_key
      - name: dask_function
        type: str
        doc: Dask function url (db://..)
        default: null
      - name: dask_client
        doc: Dask client object
        default: null
      outputs:
      - default: ''
      lineno: 29
  description: describe and visualizes dataset stats
  default_handler: analyze
  disable_auto_mount: false
  env: []
  priority_class_name: ''
  preemption_mode: prevent
  affinity: null
  tolerations: null
verbose: false
