metadata:
  tag: ''
  name: gen-class-data
  categories:
  - data-generation
verbose: false
kind: job
spec:
  image: mlrun/mlrun
  disable_auto_mount: false
  build:
    origin_filename: ''
    functionSourceCode: IyBDb3B5cmlnaHQgMjAxOSBJZ3VhemlvCiMKIyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKIyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiMgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiMKIyAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiMKIyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiMgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKIyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KIyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiMgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiMKCmltcG9ydCBwYW5kYXMgYXMgcGQKZnJvbSBtbHJ1bi5leGVjdXRpb24gaW1wb3J0IE1MQ2xpZW50Q3R4CmZyb20gc2tsZWFybi5kYXRhc2V0cyBpbXBvcnQgbWFrZV9jbGFzc2lmaWNhdGlvbgoKCmRlZiBnZW5fY2xhc3NfZGF0YSgKICAgIGNvbnRleHQ6IE1MQ2xpZW50Q3R4LAogICAgbl9zYW1wbGVzOiBpbnQsCiAgICBtX2ZlYXR1cmVzOiBpbnQsCiAgICBrX2NsYXNzZXM6IGludCwKICAgIGhlYWRlcjogbGlzdFtzdHJdIHwgTm9uZSwKICAgIGxhYmVsX2NvbHVtbjogc3RyIHwgTm9uZSA9ICJsYWJlbHMiLAogICAgd2VpZ2h0OiBmbG9hdCA9IDAuNSwKICAgIHJhbmRvbV9zdGF0ZTogaW50ID0gMSwKICAgIGtleTogc3RyID0gImNsYXNzaWZpZXItZGF0YSIsCiAgICBmaWxlX2V4dDogc3RyID0gInBhcnF1ZXQiLAogICAgc2tfcGFyYW1zPXt9LAopOgogICAgIiIiQ3JlYXRlIGEgYmluYXJ5IGNsYXNzaWZpY2F0aW9uIHNhbXBsZSBkYXRhc2V0IGFuZCBzYXZlLgogICAgSWYgbm8gZmlsZW5hbWUgaXMgZ2l2ZW4gaXQgd2lsbCBkZWZhdWx0IHRvOgogICAgInNpbWRhdGEte25fc2FtcGxlc31Ye21fZmVhdHVyZXN9LnBhcnF1ZXQiLgoKICAgIEFkZGl0aW9uYWwgc2Npa2l0LWxlYXJuIHBhcmFtZXRlcnMgY2FuIGJlIHNldCB1c2luZyAqKnNrX3BhcmFtcywgcGxlYXNlIHNlZSBodHRwczovL3NjaWtpdC1sZWFybi5vcmcvc3RhYmxlL21vZHVsZXMvZ2VuZXJhdGVkL3NrbGVhcm4uZGF0YXNldHMubWFrZV9jbGFzc2lmaWNhdGlvbi5odG1sIGZvciBtb3JlIGRldGFpbHMuCgogICAgOnBhcmFtIGNvbnRleHQ6ICAgICAgIGZ1bmN0aW9uIGNvbnRleHQKICAgIDpwYXJhbSBuX3NhbXBsZXM6ICAgICBudW1iZXIgb2Ygcm93cy9zYW1wbGVzCiAgICA6cGFyYW0gbV9mZWF0dXJlczogICAgbnVtYmVyIG9mIGNvbHMvZmVhdHVyZXMKICAgIDpwYXJhbSBrX2NsYXNzZXM6ICAgICBudW1iZXIgb2YgY2xhc3NlcwogICAgOnBhcmFtIGhlYWRlcjogICAgICAgIGhlYWRlciBmb3IgZmVhdHVyZXMgYXJyYXkKICAgIDpwYXJhbSBsYWJlbF9jb2x1bW46ICBjb2x1bW4gbmFtZSBvZiBncm91bmQtdHJ1dGggc2VyaWVzCiAgICA6cGFyYW0gd2VpZ2h0OiAgICAgICAgZnJhY3Rpb24gb2Ygc2FtcGxlIG5lZ2F0aXZlIHZhbHVlIChncm91bmQtdHJ1dGg9MCkKICAgIDpwYXJhbSByYW5kb21fc3RhdGU6ICBybmcgc2VlZCAoc2VlIGh0dHBzOi8vc2Npa2l0LWxlYXJuLm9yZy9zdGFibGUvZ2xvc3NhcnkuaHRtbCN0ZXJtLXJhbmRvbS1zdGF0ZSkKICAgIDpwYXJhbSBrZXk6ICAgICAgICAgICBrZXkgb2YgZGF0YSBpbiBhcnRpZmFjdCBzdG9yZQogICAgOnBhcmFtIGZpbGVfZXh0OiAgICAgIChwcXQpIGV4dGVuc2lvbiBmb3IgcGFycXVldCBmaWxlCiAgICA6cGFyYW0gc2tfcGFyYW1zOiAgICAgYWRkaXRpb25hbCBwYXJhbWV0ZXJzIGZvciBgc2tsZWFybi5kYXRhc2V0cy5tYWtlX2NsYXNzaWZpY2F0aW9uYAogICAgIiIiCiAgICBmZWF0dXJlcywgbGFiZWxzID0gbWFrZV9jbGFzc2lmaWNhdGlvbigKICAgICAgICBuX3NhbXBsZXM9bl9zYW1wbGVzLAogICAgICAgIG5fZmVhdHVyZXM9bV9mZWF0dXJlcywKICAgICAgICB3ZWlnaHRzPXdlaWdodCwKICAgICAgICBuX2NsYXNzZXM9a19jbGFzc2VzLAogICAgICAgIHJhbmRvbV9zdGF0ZT1yYW5kb21fc3RhdGUsCiAgICAgICAgKipza19wYXJhbXMsCiAgICApCgogICAgIyBtYWtlIGRhdGFmcmFtZXMsIGFkZCBjb2x1bW4gbmFtZXMsIGNvbmNhdGVuYXRlIChYLCB5KQogICAgWCA9IHBkLkRhdGFGcmFtZShmZWF0dXJlcykKICAgIGlmIG5vdCBoZWFkZXI6CiAgICAgICAgWC5jb2x1bW5zID0gWyJmZWF0XyIgKyBzdHIoeCkgZm9yIHggaW4gcmFuZ2UobV9mZWF0dXJlcyldCiAgICBlbHNlOgogICAgICAgIFguY29sdW1ucyA9IGhlYWRlcgoKICAgIHkgPSBwZC5EYXRhRnJhbWUobGFiZWxzLCBjb2x1bW5zPVtsYWJlbF9jb2x1bW5dKQogICAgZGF0YSA9IHBkLmNvbmNhdChbWCwgeV0sIGF4aXM9MSkKCiAgICBjb250ZXh0LmxvZ19kYXRhc2V0KGtleSwgZGY9ZGF0YSwgZm9ybWF0PWZpbGVfZXh0LCBpbmRleD1GYWxzZSkK
    code_origin: ''
  filename: gen_class_data.py
  entry_points:
    gen_class_data:
      parameters:
      - name: context
        type: MLClientCtx
        doc: function context
      - name: n_samples
        type: int
        doc: number of rows/samples
      - name: m_features
        type: int
        doc: number of cols/features
      - name: k_classes
        type: int
        doc: number of classes
      - name: header
        doc: header for features array
      - name: label_column
        doc: column name of ground-truth series
        default: labels
      - name: weight
        type: float
        doc: fraction of sample negative value (ground-truth=0)
        default: 0.5
      - name: random_state
        type: int
        doc: rng seed (see https://scikit-learn.org/stable/glossary.html#term-random-state)
        default: 1
      - name: key
        type: str
        doc: key of data in artifact store
        default: classifier-data
      - name: file_ext
        type: str
        doc: (pqt) extension for parquet file
        default: parquet
      - name: sk_params
        doc: additional parameters for `sklearn.datasets.make_classification`
        default: {}
      name: gen_class_data
      doc: 'Create a binary classification sample dataset and save.

        If no filename is given it will default to:

        "simdata-{n_samples}X{m_features}.parquet".


        Additional scikit-learn parameters can be set using **sk_params, please see
        https://scikit-learn.org/stable/modules/generated/sklearn.datasets.make_classification.html
        for more details.'
      has_kwargs: false
      has_varargs: false
      lineno: 21
  command: ''
  description: Create a binary classification sample dataset and save.
  default_handler: gen_class_data
