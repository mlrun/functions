kind: job
metadata:
  name: load-dataset
  tag: ''
  hash: 3e1d9a7fe6bc5fa64a022bf936cebb08a2c8afe6
  project: ''
  labels:
    author: yjb
    stage: development
  categories:
  - datagen
  - fileutils
spec:
  command: ''
  args: []
  image: mlrun/ml-models:0.4.5
  env: []
  default_handler: load_dataset
  description: ''
  image_pull_policy: Always
  build:
    functionSourceCode: IyBDb3B5cmlnaHQgMjAxOCBJZ3VhemlvCiMKIyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKIyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiMgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiMKIyAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAojCiMgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQojIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiMgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiMgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAojIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgppbXBvcnQgb3MKaW1wb3J0IGpzb24KZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCmltcG9ydCBudW1weSBhcyBucAppbXBvcnQgcGFuZGFzIGFzIHBkCmZyb20gY2xvdWRwaWNrbGUgaW1wb3J0IGR1bXAsIGxvYWQKCmZyb20gbWxydW4uZXhlY3V0aW9uIGltcG9ydCBNTENsaWVudEN0eApmcm9tIG1scnVuLmRhdGFzdG9yZSBpbXBvcnQgRGF0YUl0ZW0KCmZyb20gdHlwaW5nIGltcG9ydCBJTywgQW55U3RyLCBVbmlvbiwgTGlzdCwgT3B0aW9uYWwKCmRlZiBnZXRfdG95X2RhdGEoCiAgICBjb250ZXh0OiBNTENsaWVudEN0eCwKICAgIGRhdGFzZXQ6IHN0ciwKICAgIHBhcmFtczogZGljdCA9IHt9CikgLT4gTm9uZToKICAgICIiIkxvYWRzIGEgc2Npa2l0LWxlYXJuIHRveSBkYXRhc2V0IGZvciBjbGFzc2lmaWNhdGlvbiBvciByZWdyZXNzaW9uCiAgICAKICAgIFRoZSBmb2xsb3dpbmcgZGF0YXNldHMgYXJlIGF2YWlsYWJsZSAoJ25hbWUnIDogZGVzcmlwdGlvbik6CiAgICAKICAgICAgICAnYm9zdG9uJyAgIDogYm9zdG9uIGhvdXNlLXByaWNlcyBkYXRhc2V0IChyZWdyZXNzaW9uKQogICAgICAgICdpcmlzJyAgICAgOiBpcmlzIGRhdGFzZXQgKGNsYXNzaWZpY2F0aW9uKQogICAgICAgICdkaWFiZXRlcycgOiBkaWFiZXRlcyBkYXRhc2V0IChyZWdyZXNzaW9uKQogICAgICAgICdkaWdpdHMnICAgOiBkaWdpdHMgZGF0YXNldCAoY2xhc3NpZmljYXRpb24pCiAgICAgICAgJ2xpbm5lcnVkJyA6IGxpbm5lcnVkIGRhdGFzZXQgKG11bHRpdmFyaWF0ZSByZWdyZXNzaW9uKQogICAgICAgICd3aW5lJyAgICAgOiB3aW5lIGRhdGFzZXQgKGNsYXNzaWZpY2F0aW9uKQogICAgICAgICdjYW5jZXInICAgOiBicmVhc3QgY2FuY2VyIHdpc2NvbnNpbiBkYXRhc2V0IChjbGFzc2lmaWNhdGlvbikKICAgIAogICAgVGhlIHNjaWtpdC1sZWFybiBmdW5jdGlvbnMgcmV0dXJuIGEgZGF0YSBidW5jaCBpbmNsdWRpbmcgdGhlIGZvbGxvd2luZyBpdGVtczoKICAgIC0gZGF0YSAgICAgICAgICAgICAgdGhlIGZlYXR1cmVzIG1hdHJpeAogICAgLSB0YXJnZXQgICAgICAgICAgICB0aGUgZ3JvdW5kIHRydXRoIGxhYmVscwogICAgLSBERVNDUiAgICAgICAgICAgICBhIGRlc2NyaXB0aW9uIG9mIHRoZSBkYXRhc2V0CiAgICAtIGZlYXR1cmVfbmFtZXMgICAgIGhlYWRlciBmb3IgZGF0YQogICAgCiAgICBUaGUgZmVhdHVyZXMgKGFuZCB0aGVpciBuYW1lcykgYXJlIHN0b3JlZCB3aXRoIHRoZSB0YXJnZXQgbGFiZWxzIGluIGEgRGF0YUZyYW1lLgoKICAgIEZvciBmdXJ0aGVyIGRldGFpbHMgc2VlIGh0dHBzOi8vc2Npa2l0LWxlYXJuLm9yZy9zdGFibGUvZGF0YXNldHMvaW5kZXguaHRtbCN0b3ktZGF0YXNldHMKICAgIAogICAgOnBhcmFtIGNvbnRleHQ6ICAgIGZ1bmN0aW9uIGV4ZWN1dGlvbiBjb250ZXh0CiAgICA6cGFyYW0gZGF0YXNldDogICAgbmFtZSBvZiB0aGUgZGF0YXNldCB0byBsb2FkIAogICAgOnBhcmFtIHBhcmFtczogICAgIHBhcmFtcyBvZiB0aGUgc2tsZWFybiBsb2FkX2RhdGEgbWV0aG9kCiAgICAiIiIKICAgIGZpbGVwYXRoID0gb3MucGF0aC5qb2luKGNvbnRleHQuYXJ0aWZhY3RfcGF0aCwgZGF0YXNldCkgKyAnLnBxdCcKICAgIAogICAgIyBjaGVjayB0byBzZWUgaWYgd2UgaGF2ZW4ndCBhbHJlYWR5IGRvd25sb2FkZWQgdGhlIGZpbGUKICAgIGlmIG5vdCBvcy5wYXRoLmlzZmlsZShmaWxlcGF0aCk6CiAgICAgICAgYXJ0aWZhY3RfcGF0aCA9IGNvbnRleHQuYXJ0aWZhY3RfcGF0aAoKICAgICAgICAjIHJlYWNoIGludG8gbW9kdWxlIGFuZCBpbXBvcnQgdGhlIGFwcHJvcHJpYXRlIGxvYWRfeHh4IGZ1bmN0aW9uCiAgICAgICAgcGtnX21vZHVsZSA9ICdza2xlYXJuLmRhdGFzZXRzJwogICAgICAgIGZuYW1lID0gZidsb2FkX3tkYXRhc2V0fScKCiAgICAgICAgcGtnX21vZHVsZSA9IF9faW1wb3J0X18ocGtnX21vZHVsZSwgZnJvbWxpc3Q9W2ZuYW1lXSkKICAgICAgICBsb2FkX2RhdGFfZm4gPSBnZXRhdHRyKHBrZ19tb2R1bGUsIGZuYW1lKQogICAgICAgIAogICAgICAgIGRhdGEgPSBsb2FkX2RhdGFfZm4oKipwYXJhbXMpCiAgICAgICAgZmVhdHVyZV9uYW1lcyA9IGRhdGFbJ2ZlYXR1cmVfbmFtZXMnXQogICAgICAgIAogICAgICAgICMgc2F2ZQogICAgICAgIHh5ID0gbnAuY29uY2F0ZW5hdGUoW2RhdGFbJ2RhdGEnXSwgZGF0YVsndGFyZ2V0J10ucmVzaGFwZSgtMSwgMSldLCBheGlzPTEpCiAgICAgICAgZmVhdHVyZV9uYW1lcy5hcHBlbmQoJ2xhYmVscycpCiAgICAgICAgZGYgPSBwZC5EYXRhRnJhbWUoZGF0YT14eSwgY29sdW1ucz1mZWF0dXJlX25hbWVzKQogICAgICAgIGRmLnRvX3BhcnF1ZXQoZmlsZXBhdGgsIGVuZ2luZT0ncHlhcnJvdycsIGluZGV4PUZhbHNlKQogICAgICAgIAogICAgIyBlaXRoZXIgd2UganVzdCBkb3dubG9hZGVkIGZpbGUsIG9yIGl0IGV4aXN0cywgbG9nIGl0OgogICAgY29udGV4dC5sb2dfYXJ0aWZhY3QoZGF0YXNldCwgbG9jYWxfcGF0aD1maWxlcGF0aC5zcGxpdCgnLycpWy0xXSkKICAgICAgICA=
    commands: []
    code_origin: https://github.com/mlrun/functions.git#e34951cf8ba8c6161f717f861134daa03106d87b:load_dataset/load_dataset.py
