kind: job
metadata:
  name: load-dataset
  tag: ''
  hash: 84bdd530f4da0317531e280996ad5e253e42ee3f
  project: ''
  labels:
    author: yjb
    stage: development
  categories:
  - datagen
  - fileutils
spec:
  command: ''
  args: []
  image: mlrun/ml-models:0.4.5
  env: []
  default_handler: load_dataset
  description: ''
  build:
    functionSourceCode: IyBDb3B5cmlnaHQgMjAxOCBJZ3VhemlvCiMKIyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKIyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiMgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiMKIyAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAojCiMgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQojIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiMgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiMgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAojIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgppbXBvcnQgb3MKaW1wb3J0IGpzb24KZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCmltcG9ydCBudW1weSBhcyBucAppbXBvcnQgcGFuZGFzIGFzIHBkCmZyb20gY2xvdWRwaWNrbGUgaW1wb3J0IGR1bXAsIGxvYWQKCmZyb20gbWxydW4uZXhlY3V0aW9uIGltcG9ydCBNTENsaWVudEN0eApmcm9tIG1scnVuLmRhdGFzdG9yZSBpbXBvcnQgRGF0YUl0ZW0KCmZyb20gdHlwaW5nIGltcG9ydCBJTywgQW55U3RyLCBVbmlvbiwgTGlzdCwgT3B0aW9uYWwKCmRlZiBnZXRfdG95X2RhdGEoCiAgICBjb250ZXh0OiBNTENsaWVudEN0eCwKICAgIGRhdGFzZXQ6IHN0ciwKICAgIHBhcmFtczogZGljdCA9IHt9CikgLT4gTm9uZToKICAgICIiIkxvYWRzIGEgc2Npa2l0LWxlYXJuIHRveSBkYXRhc2V0IGZvciBjbGFzc2lmaWNhdGlvbiBvciByZWdyZXNzaW9uCiAgICAKICAgIFRoZSBmb2xsb3dpbmcgZGF0YXNldHMgYXJlIGF2YWlsYWJsZSAoJ25hbWUnIDogZGVzcmlwdGlvbik6CiAgICAKICAgICAgICAnYm9zdG9uJyAgIDogYm9zdG9uIGhvdXNlLXByaWNlcyBkYXRhc2V0IChyZWdyZXNzaW9uKQogICAgICAgICdpcmlzJyAgICAgOiBpcmlzIGRhdGFzZXQgKGNsYXNzaWZpY2F0aW9uKQogICAgICAgICdkaWFiZXRlcycgOiBkaWFiZXRlcyBkYXRhc2V0IChyZWdyZXNzaW9uKQogICAgICAgICdkaWdpdHMnICAgOiBkaWdpdHMgZGF0YXNldCAoY2xhc3NpZmljYXRpb24pCiAgICAgICAgJ2xpbm5lcnVkJyA6IGxpbm5lcnVkIGRhdGFzZXQgKG11bHRpdmFyaWF0ZSByZWdyZXNzaW9uKQogICAgICAgICd3aW5lJyAgICAgOiB3aW5lIGRhdGFzZXQgKGNsYXNzaWZpY2F0aW9uKQogICAgICAgICdjYW5jZXInICAgOiBicmVhc3QgY2FuY2VyIHdpc2NvbnNpbiBkYXRhc2V0IChjbGFzc2lmaWNhdGlvbikKICAgIAogICAgVGhlIHNjaWtpdC1sZWFybiBmdW5jdGlvbnMgcmV0dXJuIGEgZGF0YSBidW5jaCBpbmNsdWRpbmcgdGhlIGZvbGxvd2luZyBpdGVtczoKICAgIC0gZGF0YSAgICAgICAgICAgICAgdGhlIGZlYXR1cmVzIG1hdHJpeAogICAgLSB0YXJnZXQgICAgICAgICAgICB0aGUgZ3JvdW5kIHRydXRoIGxhYmVscwogICAgLSBERVNDUiAgICAgICAgICAgICBhIGRlc2NyaXB0aW9uIG9mIHRoZSBkYXRhc2V0CiAgICAtIGZlYXR1cmVfbmFtZXMgICAgIGhlYWRlciBmb3IgZGF0YQogICAgCiAgICBUaGUgZmVhdHVyZXMgKGFuZCB0aGVpciBuYW1lcykgYXJlIHN0b3JlZCB3aXRoIHRoZSB0YXJnZXQgbGFiZWxzIGluIGEgRGF0YUZyYW1lLgoKICAgIEZvciBmdXJ0aGVyIGRldGFpbHMgc2VlIGh0dHBzOi8vc2Npa2l0LWxlYXJuLm9yZy9zdGFibGUvZGF0YXNldHMvaW5kZXguaHRtbCN0b3ktZGF0YXNldHMKICAgIAogICAgOnBhcmFtIGNvbnRleHQ6ICAgIGZ1bmN0aW9uIGV4ZWN1dGlvbiBjb250ZXh0CiAgICA6cGFyYW0gZGF0YXNldDogICAgbmFtZSBvZiB0aGUgZGF0YXNldCB0byBsb2FkIAogICAgOnBhcmFtIHBhcmFtczogICAgIHBhcmFtcyBvZiB0aGUgc2tsZWFybiBsb2FkX2RhdGEgbWV0aG9kCiAgICAiIiIKICAgIGZpbGVwYXRoID0gb3MucGF0aC5qb2luKGNvbnRleHQuYXJ0aWZhY3RfcGF0aCwgZGF0YXNldCkgKyAnLnBxdCcKICAgIAogICAgIyBjaGVjayB0byBzZWUgaWYgd2UgaGF2ZW4ndCBhbHJlYWR5IGRvd25sb2FkZWQgdGhlIGZpbGUKICAgIGlmIG5vdCBvcy5wYXRoLmlzZmlsZShmaWxlcGF0aCk6CiAgICAgICAgYXJ0aWZhY3RfcGF0aCA9IGNvbnRleHQuYXJ0aWZhY3RfcGF0aAogICAgICAgIG9zLm1ha2VkaXJzKGFydGlmYWN0X3BhdGgsIGV4aXN0X29rPVRydWUpCgogICAgICAgICMgcmVhY2ggaW50byBtb2R1bGUgYW5kIGltcG9ydCB0aGUgYXBwcm9wcmlhdGUgbG9hZF94eHggZnVuY3Rpb24KICAgICAgICBwa2dfbW9kdWxlID0gJ3NrbGVhcm4uZGF0YXNldHMnCiAgICAgICAgZm5hbWUgPSBmJ2xvYWRfe2RhdGFzZXR9JwoKICAgICAgICBwa2dfbW9kdWxlID0gX19pbXBvcnRfXyhwa2dfbW9kdWxlLCBmcm9tbGlzdD1bZm5hbWVdKQogICAgICAgIGxvYWRfZGF0YV9mbiA9IGdldGF0dHIocGtnX21vZHVsZSwgZm5hbWUpCiAgICAgICAgCiAgICAgICAgZGF0YSA9IGxvYWRfZGF0YV9mbigqKnBhcmFtcykKICAgICAgICBmZWF0dXJlX25hbWVzID0gZGF0YVsnZmVhdHVyZV9uYW1lcyddCiAgICAgICAgCiAgICAgICAgIyBzYXZlCiAgICAgICAgeHkgPSBucC5jb25jYXRlbmF0ZShbZGF0YVsnZGF0YSddLCBkYXRhWyd0YXJnZXQnXS5yZXNoYXBlKC0xLCAxKV0sIGF4aXM9MSkKICAgICAgICBmZWF0dXJlX25hbWVzLmFwcGVuZCgnbGFiZWxzJykKICAgICAgICBkZiA9IHBkLkRhdGFGcmFtZShkYXRhPXh5LCBjb2x1bW5zPWZlYXR1cmVfbmFtZXMpCiAgICAgICAgZGYudG9fcGFycXVldChmaWxlcGF0aCwgZW5naW5lPSdweWFycm93JywgaW5kZXg9RmFsc2UpCiAgICAgICAgCiAgICAjIGVpdGhlciB3ZSBqdXN0IGRvd25sb2FkZWQgZmlsZSwgb3IgaXQgZXhpc3RzLCBsb2cgaXQ6CiAgICBjb250ZXh0LmxvZ19hcnRpZmFjdChkYXRhc2V0LCBsb2NhbF9wYXRoPWZpbGVwYXRoLnNwbGl0KCcvJylbLTFdKQogICAgICAgIA==
    commands: []
    code_origin: https://github.com/yjb-ds/functions.git#2f612ab3f8a0d91253c2c72050dc10dfc16735d1:load_dataset/load_dataset.py
