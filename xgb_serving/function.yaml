kind: remote
metadata:
  name: iris-xgb-serving
  tag: latest
  hash: f0e363f7417791ad0688649cfcf494e43c6abb9b
  project: default
  labels:
    author: yaronh
  categories:
  - serving
  - models
spec:
  command: ''
  args: []
  image: ''
  description: xgboost iris classification server
  env:
  - name: SERVING_MODEL_iris_v1
    value: /User/artifacts/xgb_trainer/models/xgb-model-save_model.json
  - name: MODEL_CLASS
    value: XGBoostModel
  - name: ENABLE_EXPLAINER
    value: 'False'
  config:
    spec.triggers.http:
      kind: http
      maxWorkers: 8
      attributes:
        ingresses: {}
      annotations: {}
  base_spec:
    apiVersion: nuclio.io/v1
    kind: Function
    metadata:
      annotations:
        nuclio.io/generated_by: function generated at 30-04-2020 by admin from /User/repos/functions/xgb_serving/xgb_serving.ipynb
      labels: {}
      name: iris-xgb-serving
    spec:
      build:
        baseImage: mlrun/ml-serving:0.4.7-py37
        commands:
        - pip install xgboost
        functionSourceCode: IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlciBvbiAyMDIwLTA0LTMwIDAxOjQ5CgppbXBvcnQga2ZzZXJ2aW5nCmltcG9ydCBvcwppbXBvcnQganNvbgppbXBvcnQgbnVtcHkgYXMgbnAKaW1wb3J0IHhnYm9vc3QgYXMgeGdiCgpjbGFzcyBYR0Jvb3N0TW9kZWwoa2ZzZXJ2aW5nLktGTW9kZWwpOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWU6IHN0ciwgbW9kZWxfZGlyOiBzdHIpOgogICAgICAgIHNlbGYubmFtZSA9IG5hbWUKICAgICAgICBzZWxmLm1vZGVsX2ZpbGVwYXRoID0gbW9kZWxfZGlyCiAgICAgICAgc2VsZi5fYm9vc3RlciA9IE5vbmUKICAgICAgICBzZWxmLnJlYWR5ID0gTm9uZQoKICAgIGRlZiBsb2FkKHNlbGYpOgogICAgICAgIHNlbGYuX2Jvb3N0ZXIgPSB4Z2IuQm9vc3Rlcihtb2RlbF9maWxlPXNlbGYubW9kZWxfZmlsZXBhdGgpCiAgICAgICAgc2VsZi5yZWFkeSA9IFRydWUKICAgIAogICAgZGVmIHByZWRpY3Qoc2VsZiwgYm9keSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBucF9hcnJheV8yZCA9IG5wLmFzYXJyYXkoYm9keVsnaW5zdGFuY2VzJ10sIGR0eXBlPW5wLmZsb2F0MzIpLnJlc2hhcGUoLTEsMSkKICAgICAgICAgICAgZG1hdHJpeCA9IHhnYi5ETWF0cml4KG5wX2FycmF5XzJkKQogICAgICAgICAgICByZXN1bHQ6IHhnYi5ETWF0cml4ID0gc2VsZi5fYm9vc3Rlci5wcmVkaWN0KGRtYXRyaXgpCiAgICAgICAgICAgIHJldHVybiByZXN1bHQudG9saXN0KCkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigiRmFpbGVkIHRvIHByZWRpY3QgJXMiICUgZSkKCgpmcm9tIG1scnVuLnJ1bnRpbWVzIGltcG9ydCBudWNsaW9faW5pdF9ob29rCmRlZiBpbml0X2NvbnRleHQoY29udGV4dCk6CiAgICBudWNsaW9faW5pdF9ob29rKGNvbnRleHQsIGdsb2JhbHMoKSwgJ3NlcnZpbmcnKQoKZGVmIGhhbmRsZXIoY29udGV4dCwgZXZlbnQpOgogICAgcmV0dXJuIGNvbnRleHQubWxydW5faGFuZGxlcihjb250ZXh0LCBldmVudCkK
        noBaseImagesPull: true
      env: []
      handler: xgb_serving:handler
      runtime: python:3.6
      volumes: []
  source: ''
  function_kind: serving
