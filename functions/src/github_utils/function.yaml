kind: job
spec:
  entry_points:
    pr_comment:
      doc: ''
      has_kwargs: false
      lineno: 23
      has_varargs: false
      name: pr_comment
      parameters:
      - name: context
      - name: repo
        type: str
      - name: issue
        type: int
      - name: message
        type: str
        default: ''
      - name: message_file
        type: DataItem
        default: null
    run_summary_comment:
      doc: ''
      has_kwargs: false
      lineno: 45
      has_varargs: false
      name: run_summary_comment
      parameters:
      - name: context
      - name: workflow_id
      - name: repo
        type: str
      - name: issue
        type: int
      - name: project
        default: ''
  disable_auto_mount: false
  default_handler: run_summary_comment
  description: add comments to github pull request
  command: ''
  build:
    code_origin: ''
    functionSourceCode: IyBDb3B5cmlnaHQgMjAxOSBJZ3VhemlvCiMKIyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKIyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiMgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiMKIyAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiMKIyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiMgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKIyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KIyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiMgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiMKIyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IG9zCgppbXBvcnQgcmVxdWVzdHMKZnJvbSBtbHJ1biBpbXBvcnQgRGF0YUl0ZW0sIGdldF9ydW5fZGIKCgpkZWYgcHJfY29tbWVudCgKICAgIGNvbnRleHQsIHJlcG86IHN0ciwgaXNzdWU6IGludCwgbWVzc2FnZTogc3RyID0gIiIsIG1lc3NhZ2VfZmlsZTogRGF0YUl0ZW0gPSBOb25lCik6CiAgICB0b2tlbiA9IGNvbnRleHQuZ2V0X3NlY3JldCgiR0lUSFVCX1RPS0VOIikgb3Igb3MuZW52aXJvbi5nZXQoIkdJVEhVQl9UT0tFTiIpCiAgICBpZiBtZXNzYWdlX2ZpbGUgYW5kIG5vdCBtZXNzYWdlOgogICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlX2ZpbGUuZ2V0KCkKICAgIGVsaWYgbm90IG1lc3NhZ2UgYW5kIG5vdCBtZXNzYWdlX2ZpbGU6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigicHIgbWVzc2FnZSBvciBtZXNzYWdlIGZpbGUgbXVzdCBiZSBwcm92aWRlZCIpCgogICAgaGVhZGVycyA9IHsKICAgICAgICAiQWNjZXB0IjogImFwcGxpY2F0aW9uL3ZuZC5naXRodWIudjMranNvbiIsCiAgICAgICAgIkF1dGhvcml6YXRpb24iOiBmInRva2VuIHt0b2tlbn0iLAogICAgfQogICAgdXJsID0gZiJodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL3tyZXBvfS9pc3N1ZXMve2lzc3VlfS9jb21tZW50cyIKCiAgICByZXNwID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBqc29uPXsiYm9keSI6IHN0cihtZXNzYWdlKX0sIGhlYWRlcnM9aGVhZGVycykKICAgIGlmIG5vdCByZXNwLm9rOgogICAgICAgIGVycm1zZyA9IGYiYmFkIHByIGNvbW1lbnQgcmVzcCEhXG57cmVzcC50ZXh0fSIKICAgICAgICBjb250ZXh0LmxvZ2dlci5lcnJvcihlcnJtc2cpCiAgICAgICAgcmFpc2UgT1NFcnJvcihlcnJtc2cpCgoKZGVmIHJ1bl9zdW1tYXJ5X2NvbW1lbnQoY29udGV4dCwgd29ya2Zsb3dfaWQsIHJlcG86IHN0ciwgaXNzdWU6IGludCwgcHJvamVjdD0iIik6CiAgICBkYiA9IGdldF9ydW5fZGIoKS5jb25uZWN0KCkKICAgIHByb2plY3QgPSBwcm9qZWN0IG9yIGNvbnRleHQucHJvamVjdAogICAgcnVucyA9IGRiLmxpc3RfcnVucyhwcm9qZWN0PXByb2plY3QsIGxhYmVscz1mIndvcmtmbG93PXt3b3JrZmxvd19pZH0iKQoKICAgIGhhZF9lcnJvcnMgPSBpID0gMAogICAgZm9yIHIgaW4gcnVuczoKICAgICAgICBuYW1lID0gclsibWV0YWRhdGEiXVsibmFtZSJdCiAgICAgICAgaWYgclsic3RhdHVzIl0uZ2V0KCJzdGF0ZSIsICIiKSA9PSAiZXJyb3IiOgogICAgICAgICAgICBoYWRfZXJyb3JzICs9IDEKICAgICAgICBpZiBuYW1lID09IGNvbnRleHQubmFtZToKICAgICAgICAgICAgZGVsIHJ1bnNbaV0KICAgICAgICBpICs9IDEKCiAgICBwcmludCgiZXJyb3JzOiIsIGhhZF9lcnJvcnMpCgogICAgaHRtbCA9IGYiIyMjIFJ1biBSZXN1bHRzXG5Xb3JrZmxvdyB7d29ya2Zsb3dfaWR9IGZpbmlzaGVkIHdpdGgge2hhZF9lcnJvcnN9IGVycm9ycyIKICAgIGh0bWwgKz0gIjxicj5jbGljayB0aGUgaHlwZXIgbGlua3MgYmVsb3cgdG8gc2VlIGRldGFpbGVkIHJlc3VsdHM8YnI+IgogICAgaHRtbCArPSBydW5zLnNob3coZGlzcGxheT1GYWxzZSwgc2hvcnQ9VHJ1ZSkKICAgIGlmIHJlcG86CiAgICAgICAgcHJfY29tbWVudChjb250ZXh0LCByZXBvLCBpc3N1ZSwgaHRtbCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoInJlcG8gbm90IGRlZmluZWQiKQogICAgICAgIHByaW50KGh0bWwpCg==
    origin_filename: ''
  image: mlrun/mlrun
  filename: github_utils.py
verbose: false
metadata:
  name: github-utils
  categories:
  - utils
  tag: ''
