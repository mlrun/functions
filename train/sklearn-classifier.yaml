kind: job
metadata:
  name: sklearn-classifier
  tag: ''
  hash: 3d4b7b654a757bb047ac767b082b8529bd7b009e
  project: ''
spec:
  command: ''
  args: []
  image: yjbds/mlrun-ds:latest
  volumes: []
  volume_mounts: []
  env: []
  description: ''
  build:
    functionSourceCode: aW1wb3J0IG51bXB5IGFzIG5wCmltcG9ydCBwYW5kYXMgYXMgcGQKCmltcG9ydCBtYXRwbG90bGliLnB5cGxvdCBhcyBwbHQKZnJvbSBtYXRwbG90bGliLmZpZ3VyZSBpbXBvcnQgRmlndXJlCmltcG9ydCBzZWFib3JuIGFzIHNucwoKZnJvbSB0eXBpbmcgaW1wb3J0IE9wdGlvbmFsLCBVbmlvbgppbXBvcnQgb3MKaW1wb3J0IGltcG9ydGxpYgpmcm9tIGNsb3VkcGlja2xlIGltcG9ydCBkdW1wCgpmcm9tIG1scnVuLmV4ZWN1dGlvbiBpbXBvcnQgTUxDbGllbnRDdHgKZnJvbSBtbHJ1bi5kYXRhc3RvcmUgaW1wb3J0IERhdGFJdGVtCmZyb20gbWxydW4uYXJ0aWZhY3RzIGltcG9ydCBUYWJsZUFydGlmYWN0LCBQbG90QXJ0aWZhY3QKCmltcG9ydCB3YXJuaW5ncwp3YXJuaW5ncy5zaW1wbGVmaWx0ZXIoYWN0aW9uPSdpZ25vcmUnLCBjYXRlZ29yeT1GdXR1cmVXYXJuaW5nKQoKZGVmIHRyYWluKAogICAgY29udGV4dDogT3B0aW9uYWxbTUxDbGllbnRDdHhdID0gTm9uZSwKICAgIFNLQ2xhc3NpZmllcjogc3RyICA9ICcnLAogICAgY2FsbGJhY2tzICA9IFtdLAogICAgeHRyYWluOiBVbmlvbltEYXRhSXRlbSwgc3RyXSA9ICcnLAogICAgeXRyYWluOiBVbmlvbltEYXRhSXRlbSwgc3RyXSA9ICcnLAogICAgeHZhbGlkOiBVbmlvbltEYXRhSXRlbSwgc3RyXSA9ICcnLAogICAgeXZhbGlkOiBVbmlvbltEYXRhSXRlbSwgc3RyXSA9ICcnLAogICAgdGFyZ2V0X3BhdGg6IHN0ciA9ICcnLAogICAgbmFtZTogc3RyID0gJycsCiAgICBrZXk6IHN0ciA9ICcnLAogICAgdmVyYm9zZTogYm9vbCA9IEZhbHNlLAogICAgcmFuZG9tX3N0YXRlID0gMQopIC0+IE5vbmU6CiAgICAiIiJUcmFpbiBhbmQgc2F2ZSBhbiBTY2lraXRsZWFybiBtb2RlbC4KICAgIAogICAgVGhlIGRhdGEgc291cmNlIGNhbiBlaXRoZXIgYmUgYSBzdHJpbmcgZmlsZSBuYW1lIG9yIGFuIGFydGlmYWN0IGl0ZW0uCiAgICAKICAgIFRoZSBoZWFkZXIgaXMgZWl0aCBhIGxpc3Qgb2YgY29sdW1uIG5hbWVzLCBhbiBhcnRpZmFjdCBoZWFkZXIgaXRlbSwgb3IgTm9uZS4KICAgIAogICAgCiAgICA6cGFyYW0gY29udGV4dDogICAgICAgICB0aGUgZnVuY3Rpb24gY29udGV4dAogICAgOnBhcmFtIFNLQ2xhc3NpZmllcjogICAgc3RyaW5nIG1vZHVsZSBhbmQgY2xhc3NuYW1lIG9mIGNsYXNzaWZpZXIKICAgIDpwYXJhbSBjYWxsYmFja3M6ICAgICAgIHNrbGVhcm4gY2xhc3NpZmllciBmaXQgZnVuY3Rpb24gY2FsbGJhY2tzCiAgICA6cGFyYW0geHRyYWluOiAgICAgICAgICAKICAgIDpwYXJhbSB5dHJhaW46CiAgICA6cGFyYW0geHZhbGlkOgogICAgOnBhcmFtIHl2YWxpZDoKICAgIDpwYXJhbSB0YXJnZXRfcGF0aDogICAgIGZvbGRlciBsb2NhdGlvbiBvZiBmaWxlcwogICAgOnBhcmFtIG5hbWU6ICAgICAgICAgICAgZGVzdGluYXRpb24gbmFtZSBmb3IgbW9kZWwgZmlsZQogICAgOnBhcmFtIGtleTogICAgICAgICAgICAga2V5IGZvciBtb2RlbCBhcnRpZmFjdAogICAgOnBhcmFtIHZlcmJvc2UgOiAgICAgICAgKEZhbHNlKSBzaG93IG1ldHJpY3MgZm9yIHRyYWluaW5nL3ZhbGlkYXRpb24gc3RlcHMuCiAgICA6cGFyYW0gcmFuZG9tX3N0YXRlOiAgICAoMSkgc2tsZWFybiBybmcgc2VlZAogICAgCiAgICBleGFtcGxlIGNhbGxiYWNrczoKICAgIGBgYAogICAgZnJvbSBsaWdodGdibSBpbXBvcnQgcmVjb3JkX2V2YWx1YXRpb24KICAgIGV2YWxfcmVzdWx0cyA9IGRpY3QoKQogICAgY2FsbGJhY2tzID0gW3JlY29yZF9ldmFsdWF0aW9uKGV2YWxfcmVzdWx0cyldCiAgICBgYGAKICAgICIiIgogICAgIyBsb2FkIGRhdGEKICAgIHh0cmFpbiA9IHBkLnJlYWRfcGFycXVldChzdHIoeHRyYWluKSwgZW5naW5lPSdweWFycm93JykKICAgIHl0cmFpbiA9IHBkLnJlYWRfcGFycXVldChzdHIoeXRyYWluKSwgZW5naW5lPSdweWFycm93JykKICAgIHh2YWxpZCA9IHBkLnJlYWRfcGFycXVldChzdHIoeHZhbGlkKSwgZW5naW5lPSdweWFycm93JykKICAgIHl2YWxpZCA9IHBkLnJlYWRfcGFycXVldChzdHIoeXZhbGlkKSwgZW5naW5lPSdweWFycm93JykKCiAgICAjIGNyZWF0ZSBjbGFzc2lmaWVyIGNsYXNzIGZyb20gc3RyaW5nIGFuZCBpbnN0YW50aWF0ZQogICAgc3BsaXRzID0gU0tDbGFzc2lmaWVyLnNwbGl0KCIuIikKICAgIGNsZmNsYXNzID0gZ2V0YXR0cihpbXBvcnRsaWIuaW1wb3J0X21vZHVsZSgiLiIuam9pbihzcGxpdHNbOi0xXSkpLCBzcGxpdHNbLTFdKQogICAgbW9kZWwgPSBjbGZjbGFzcyhyYW5kb21fc3RhdGU9cmFuZG9tX3N0YXRlLCB2ZXJib3NlPWludCh2ZXJib3NlID09IFRydWUpKQoKICAgIG1vZGVsLmZpdCh4dHJhaW4sIAogICAgICAgICAgICAgIHl0cmFpbiwKICAgICAgICAgICAgICBldmFsX3NldD1bKHh2YWxpZCwgeXZhbGlkKSwgKHh0cmFpbiwgeXRyYWluKV0sCiAgICAgICAgICAgICAgZXZhbF9uYW1lcz1bJ3ZhbGlkJywgJ3RyYWluJ10sCiAgICAgICAgICAgICAgY2FsbGJhY2tzPWNhbGxiYWNrcywKICAgICAgICAgICAgICB2ZXJib3NlPXZlcmJvc2UpCiAgICAgCiAgICBjb250ZXh0LmxvZ19yZXN1bHQoInRyYWluX2FjY3VyYWN5IiwgZmxvYXQobW9kZWwuc2NvcmUoeHRyYWluLCB5dHJhaW4pKSkKICAgIAogICAgIyBwbG90IHRyYWluIGFuZCB2YWxpZGF0aW9uIGhpc3RvcnksIHNhdmUgYW5kIGxvZwogICAgbG9zcyA9IG5wLmFzYXJyYXkobW9kZWwuZXZhbHNfcmVzdWx0X1sndHJhaW4nXVsnYmluYXJ5X2xvZ2xvc3MnXSwgZHR5cGU9bnAuZmxvYXQpCiAgICB2YWxfbG9zcyA9IG5wLmFzYXJyYXkobW9kZWwuZXZhbHNfcmVzdWx0X1sndmFsaWQnXVsnYmluYXJ5X2xvZ2xvc3MnXSwgZHR5cGU9bnAuZmxvYXQpCiAgICBwbG90X3ZhbGlkYXRpb24oY29udGV4dCwgbG9zcywgdmFsX2xvc3MsIHRhcmdldF9wYXRoKQogICAgCiAgICAjIHNhdmUgbW9kZWwKICAgIGZpbGVwYXRoID0gb3MucGF0aC5qb2luKHRhcmdldF9wYXRoLCBuYW1lKQogICAgZHVtcChtb2RlbCwgb3BlbihmaWxlcGF0aCwgJ3diJykpCiAgICBjb250ZXh0LmxvZ19hcnRpZmFjdChrZXksIHRhcmdldF9wYXRoPWZpbGVwYXRoKQogICAgICAgIApkZWYgcGxvdF92YWxpZGF0aW9uKAogICAgY29udGV4dDogTUxDbGllbnRDdHgsCiAgICB0cmFpbl9tZXRyaWMsCiAgICB2YWxpZF9tZXRyaWMsCiAgICB0YXJnZXRfcGF0aDogc3RyID0gJycsCiAgICBuYW1lOiBzdHIgPSAiaGlzdG9yeS5wbmciLAogICAga2V5OiBzdHIgPSAndHJhaW5pbmctdmFsaWRhdGlvbi1wbG90JwopOgogICAgIiIiUGxvdCB0cmFpbiBhbmQgdmFsaWRhdGlvbiBsb3NzIGN1cnZlcwoKICAgIFRoZXNlIGN1cnZlcyByZXByZXNlbnQgdGhlIHRyYWluaW5nIHJvdW5kIGxvc3NlcyBmcm9tIHRoZSB0cmFpbmluZwogICAgYW5kIHZhbGlkYXRpb24gc2V0cy4KICAgIAogICAgOnBhcmFtIGNvbnRleHQ6ICAgICAgICAgdGhlIGZ1bmN0aW9uIGNvbnRleHQKICAgIDpwYXJhbSB0cmFpbl9tZXRyaWM6ICAgIHRyYWluIG1ldHJpYwogICAgOnBhcmFtIHZhbGlkX21ldHJpYzogICAgdmFsaWRhdGlvbiBtZXRyaWMKICAgIDpwYXJhbSB0YXJnZXRfcGF0aDogICAgIGRlc3RpbmF0aW4gcGF0aCBmb3IgdHJhaW4vdm9saWRhdGlvbiBoaXN0b3J5IHBsb3QgYXJ0aWZhY3QKICAgICIiIgogICAgIyBnZW5lcmF0ZSBwbG90CiAgICBwbHQucGxvdCh0cmFpbl9tZXRyaWMpCiAgICBwbHQucGxvdCh2YWxpZF9tZXRyaWMpCiAgICBwbHQudGl0bGUoInRyYWluaW5nIHZhbGlkYXRpb24gcmVzdWx0cyIpCiAgICBwbHQueGxhYmVsKCJlcG9jaCIpCiAgICBwbHQueWxhYmVsKCIiKQogICAgcGx0LmxlZ2VuZChbInRyYWluIiwgInZhbGlkIl0pCiAgICBmaWcgPSBwbHQuZ2NmKCkKCiAgICAjIHNhdmUgZmlndXJlIGFuZCBsb2cgYXJ0aWZhY3QKICAgIHBsb3RwYXRoID0gb3MucGF0aC5qb2luKHRhcmdldF9wYXRoLCBuYW1lKQogICAgcGx0LnNhdmVmaWcocGxvdHBhdGgpCiAgICBjb250ZXh0LmxvZ19hcnRpZmFjdChQbG90QXJ0aWZhY3Qoa2V5LCBib2R5PWZpZykpCgogICAgIyBwbG90IGNsZWFudXAKICAgIHBsdC5jbGEoKQogICAgcGx0LmNsZigpCiAgICBwbHQuY2xvc2UoKSAgICAgICAgCg==
    base_image: yjbds/mlrun-ds:latest
    commands: []
    code_origin: https://github.com/yjb-ds/functions.git#25e611e4bd05320d342708ce786522bfecaa0e51:/User/repos/functions/train/sklearn-classifier.py
