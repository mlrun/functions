kind: job
metadata:
  name: question-answering
  tag: ''
  hash: 6b54c186be63dce26d98fa84b81b7db572daf3a1
  project: ''
  labels:
    author: yonish
  categories:
  - machine-learning
spec:
  command: ''
  args: []
  image: mlrun/mlrun
  build:
    functionSourceCode: IyBDb3B5cmlnaHQgMjAxOSBJZ3VhemlvCiMKIyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKIyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiMgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiMKIyAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiMKIyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiMgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKIyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KIyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiMgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiMKaW1wb3J0IHBhdGhsaWIKZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QsIFR1cGxlCgppbXBvcnQgbWxydW4KaW1wb3J0IHBhbmRhcyBhcyBwZAppbXBvcnQgdHJhbnNmb3JtZXJzCmZyb20gdHFkbS5hdXRvIGltcG9ydCB0cWRtCgoKZGVmIF9nZXRfcHJvbXB0X3RlbXBsYXRlKAogICAgdGV4dF93cmFwcGVyOiBzdHIsCiAgICBxdWVzdGlvbnNfd3JhcHBlcjogc3RyLAogICAgcXVlc3Rpb25zOiBMaXN0W3N0cl0sCiAgICBhbnN3ZXJfcHJlYW1ibGU6IHN0ciwKKSAtPiBUdXBsZVtzdHIsIHN0cl06CiAgICAjIFZhbGlkYXRlIGFuZCBidWlsZCB0aGUgdGV4dCB3cmFwcGVyOgogICAgdGV4dF93cmFwcGVyID0gdGV4dF93cmFwcGVyIG9yICgKICAgICAgICAiR2l2ZW4gdGhlIGZvbGxvd2luZyB0ZXh0OlxuIiAiLS0tLS1cbiIgInt9XG4iICItLS0tLSIKICAgICkKICAgIGlmIHRleHRfd3JhcHBlci5jb3VudCgie30iKSAhPSAxOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoCiAgICAgICAgICAgICJUaGUgYHRleHRfd3JhcHBlcmAgbXVzdCBpbmNsdWRlIG9uZSBwbGFjZWhvbGRlciAne30nIGZvciB0aGUgdGV4dC4iCiAgICAgICAgKQoKICAgICMgVmFsaWRhdGUgYW5kIGJ1aWxkIHRoZSBxdWVzdGlvbiB3cmFwcGVyOgogICAgcXVlc3Rpb25zX3dyYXBwZXIgPSBxdWVzdGlvbnNfd3JhcHBlciBvciAiQW5zd2VyIHRoZSBxdWVzdGlvbnM6XG4iICJ7fSIKICAgIGlmIHF1ZXN0aW9uc193cmFwcGVyLmNvdW50KCJ7fSIpICE9IDE6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigKICAgICAgICAgICAgIlRoZSBgcXVlc3Rpb25zX3dyYXBwZXJgIG11c3QgaW5jbHVkZSBvbmUgcGxhY2Vob2xkZXIgJ3t9JyBmb3IgdGhlIHRleHQuIgogICAgICAgICkKCiAgICAjIFZhbGlkYXRlIGFuZCBwYXJzZSB0aGUgcXVlc3Rpb25zOgogICAgaWYgbGVuKHF1ZXN0aW9ucykgPT0gMDoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJQbGVhc2UgaW5jbHVkZSBhdCBsZWFzdCBvbmUgcXVlc3Rpb24uIikKICAgIHF1ZXN0aW9ucyA9ICJcbiIuam9pbigKICAgICAgICBbZiJ7aX0uIHtxdWVzdGlvbn0iIGZvciBpLCBxdWVzdGlvbiBpbiBlbnVtZXJhdGUocXVlc3Rpb25zLCAxKV0KICAgICkKCiAgICAjIFZhbGlkYXRlIGFuZCBidWlsZCB0aGUgYW5zd2VyIHdyYXBwZXI6CiAgICBhbnN3ZXJfcHJlYW1ibGUgPSBhbnN3ZXJfcHJlYW1ibGUgb3IgIkFuc3dlcjoiCiAgICBpZiBhbnN3ZXJfcHJlYW1ibGUuY291bnQoInt9IikgIT0gMDoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJUaGUgYGFuc3dlcl9wcmVhbWJsZWAgbXVzdCBub3QgaGF2ZSBhIHBsYWNlaG9sZGVyICd7fScuIikKCiAgICAjIENvbnN0cnVjdCB0aGUgdGVtcGxhdGU6CiAgICByZXR1cm4gKAogICAgICAgIGYie3RleHRfd3JhcHBlcn1cbiIKICAgICAgICBmIntxdWVzdGlvbnNfd3JhcHBlci5mb3JtYXQocXVlc3Rpb25zKX1cbiIKICAgICAgICAiXG4iCiAgICAgICAgZiJ7YW5zd2VyX3ByZWFtYmxlfVxuIgogICAgICAgICIxLiAiICAjIEFkZGl0aW9uIGZvciBiZXR0ZXIgYW5zd2VycyBpbiBnZW5lcmFsLgogICAgKSwgYW5zd2VyX3ByZWFtYmxlCgoKZGVmIGFuc3dlcl9xdWVzdGlvbnMoCiAgICBjb250ZXh0OiBtbHJ1bi5NTENsaWVudEN0eCwKICAgIHRleHRfZmlsZXNfZGlyZWN0b3J5OiBzdHIsCiAgICBtb2RlbDogc3RyLAogICAgcXVlc3Rpb25zOiBMaXN0W3N0cl0sCiAgICB0b2tlbml6ZXI6IHN0ciA9IE5vbmUsCiAgICBtb2RlbF9rd2FyZ3M6IGRpY3QgPSBOb25lLAogICAgdGV4dF93cmFwcGVyOiBzdHIgPSAiIiwKICAgIHF1ZXN0aW9uc193cmFwcGVyOiBzdHIgPSAiIiwKICAgIGFuc3dlcl9wcmVhbWJsZTogc3RyID0gIiIsCiAgICBnZW5lcmF0aW9uX2NvbmZpZzogZGljdCA9IE5vbmUsCiAgICBxdWVzdGlvbnNfY29sdW1uczogTGlzdFtzdHJdID0gTm9uZSwKICAgIG1vZGVsX2Fuc3dlcmluZ190cnlvdXRzOiBpbnQgPSAyLAopIC0+IFR1cGxlW3BkLkRhdGFGcmFtZSwgZGljdF06CiAgICAiIiIKICAgIEFuc3dlciBxdWVzdGlvbnMgd2l0aCBjb250ZXh0IHRvIHRoZSBnaXZlbiB0ZXh0IGZpbGVzIGJ5IGEgcHJldHJhaW5lZCBMTE0gbW9kZWwuCgogICAgOnBhcmFtIGNvbnRleHQ6ICAgICAgICAgICAgICAgICBNTFJ1biBjb250ZXh0LgogICAgOnBhcmFtIHRleHRfZmlsZXNfZGlyZWN0b3J5OiAgICBBIHBhdGggdG8gYSBkaXJlY3Rvcnkgb2YgdGV4dCBmaWxlcyB0byBhc2sgcXVlc3Rpb25zIGFib3V0LgogICAgOnBhcmFtIG1vZGVsOiAgICAgICAgICAgICAgICAgICBUaGUgcHJlLXRyYWluZWQgbW9kZWwgdG8gdXNlIGZvciBhc2tpbmcgcXVlc3Rpb25zLgogICAgOnBhcmFtIHF1ZXN0aW9uczogICAgICAgICAgICAgICBUaGUgcXVlc3Rpb25zIHRvIGFzay4KICAgIDpwYXJhbSB0b2tlbml6ZXI6ICAgICAgICAgICAgICAgVGhlIHByZS10cmFpbmVkIHRva2VuaXplciB0byB1c2UuIERlZmF1bHRlZCB0byB0aGUgbW9kZWwgZ2l2ZW4uCiAgICA6cGFyYW0gbW9kZWxfa3dhcmdzOiAgICAgICAgICAgIEtleXdvcmQgYXJndW1lbnRzIHRvIHBhc3MgcmVnYXJkaW5nIHRoZSBsb2FkaW5nIG9mIHRoZSBtb2RlbCBpbiBIdWdnaW5nRmFjZSdzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBwaXBlbGluZWAgZnVuY3Rpb24uCiAgICA6cGFyYW0gdGV4dF93cmFwcGVyOiAgICAgICAgICAgIEEgd3JhcHBlciBmb3IgdGhlIHRleHQgcGFydC4gV2lsbCBiZSBhZGRlZCBhdCB0aGUgc3RhcnQgb2YgdGhlIHByb21wdC4gTXVzdCBoYXZlIGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXIgKCd7fScpIGZvciB0aGUgcXVlc3Rpb25zLgogICAgOnBhcmFtIHF1ZXN0aW9uc193cmFwcGVyOiAgICAgICBBIHdyYXBwZXIgZm9yIHRoZSBxdWVzdGlvbnMgcmVjZWl2ZWQuIFdpbGwgYmUgYWRkZWQgYWZ0ZXIgdGhlIHRleHQgcGxhY2Vob2xkZXIgaW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHByb21wdCB0ZW1wbGF0ZS4gTXVzdCBoYXZlIGEgcGxhY2Vob2xkZXIgKCd7fScpIGZvciB0aGUgcXVlc3Rpb25zLgogICAgOnBhcmFtIGFuc3dlcl9wcmVhbWJsZTogICAgICAgICBBIHByZWZpeCBmb3IgdGhlIGFuc3dlciBwYXJ0LiBXaWxsIGJlIGFkZGVkIGF0IHRoZSBlbmQgb2YgdGhlIHByb21wdCB0ZW1wbGF0ZS4KICAgIDpwYXJhbSBnZW5lcmF0aW9uX2NvbmZpZzogICAgICAgSHVnZ2luZ0ZhY2UncyBgR2VuZXJhdGlvbkNvbmZpZ2Aga2V5d29yZCBhcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgYGdlbmVyYXRlYCBtZXRob2QuCiAgICA6cGFyYW0gcXVlc3Rpb25zX2NvbHVtbnM6ICAgICAgIENvbHVtbnMgdG8gdXNlIGZvciB0aGUgZGF0YWZyYW1lIHJldHVybmVkLgogICAgOnBhcmFtIG1vZGVsX2Fuc3dlcmluZ190cnlvdXRzOiBBbW91bnQgb2YgaW5mZXJyaW5nIHRvIGRvIHBlciB0ZXh0IGJlZm9yZSByYWlzaW5nIGFuIGVycm9yIGR1ZSB0byBtaXNzaW5nIG9yIGVtcHR5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuc3dlcnMuCgogICAgOnJldHVybnM6IEEgdHVwbGUgb2Y6CgogICAgICAgICAgICAgICogQSBkYXRhZnJhbWUgZGF0YXNldCBvZiB0aGUgcXVlc3Rpb25zIGFuc3dlcnMuCiAgICAgICAgICAgICAgKiBBIGRpY3Rpb25hcnkgb2YgZXJyb3JlZCBmaWxlcyB0aGF0IHdlcmUgbm90IGluZmVycmVkIG9yIHdlcmUgbm90IGFuc3dlcmVkIHByb3Blcmx5LgogICAgIiIiCiAgICAjIEdldCB0aGUgcHJvbXB0IHRlbXBsYXRlOgogICAgY29udGV4dC5sb2dnZXIuaW5mbygiQ3JlYXRpbmcgcHJvbXB0IHRlbXBsYXRlIikKICAgIHByb21wdF90ZW1wbGF0ZSwgYW5zd2VyX3ByZWFtYmxlID0gX2dldF9wcm9tcHRfdGVtcGxhdGUoCiAgICAgICAgdGV4dF93cmFwcGVyPXRleHRfd3JhcHBlciwKICAgICAgICBxdWVzdGlvbnNfd3JhcHBlcj1xdWVzdGlvbnNfd3JhcHBlciwKICAgICAgICBxdWVzdGlvbnM9cXVlc3Rpb25zLAogICAgICAgIGFuc3dlcl9wcmVhbWJsZT1hbnN3ZXJfcHJlYW1ibGUsCiAgICApCiAgICBjb250ZXh0LmxvZ2dlci5pbmZvKGYiUHJvbXB0IHRlbXBsYXRlIGNyZWF0ZWQ6XG5cbntwcm9tcHRfdGVtcGxhdGV9XG4iKQoKICAgICMgR2V0IHRoZSBxdWVzdGlvbnMgY29sdW1uczoKICAgIHF1ZXN0aW9uc19jb2x1bW5zID0gcXVlc3Rpb25zX2NvbHVtbnMgb3IgWwogICAgICAgIGYicXtpfSIgZm9yIGkgaW4gcmFuZ2UoMSwgbGVuKHF1ZXN0aW9ucykgKyAxKQogICAgXQogICAgaWYgbGVuKHF1ZXN0aW9uc19jb2x1bW5zKSAhPSBsZW4ocXVlc3Rpb25zKToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKAogICAgICAgICAgICBmIlRoZSBwcm92aWRlZCBxdWVzdGlvbnMgY29sdW1ucyBsZW5ndGggKHtsZW4ocXVlc3Rpb25zX2NvbHVtbnMpfSkgIgogICAgICAgICAgICBmImRvZXMgbm90IG1hdGNoIHRoZSBxdWVzdGlvbnMgYW1vdW50ICh7bGVuKHF1ZXN0aW9ucyl9KSIKICAgICAgICApCgogICAgIyBQcmVwYXJlIHRoZSBkYXRhZnJhbWUgYW5kIGVycm9ycyB0byBiZSByZXR1cm5lZDoKICAgIGRmID0gcGQuRGF0YUZyYW1lKGNvbHVtbnM9WyJ0ZXh0X2ZpbGUiLCAqcXVlc3Rpb25zX2NvbHVtbnNdKQogICAgZXJyb3JzID0ge30KCiAgICAjIExvYWQgdGhlIHRva2VuaXplcjoKICAgIHRva2VuaXplciA9IHRva2VuaXplciBvciBtb2RlbAogICAgY29udGV4dC5sb2dnZXIuaW5mbyhmIkxvYWRpbmcgdG9rZW5pemVyOiB7dG9rZW5pemVyfSIpCiAgICB0b2tlbml6ZXIgPSB0cmFuc2Zvcm1lcnMuQXV0b1Rva2VuaXplci5mcm9tX3ByZXRyYWluZWQodG9rZW5pemVyKQogICAgY29udGV4dC5sb2dnZXIuaW5mbygiVG9rZW5pemVyIGxvYWRlZCIpCgogICAgIyBMb2FkIHRoZSBnZW5lcmF0aW9uIGNvbmZpZzoKICAgIGNvbnRleHQubG9nZ2VyLmluZm8oIkxvYWRpbmcgZ2VuZXJhdGlvbiBjb25maWd1cmF0aW9uIikKICAgIGdlbmVyYXRpb25fY29uZmlnID0gdHJhbnNmb3JtZXJzLkdlbmVyYXRpb25Db25maWcoKiooZ2VuZXJhdGlvbl9jb25maWcgb3Ige30pKQogICAgY29udGV4dC5sb2dnZXIuaW5mbygiR2VuZXJhdGlvbiBjb25maWd1cmF0aW9uIGxvYWRlZC4iKQoKICAgICMgTG9hZCB0aGUgbW9kZWwgYW5kIHRva2VuaXplciBpbnRvIGEgcGlwZWxpbmUgb2JqZWN0OgogICAgY29udGV4dC5sb2dnZXIuaW5mbyhmIkxvYWRpbmcgbW9kZWwgJ3ttb2RlbH0nIGFuZCB0b2tlbml6ZXIgaW50byBhIHBpcGVsaW5lIikKICAgIHBpcGVsaW5lID0gdHJhbnNmb3JtZXJzLnBpcGVsaW5lKAogICAgICAgIHRhc2s9InRleHQtZ2VuZXJhdGlvbiIsCiAgICAgICAgbW9kZWw9bW9kZWwsCiAgICAgICAgdG9rZW5pemVyPXRva2VuaXplciwKICAgICAgICB0cnVzdF9yZW1vdGVfY29kZT1UcnVlLAogICAgICAgIG1vZGVsX2t3YXJncz1tb2RlbF9rd2FyZ3MsCiAgICApCiAgICBjb250ZXh0LmxvZ2dlci5pbmZvKCJNb2RlbCBsb2FkZWQsIHBpcGVsaW5lIGNyZWF0ZWQiKQoKICAgICMgR28gb3ZlciB0aGUgYXVkaW8gZmlsZXMgYW5kIGluZmVyIHRocm91Z2ggdGhlIG1vZGVsOgogICAgdGV4dF9maWxlc19kaXJlY3RvcnkgPSBwYXRobGliLlBhdGgodGV4dF9maWxlc19kaXJlY3RvcnkpLmFic29sdXRlKCkKICAgIGZvciBpLCB0ZXh0X2ZpbGUgaW4gZW51bWVyYXRlKAogICAgICAgIHRxZG0oCiAgICAgICAgICAgIGxpc3QodGV4dF9maWxlc19kaXJlY3Rvcnkucmdsb2IoIiouKiIpKSwKICAgICAgICAgICAgZGVzYz0iR2VuZXJhdGluZyBhbnN3ZXJzIiwKICAgICAgICAgICAgdW5pdD0iZmlsZSIsCiAgICAgICAgKQogICAgKToKICAgICAgICB0cnk6CiAgICAgICAgICAgICMgUmVhZCB0aGUgdGV4dDoKICAgICAgICAgICAgd2l0aCBvcGVuKHRleHRfZmlsZSwgInIiKSBhcyBmcDoKICAgICAgICAgICAgICAgIHRleHQgPSBmcC5yZWFkKCkKICAgICAgICAgICAgIyBGb3IgZWFjaCB0ZXh0LCB0cnkgbXVsdGlwbGUgdGltZXMgYXMgdGhlIGxsbSBtaWdodCBleHBlcmllbmNlIHplcm8gYW5zd2VyczoKICAgICAgICAgICAgdHJ5b3V0ID0gMAogICAgICAgICAgICBmb3IgdHJ5b3V0IGluIHJhbmdlKG1vZGVsX2Fuc3dlcmluZ190cnlvdXRzKToKICAgICAgICAgICAgICAgICMgSW5mZXIgdGhyb3VnaCB0aGUgbGxtOgogICAgICAgICAgICAgICAgc2VxdWVuY2VzID0gcGlwZWxpbmUoCiAgICAgICAgICAgICAgICAgICAgcHJvbXB0X3RlbXBsYXRlLmZvcm1hdCh0ZXh0KSwKICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uX2NvbmZpZz1nZW5lcmF0aW9uX2NvbmZpZywKICAgICAgICAgICAgICAgICAgICBudW1fcmV0dXJuX3NlcXVlbmNlcz0xLAogICAgICAgICAgICAgICAgICAgIGVvc190b2tlbl9pZD10b2tlbml6ZXIuZW9zX3Rva2VuX2lkLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgIyBWYWxpZGF0ZSB0aGUgYW5zd2VyczoKICAgICAgICAgICAgICAgIGFuc3dlcnMgPSBzZXF1ZW5jZXNbMF1bImdlbmVyYXRlZF90ZXh0Il0uc3BsaXQoCiAgICAgICAgICAgICAgICAgICAgZiJ7YW5zd2VyX3ByZWFtYmxlfVxuIiwgMQogICAgICAgICAgICAgICAgKVsxXQogICAgICAgICAgICAgICAgYW5zd2VycyA9IGFuc3dlcnMuc3BsaXQoIlxuIikKICAgICAgICAgICAgICAgIGlmIGxlbihhbnN3ZXJzKSAhPSBsZW4ocXVlc3Rpb25zKToKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgYW5zd2VycyA9IFsKICAgICAgICAgICAgICAgICAgICBhbnN3ZXJbMzpdIGZvciBhbnN3ZXIgaW4gYW5zd2VycwogICAgICAgICAgICAgICAgXSAgIyBXaXRob3V0IHRoZSBxdWVzdGlvbnMgaW5kZXggcHJlZml4ICdpLiAnCiAgICAgICAgICAgICAgICBpZiBhbGwobGVuKGFuc3dlcikgPT0gMCBmb3IgYW5zd2VyIGluIGFuc3dlcnMpOgogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAjIE5vdGUgaW4gdGhlIGRhdGFmcmFtZToKICAgICAgICAgICAgICAgIGRmLmxvY1tpIC0gbGVuKGVycm9ycyldID0gWwogICAgICAgICAgICAgICAgICAgIHN0cih0ZXh0X2ZpbGUucmVsYXRpdmVfdG8odGV4dF9maWxlc19kaXJlY3RvcnkpKSwKICAgICAgICAgICAgICAgICAgICAqYW5zd2VycywKICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGlmIHRyeW91dCA9PSBtb2RlbF9hbnN3ZXJpbmdfdHJ5b3V0czoKICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICBmIlRoZSBMTE0gZGlkIG5vdCBhbnN3ZXIgY29ycmVjdGx5IC0gb25lIG9yIG1vcmUgYW5zd2VycyBhcmUgbWlzc2luZzoge2Fuc3dlcnN9IgogICAgICAgICAgICAgICAgKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXhjZXB0aW9uOgogICAgICAgICAgICAjIENvbGxlY3QgdGhlIGV4Y2VwdGlvbjoKICAgICAgICAgICAgY29udGV4dC5sb2dnZXIuZXJyb3IoZiJFcnJvciBpbiBmaWxlOiAne3RleHRfZmlsZX0nIikKICAgICAgICAgICAgZXJyb3JzW3N0cih0ZXh0X2ZpbGUpXSA9IHN0cihleGNlcHRpb24pCgogICAgcmV0dXJuIGRmLCBlcnJvcnMK
    commands: []
    code_origin: https://github.com/yonishelach/functions.git#5ef41eefc2d0f8a4393d80cf99fea4ab07511f80:/Users/Yonatan_Shelach/projects/functions/question_answering/question_answering.py
    origin_filename: /Users/Yonatan_Shelach/projects/functions/question_answering/question_answering.py
    requirements: []
  entry_points:
    answer_questions:
      name: answer_questions
      doc: Answer questions with context to the given text files by a pretrained LLM
        model.
      parameters:
      - name: context
        type: MLClientCtx
        doc: MLRun context.
        default: ''
      - name: text_files_directory
        type: str
        doc: A path to a directory of text files to ask questions about.
        default: ''
      - name: model
        type: str
        doc: The pre-trained model to use for asking questions.
        default: ''
      - name: questions
        type: List[str]
        doc: The questions to ask.
        default: ''
      - name: tokenizer
        type: str
        doc: The pre-trained tokenizer to use. Defaulted to the model given.
        default: null
      - name: model_kwargs
        type: dict
        doc: Keyword arguments to pass regarding the loading of the model in HuggingFace's
          `pipeline` function.
        default: null
      - name: text_wrapper
        type: str
        doc: A wrapper for the text part. Will be added at the start of the prompt.
          Must have a placeholder ('{}') for the questions.
        default: ''
      - name: questions_wrapper
        type: str
        doc: A wrapper for the questions received. Will be added after the text placeholder
          in the prompt template. Must have a placeholder ('{}') for the questions.
        default: ''
      - name: answer_preamble
        type: str
        doc: A prefix for the answer part. Will be added at the end of the prompt
          template.
        default: ''
      - name: generation_config
        type: dict
        doc: HuggingFace's `GenerationConfig` keyword arguments to pass to the `generate`
          method.
        default: null
      - name: questions_columns
        type: List[str]
        doc: Columns to use for the dataframe returned.
        default: null
      - name: model_answering_tryouts
        type: int
        doc: Amount of inferring to do per text before raising an error due to missing
          or empty answers.
        default: 2
      outputs:
      - default: ''
        doc: 'A tuple of:'
      lineno: 68
  description: GenAI approach of question answering on a given data
  default_handler: answer_questions
  disable_auto_mount: false
  clone_target_dir: ''
  env: []
  priority_class_name: ''
  preemption_mode: prevent
  affinity: null
  tolerations: null
  security_context: {}
verbose: false
