kind: job
metadata:
  name: open-archive
  tag: ''
  hash: 713ef467af73fbe449840b87c06f7e55d1d1324a
  project: ''
  labels:
    author: yjb
    stage: development
  categories:
  - fileutils
  - datagen
spec:
  command: ''
  args: []
  image: mlrun/ml-models:0.4.5
  env: []
  default_handler: open_archive
  description: ''
  build:
    functionSourceCode: IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlciBvbiAyMDIwLTAzLTE3IDE1OjQzCgppbXBvcnQgb3MKaW1wb3J0IHppcGZpbGUKaW1wb3J0IHVybGxpYi5yZXF1ZXN0CmltcG9ydCB0YXJmaWxlCmltcG9ydCBqc29uCgpmcm9tIG1scnVuLmV4ZWN1dGlvbiBpbXBvcnQgTUxDbGllbnRDdHgKZnJvbSBtbHJ1bi5kYXRhc3RvcmUgaW1wb3J0IERhdGFJdGVtCgpmcm9tIHR5cGluZyBpbXBvcnQgVW5pb24KCmRlZiBvcGVuX2FyY2hpdmUoCiAgICBjb250ZXh0OiBNTENsaWVudEN0eCwgCiAgICBhcmNoaXZlX3VybDogVW5pb25bRGF0YUl0ZW0sIHN0cl0gPSAnJywKICAgIGtleTogc3RyID0gJ2ltYWdlcycKKToKICAgICIiIk9wZW4gYSBmaWxlL29iamVjdCBhcmNoaXZlIGludG8gYSB0YXJnZXQgZGlyZWN0b3J5CiAgICAKICAgIEN1cnJlbnRseSBzdXBwb3J0cyB6aXAgYW5kIHRhci5negogICAgCiAgICA6cGFyYW0gY29udGV4dDogICAgICBmdW5jdGlvbiBleGVjdXRpb24gY29udGV4dAogICAgOnBhcmFtIGFyY2hpdmVfdXJsOiAgdXJsIG9mIGFyY2hpdmUgZmlsZQogICAgOnBhcmFtIGtleTogICAgICAgICAga2V5IG9mIGFyY2hpdmUgY29udGVudHMgaW4gYXJ0aWZhY3Qgc3RvcmUKICAgICIiIgogICAgdGFyZ2V0X2RpciA9IGNvbnRleHQuYXJ0aWZhY3RfcGF0aAogICAgCiAgICBvcy5tYWtlZGlycyh0YXJnZXRfZGlyLCBleGlzdF9vaz1UcnVlKQogICAgY29udGV4dC5sb2dnZXIuaW5mbygnVmVyaWZpZWQgZGlyZWN0b3JpZXMnKQogICAgCiAgICBzcGxpdHMgPSBzdHIoYXJjaGl2ZV91cmwpLnNwbGl0KCcuJykKICAgIGlmICgnLicuam9pbihzcGxpdHNbLTI6XSkgPT0gJ3Rhci5neicpOgogICAgICAgIGNvbnRleHQubG9nZ2VyLmluZm8oJ29wZW5pbmcgdGFyX2d6JykKICAgICAgICBmdHBzdHJlYW0gPSB1cmxsaWIucmVxdWVzdC51cmxvcGVuKGFyY2hpdmVfdXJsKQogICAgICAgIHdpdGggdGFyZmlsZS5vcGVuKGZpbGVvYmo9ZnRwc3RyZWFtLCBtb2RlPSJyfGd6IikgYXMgcmVmOgogICAgICAgICAgICByZWYuZXh0cmFjdGFsbCh0YXJnZXRfZGlyKQogICAgZWxpZiBzcGxpdHNbLTFdID09ICd6aXAnOgogICAgICAgIGNvbnRleHQubG9nZ2VyLmluZm8oJ29wZW5pbmcgemlwJykKICAgICAgICB3aXRoIHppcGZpbGUuWmlwRmlsZShhcmNoaXZlX3VybCwgJ3InKSBhcyByZWY6CiAgICAgICAgICAgIHJlZi5leHRyYWN0YWxsKHRhcmdldF9kaXIpCiAgICAKICAgIGNvbnRleHQubG9nX2FydGlmYWN0KGtleSwgbG9jYWxfcGF0aD10YXJnZXRfZGlyKQoK
    commands: []
    code_origin: https://github.com/mlrun/functions.git#b0ba922e10fa0af2fcf2e04cce51eb7d9243bf25:open_archive/open_archive.ipynb
