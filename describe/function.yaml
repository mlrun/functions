kind: job
metadata:
  name: describe
  tag: ''
  hash: f692a29296ea1b8fa6743f18b27037efee0964d3
  project: ''
  labels:
    author: Davids
  categories:
  - data-analysis
spec:
  command: ''
  args: []
  image: mlrun/mlrun
  build:
    functionSourceCode: IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IHdhcm5pbmdzCmZyb20gdHlwaW5nIGltcG9ydCBVbmlvbgoKd2FybmluZ3Muc2ltcGxlZmlsdGVyKGFjdGlvbj0iaWdub3JlIiwgY2F0ZWdvcnk9RnV0dXJlV2FybmluZykKCmltcG9ydCBtbHJ1bi5mZWF0dXJlX3N0b3JlIGFzIGZzdG9yZQppbXBvcnQgcGFuZGFzIGFzIHBkCmltcG9ydCBwbG90bHkuZXhwcmVzcyBhcyBweAppbXBvcnQgcGxvdGx5LmZpZ3VyZV9mYWN0b3J5IGFzIGZmCmltcG9ydCBwbG90bHkuZ3JhcGhfb2JqZWN0cyBhcyBnbwpmcm9tIG1scnVuLmFydGlmYWN0cyBpbXBvcnQgKAogICAgRGF0YXNldEFydGlmYWN0LAogICAgUGxvdGx5QXJ0aWZhY3QsCiAgICBUYWJsZUFydGlmYWN0LAogICAgdXBkYXRlX2RhdGFzZXRfbWV0YSwKKQpmcm9tIG1scnVuLmRhdGFzdG9yZSBpbXBvcnQgRGF0YUl0ZW0KZnJvbSBtbHJ1bi5leGVjdXRpb24gaW1wb3J0IE1MQ2xpZW50Q3R4CmZyb20gbWxydW4uZmVhdHVyZV9zdG9yZSBpbXBvcnQgRmVhdHVyZVNldCwgRmVhdHVyZVZlY3Rvcgpmcm9tIHBsb3RseS5zdWJwbG90cyBpbXBvcnQgbWFrZV9zdWJwbG90cwoKcGQuc2V0X29wdGlvbigiZGlzcGxheS5mbG9hdF9mb3JtYXQiLCBsYW1iZGEgeDogIiUuMmYiICUgeCkKTUFYX1NJWkVfT0ZfREYgPSA1MDAwICogMTAKCgpkZWYgYW5hbHl6ZSgKICAgIGNvbnRleHQ6IE1MQ2xpZW50Q3R4LAogICAgbmFtZTogc3RyID0gImRhdGFzZXQiLAogICAgdGFibGU6IFVuaW9uW0ZlYXR1cmVTZXQsIERhdGFJdGVtXSA9IE5vbmUsCiAgICBsYWJlbF9jb2x1bW46IHN0ciA9IE5vbmUsCiAgICBwbG90c19kZXN0OiBzdHIgPSAicGxvdHMiLAogICAgZnJhYzogZmxvYXQgPSAwLjEwLAopIC0+IE5vbmU6CiAgICAiIiIKICAgIFRoZSBmdW5jdGlvbiB3aWxsIG91dHB1dCB0aGUgZm9sbG93aW5nIGFydGlmYWN0cyBwZXIKICAgIGNvbHVtbiB3aXRoaW4gdGhlIGRhdGEgZnJhbWUgKGJhc2VkIG9uIGRhdGEgdHlwZXMpOgoKICAgIGhpc3RvZ3JhbSBtYXRyaXggY2hhcnQKICAgIGhpc3RvZ3JhbSBwZXIgZmVhdHVyZSBjaGFydAogICAgdmlvbGluIGNoYXJ0CiAgICBjb3JyZWxhdGlvbi1tYXRyaXggY2hhcnQKICAgIGNvcnJlbGF0aW9uLW1hdHJpeCBjc3YKICAgIGltYmFsYW5jZSBwaWUgY2hhcnQKICAgIGltYmFsYW5jZS13ZWlnaHRzLXZlYyBjc3YKCiAgICA6cGFyYW0gY29udGV4dDogICAgICAgICAgICAgICAgIHRoZSBmdW5jdGlvbiBjb250ZXh0CiAgICA6cGFyYW0gbmFtZTogICAgICAgICAgICAgICAgICAgIGtleSBvZiBkYXRhc2V0IHRvIGRhdGFiYXNlICgiZGF0YXNldCIgZm9yIGRlZmF1bHQpCiAgICA6cGFyYW0gdGFibGU6ICAgICAgICAgICAgICAgICAgIE1MUnVuIGlucHV0IHBvaW50aW5nIHRvIHBhbmRhcyBkYXRhZnJhbWUgKGNzdi9wYXJxdWV0IGZpbGUgcGF0aCkgb3IgRmVhdHVyZVNldCBhcyBwYXJhbQogICAgOnBhcmFtIGxhYmVsX2NvbHVtbjogICAgICAgICAgICBncm91bmQgdHJ1dGggY29sdW1uIGxhYmVsCiAgICA6cGFyYW0gcGxvdHNfZGVzdDogICAgICAgICAgICAgIGRlc3RpbmF0aW9uIGZvbGRlciBvZiBzdW1tYXJ5IHBsb3RzIChyZWxhdGl2ZSB0byBhcnRpZmFjdF9wYXRoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoInBsb3RzIiBmb3IgZGVmYXVsdCkKICAgIDpwYXJhbSBmcmFjOiAgICAgICAgICAgICAgICAgICAgd2hlbiB0aGUgdGFibGUgaGFzIG1vcmUgdGhhbiA1MDAwIHNhbXBsZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBmdW5jdGlvbiB3aWxsIGV4ZWN1dGUgb24gcmFuZG9tIGZyYWMgZnJvbSB0aGUgZGF0YSAoMC4xIGRlZmF1bHQpCiAgICAiIiIKICAgIGRhdGFfaXRlbSwgZmVhdHVyZXNldCwgY3JlYXQsIHVwZGF0ZSA9IEZhbHNlLCBGYWxzZSwgRmFsc2UsIEZhbHNlCiAgICBpZiB0eXBlKHRhYmxlKSA9PSBEYXRhSXRlbToKICAgICAgICBpZiB0YWJsZS5tZXRhIGlzIE5vbmU6CiAgICAgICAgICAgIGRhdGFfaXRlbSwgY3JlYXQsIHVwZGF0ZSA9IFRydWUsIFRydWUsIEZhbHNlCiAgICAgICAgZWxpZiB0YWJsZS5tZXRhLmtpbmQgPT0gImRhdGFzZXQiOgogICAgICAgICAgICBkYXRhX2l0ZW0sIGNyZWF0LCB1cGRhdGUgPSBUcnVlLCBGYWxzZSwgVHJ1ZQogICAgICAgIGVsaWYgdGFibGUubWV0YS5raW5kID09ICJGZWF0dXJlVmVjdG9yIjoKICAgICAgICAgICAgZGF0YV9pdGVtLCBjcmVhdCwgdXBkYXRlID0gVHJ1ZSwgRmFsc2UsIEZhbHNlCiAgICAgICAgZWxpZiB0YWJsZS5tZXRhLmtpbmQgPT0gIkZlYXR1cmVTZXQiOgogICAgICAgICAgICBmZWF0dXJlc2V0LCBjcmVhdCwgdXBkYXRlID0gVHJ1ZSwgRmFsc2UsIEZhbHNlCgogICAgaWYgZGF0YV9pdGVtOgogICAgICAgIGRmID0gdGFibGUuYXNfZGYoKQogICAgZWxpZiBmZWF0dXJlc2V0OgogICAgICAgIHByb2plY3RfbmFtZSwgc2V0X25hbWUgPSB0YWJsZS5fcGF0aC5zcGxpdCgiLyIpWzJdLCB0YWJsZS5fcGF0aC5zcGxpdCgiLyIpWzRdCiAgICAgICAgZmVhdHVyZV9zZXQgPSBmc3RvcmUuZ2V0X2ZlYXR1cmVfc2V0KAogICAgICAgICAgICBmInN0b3JlOi8vZmVhdHVyZS1zZXRzL3twcm9qZWN0X25hbWV9L3tzZXRfbmFtZX0iCiAgICAgICAgKQogICAgICAgIGRmID0gZmVhdHVyZV9zZXQudG9fZGF0YWZyYW1lKCkKICAgIGVsc2U6CiAgICAgICAgY29udGV4dC5sb2dnZXIuZXJyb3IoZiJXcm9uZyB0YWJsZSB0eXBlLiIpCiAgICAgICAgcmV0dXJuCgogICAgaWYgZGYuc2l6ZSA+IE1BWF9TSVpFX09GX0RGOgogICAgICAgIGRmID0gZGYuc2FtcGxlKGZyYWM9ZnJhYykKICAgIGV4dHJhX2RhdGEgPSB7fQoKICAgIGlmIGxhYmVsX2NvbHVtbiBub3QgaW4gZGYuY29sdW1uczoKICAgICAgICBsYWJlbF9jb2x1bW4gPSBOb25lCgogICAgZXh0cmFfZGF0YVsiZGVzY3JpYmUgY3N2Il0gPSBjb250ZXh0LmxvZ19hcnRpZmFjdCgKICAgICAgICBUYWJsZUFydGlmYWN0KCJkZXNjcmliZS1jc3YiLCBkZj1kZi5kZXNjcmliZSgpKSwKICAgICAgICBsb2NhbF9wYXRoPWYie3Bsb3RzX2Rlc3R9L2Rlc2NyaWJlLmNzdiIsCiAgICApCgogICAgdHJ5OgogICAgICAgIF9jcmVhdGVfaGlzdG9ncmFtX21hdF9hcnRpZmFjdCgKICAgICAgICAgICAgY29udGV4dCwgZGYsIGV4dHJhX2RhdGEsIGxhYmVsX2NvbHVtbiwgcGxvdHNfZGVzdAogICAgICAgICkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBjb250ZXh0LmxvZ2dlci53YXJuKGYiRmFpbGVkIHRvIGNyZWF0ZSBoaXN0b2dyYW0gbWF0cml4IGFydGlmYWN0IGR1ZSB0bzoge2V9IikKICAgIHRyeToKICAgICAgICBfY3JlYXRlX2ZlYXR1cmVzX2hpc3RvZ3JhbV9hcnRpZmFjdHMoCiAgICAgICAgICAgIGNvbnRleHQsIGRmLCBleHRyYV9kYXRhLCBsYWJlbF9jb2x1bW4sIHBsb3RzX2Rlc3QKICAgICAgICApCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgY29udGV4dC5sb2dnZXIud2FybihmIkZhaWxlZCB0byBjcmVhdGUgcGFpcnBsb3QgaGlzdG9ncmFtcyBkdWUgdG86IHtlfSIpCiAgICB0cnk6CiAgICAgICAgX2NyZWF0ZV92aW9saW5fYXJ0aWZhY3QoY29udGV4dCwgZGYsIGV4dHJhX2RhdGEsIHBsb3RzX2Rlc3QpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgY29udGV4dC5sb2dnZXIud2FybihmIkZhaWxlZCB0byBjcmVhdGUgdmlvbGluIGRpc3RyaWJ1dGlvbiBwbG90cyBkdWUgdG86IHtlfSIpCiAgICB0cnk6CiAgICAgICAgX2NyZWF0ZV9pbWJhbGFuY2VfYXJ0aWZhY3QoY29udGV4dCwgZGYsIGV4dHJhX2RhdGEsIGxhYmVsX2NvbHVtbiwgcGxvdHNfZGVzdCkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBjb250ZXh0LmxvZ2dlci53YXJuKGYiRmFpbGVkIHRvIGNyZWF0ZSBjbGFzcyBpbWJhbGFuY2UgcGxvdCBkdWUgdG86IHtlfSIpCiAgICB0cnk6CiAgICAgICAgX2NyZWF0ZV9jb3JyX2FydGlmYWN0KGNvbnRleHQsIGRmLCBleHRyYV9kYXRhLCBsYWJlbF9jb2x1bW4sIHBsb3RzX2Rlc3QpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgY29udGV4dC5sb2dnZXIud2FybihmIkZhaWxlZCB0byBjcmVhdGUgZmVhdHVyZXMgY29ycmVsYXRpb24gcGxvdCBkdWUgdG86IHtlfSIpCgogICAgaWYgbm90IGRhdGFfaXRlbToKICAgICAgICByZXR1cm4KCiAgICBhcnRpZmFjdCA9IHRhYmxlLmFydGlmYWN0X3VybAogICAgaWYgY3JlYXQ6ICAjIGRhdGFzZXQgbm90IHN0b3JlZAogICAgICAgIGFydGlmYWN0ID0gRGF0YXNldEFydGlmYWN0KAogICAgICAgICAgICBrZXk9ImRhdGFzZXQiLCBzdGF0cz1UcnVlLCBkZj1kZiwgZXh0cmFfZGF0YT1leHRyYV9kYXRhCiAgICAgICAgKQogICAgICAgIGFydGlmYWN0ID0gY29udGV4dC5sb2dfYXJ0aWZhY3QoYXJ0aWZhY3QsIGRiX2tleT1uYW1lKQogICAgICAgIGNvbnRleHQubG9nZ2VyLmluZm8oZiJUaGUgZGF0YSBzZXQgaXMgbG9nZ2VkIHRvIHRoZSBwcm9qZWN0IHVuZGVyIHtuYW1lfSBuYW1lIikKCiAgICBpZiB1cGRhdGU6CiAgICAgICAgdXBkYXRlX2RhdGFzZXRfbWV0YShhcnRpZmFjdCwgZXh0cmFfZGF0YT1leHRyYV9kYXRhKQogICAgICAgIGNvbnRleHQubG9nZ2VyLmluZm8oZiJUaGUgZGF0YSBzZXQgbmFtZWQge25hbWV9IGlzIHVwZGF0ZWQiKQoKICAgICMgVE9ETyA6IFBsb3RzIGFjY29yZGluZyB0byBjbGllbnQgd2lzaGVzIC0gbGlrZSBwcmVmb3JtIGhpc3RvZ3JhbSBvbiBzZWxlY3RlZCBmZWF0dXJlcy4KICAgICMgVE9ETyA6IDMtRCBwbG90IG9uIG9uIHNlbGVjdGVkIGZlYXR1cmVzLgogICAgIyBUT0RPIDogUmVpbnRlZ3JhdGlvbiBwbG90IG9uIG9uIHNlbGVjdGVkIGZlYXR1cmVzLgogICAgIyBUT0RPIDogUENBIHBsb3QgKHdpdGggb3B0aW9ucykKCgpkZWYgX2NyZWF0ZV9oaXN0b2dyYW1fbWF0X2FydGlmYWN0KAogICAgY29udGV4dDogTUxDbGllbnRDdHgsCiAgICBkZjogcGQuRGF0YUZyYW1lLAogICAgZXh0cmFfZGF0YTogZGljdCwKICAgIGxhYmVsX2NvbHVtbjogc3RyLAogICAgcGxvdHNfZGVzdDogc3RyLAopOgogICAgIiIiCiAgICBDcmVhdGUgYW5kIGxvZyBhIGhpc3RvZ3JhbSBtYXRyaXggYXJ0aWZhY3QKICAgICIiIgoKICAgIGZpZyA9IGZmLmNyZWF0ZV9zY2F0dGVycGxvdG1hdHJpeChkZiwgZGlhZz0iaGlzdG9ncmFtIiwgd2lkdGg9MjUwMCwgaGVpZ2h0PTI1MDApCiAgICBpZiBsYWJlbF9jb2x1bW4gaXMgbm90IE5vbmU6CiAgICAgICAgZGZfbmV3ID0gZGYuY29weSgpCiAgICAgICAgZGZfbmV3W2xhYmVsX2NvbHVtbl0gPSBkZl9uZXdbbGFiZWxfY29sdW1uXS5hcHBseShzdHIpCiAgICAgICAgZmlnID0gZmYuY3JlYXRlX3NjYXR0ZXJwbG90bWF0cml4KAogICAgICAgICAgICBkZl9uZXcsIGRpYWc9Imhpc3RvZ3JhbSIsIGluZGV4PWxhYmVsX2NvbHVtbiwgd2lkdGg9MjUwMCwgaGVpZ2h0PTI1MDAKICAgICAgICApCiAgICBmaWcudXBkYXRlX2xheW91dCh0aXRsZV90ZXh0PSI8aT48Yj5IaXN0b2dyYW1zIG1hdHJpeDwvYj48L2k+IikKICAgIGV4dHJhX2RhdGFbImhpc3RvZ3JhbS1tYXRyaXgiXSA9IGNvbnRleHQubG9nX2FydGlmYWN0KAogICAgICAgIFBsb3RseUFydGlmYWN0KGtleT0iaGlzdG9ncmFtcyBtYXRyaXgiLCBmaWd1cmU9ZmlnKSwKICAgICAgICBsb2NhbF9wYXRoPWYie3Bsb3RzX2Rlc3R9L2hpc3RfbWF0Lmh0bWwiLAogICAgKQoKCmRlZiBfY3JlYXRlX2ZlYXR1cmVzX2hpc3RvZ3JhbV9hcnRpZmFjdHMoCiAgICBjb250ZXh0OiBNTENsaWVudEN0eCwKICAgIGRmOiBwZC5EYXRhRnJhbWUsCiAgICBleHRyYV9kYXRhOiBkaWN0LAogICAgbGFiZWxfY29sdW1uOiBzdHIsCiAgICBwbG90c19kZXN0OiBzdHIsCik6CiAgICAiIiIKICAgIENyZWF0ZSBhbmQgbG9nIGEgaGlzdG9ncmFtIGFydGlmYWN0IGZvciBlYWNoIGZlYXR1cmUKICAgICIiIgoKICAgIGZpZ3MgPSBkaWN0KCkKICAgIGZvciAoY29sdW1uTmFtZSwgXykgaW4gZGYuaXRlcml0ZW1zKCk6CiAgICAgICAgaWYgY29sdW1uTmFtZSA9PSBsYWJlbF9jb2x1bW46CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgc3ViX2ZpZyA9IGdvLkhpc3RvZ3JhbSh4PWRmW2NvbHVtbk5hbWVdKQogICAgICAgIGZpZ3NbY29sdW1uTmFtZV0gPSBzdWJfZmlnCgogICAgZmlnID0gZ28uRmlndXJlKCkKICAgIGZvciBrIGluIGZpZ3Mua2V5cygpOgogICAgICAgIGZpZy5hZGRfdHJhY2UoZmlnc1trXSkKCiAgICBmaWcudXBkYXRlX3RyYWNlcyh2aXNpYmxlPUZhbHNlKQogICAgYWxsX2J1dHRvbnMgPSBbIiJdICsgbGlzdChmaWdzLmtleXMoKSkKICAgIGZpZy51cGRhdGVfbGF5b3V0KAogICAgICAgIHVwZGF0ZW1lbnVzPVsKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgImJ1dHRvbnMiOiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAibGFiZWwiOiBjb2x1bW5fbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgIm1ldGhvZCI6ICJ1cGRhdGUiLAogICAgICAgICAgICAgICAgICAgICAgICAiYXJncyI6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsidmlzaWJsZSI6IFtrZXkgPT0gY29sdW1uX25hbWUgZm9yIGtleSBpbiBmaWdzLmtleXMoKV19LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyJ0aXRsZSI6IGYiPGk+PGI+SGlzdG9ncmFtIG9mIHtjb2x1bW5fbmFtZX08L2I+PC9pPiJ9LAogICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBmb3IgY29sdW1uX25hbWUgaW4gYWxsX2J1dHRvbnMKICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfQogICAgICAgIF0sCiAgICApCgogICAgZmlnLnVwZGF0ZV9sYXlvdXQoCiAgICAgICAgd2lkdGg9ODAwLAogICAgICAgIGhlaWdodD02MDAsCiAgICAgICAgYXV0b3NpemU9RmFsc2UsCiAgICAgICAgbWFyZ2luPWRpY3QodD0xMDAsIGI9MCwgbD0wLCByPTApLAogICAgICAgIHRlbXBsYXRlPSJwbG90bHlfd2hpdGUiLAogICAgKQoKICAgIGZpZy51cGRhdGVfbGF5b3V0KHRpdGxlX3RleHQ9ZiI8aT48Yj5IaXN0b2dyYW1zPC9iPjwvaT4iKQogICAgZXh0cmFfZGF0YVtmImhpc3RvZ3JhbXMiXSA9IGNvbnRleHQubG9nX2FydGlmYWN0KAogICAgICAgIFBsb3RseUFydGlmYWN0KGtleT1mImhpc3RvZ3JhbXMiLCBmaWd1cmU9ZmlnKSwKICAgICAgICBsb2NhbF9wYXRoPWYie3Bsb3RzX2Rlc3R9L2hpc3RvZ3JhbXMuaHRtbCIsCiAgICApCgoKZGVmIF9jcmVhdGVfdmlvbGluX2FydGlmYWN0KAogICAgY29udGV4dDogTUxDbGllbnRDdHgsIGRmOiBwZC5EYXRhRnJhbWUsIGV4dHJhX2RhdGE6IGRpY3QsIHBsb3RzX2Rlc3Q6IHN0cgopOgogICAgIiIiCiAgICBDcmVhdGUgYW5kIGxvZyBhIHZpb2xpbiBhcnRpZmFjdAogICAgIiIiCiAgICBjb2xzID0gNAogICAgcm93cyA9IChkZi5zaGFwZVsxXSAvLyBjb2xzKSArIDEKICAgIGZpZyA9IG1ha2Vfc3VicGxvdHMocm93cz1yb3dzLCBjb2xzPWNvbHMpCgogICAgcGxvdF9udW0gPSAwCgogICAgZm9yIChjb2x1bW5OYW1lLCBjb2x1bW5EYXRhKSBpbiBkZi5pdGVyaXRlbXMoKToKICAgICAgICB2aW9saW4gPSBnby5WaW9saW4oCiAgICAgICAgICAgIHg9W2NvbHVtbk5hbWVdICogY29sdW1uRGF0YS5zaGFwZVswXSwKICAgICAgICAgICAgeT1jb2x1bW5EYXRhLAogICAgICAgICAgICBuYW1lPWNvbHVtbk5hbWUsCiAgICAgICAgKQoKICAgICAgICBmaWcuYWRkX3RyYWNlKAogICAgICAgICAgICB2aW9saW4sCiAgICAgICAgICAgIHJvdz0ocGxvdF9udW0gLy8gY29scykgKyAxLAogICAgICAgICAgICBjb2w9KHBsb3RfbnVtICUgY29scykgKyAxLAogICAgICAgICkKCiAgICAgICAgcGxvdF9udW0gKz0gMQoKICAgIGZpZ1sibGF5b3V0Il0udXBkYXRlKAogICAgICAgIGhlaWdodD0ocm93cyArIDEpICogMjAwLAogICAgICAgIHdpZHRoPShjb2xzICsgMSkgKiAyMDAsCiAgICAgICAgdGl0bGU9IjxpPjxiPlZpb2xpbiBQbG90czwvYj48L2k+IiwKICAgICkKICAgIGV4dHJhX2RhdGFbInZpb2xpbiJdID0gY29udGV4dC5sb2dfYXJ0aWZhY3QoCiAgICAgICAgUGxvdGx5QXJ0aWZhY3Qoa2V5PSJ2aW9saW4iLCBmaWd1cmU9ZmlnKSwKICAgICAgICBsb2NhbF9wYXRoPWYie3Bsb3RzX2Rlc3R9L3Zpb2xpbi5odG1sIiwKICAgICkKCgpkZWYgX2NyZWF0ZV9pbWJhbGFuY2VfYXJ0aWZhY3QoCiAgICBjb250ZXh0OiBNTENsaWVudEN0eCwKICAgIGRmOiBwZC5EYXRhRnJhbWUsCiAgICBleHRyYV9kYXRhOiBkaWN0LAogICAgbGFiZWxfY29sdW1uOiBzdHIsCiAgICBwbG90c19kZXN0OiBzdHIsCik6CiAgICAiIiIKICAgIENyZWF0ZSBhbmQgbG9nIGFuIGltYmFsYW5jZSBjbGFzcyBhcnRpZmFjdCAoY3N2ICsgcGxvdCkKICAgICIiIgogICAgaWYgbGFiZWxfY29sdW1uOgogICAgICAgIGxhYmVsc19jb3VudCA9IGRmW2xhYmVsX2NvbHVtbl0udmFsdWVfY291bnRzKCkuc29ydF9pbmRleCgpCiAgICAgICAgZGZfbGFiZWxzX2NvdW50ID0gcGQuRGF0YUZyYW1lKGxhYmVsc19jb3VudCkKICAgICAgICBkZl9sYWJlbHNfY291bnQucmVuYW1lKGNvbHVtbnM9e2xhYmVsX2NvbHVtbjogIlRvdGFsIn0sIGlucGxhY2U9VHJ1ZSkKICAgICAgICBkZl9sYWJlbHNfY291bnRbbGFiZWxfY29sdW1uXSA9IGxhYmVsc19jb3VudC5pbmRleAoKICAgICAgICBmaWcgPSBweC5waWUoZGZfbGFiZWxzX2NvdW50LCBuYW1lcz1sYWJlbF9jb2x1bW4sIHZhbHVlcz0iVG90YWwiKQogICAgICAgIGZpZy51cGRhdGVfbGF5b3V0KHRpdGxlX3RleHQ9IjxpPjxiPkxhYmVscyBiYWxhbmNlPC9iPjwvaT4iKQogICAgICAgIGV4dHJhX2RhdGFbImltYmFsYW5jZSJdID0gY29udGV4dC5sb2dfYXJ0aWZhY3QoCiAgICAgICAgICAgIFBsb3RseUFydGlmYWN0KGtleT0iaW1iYWxhbmNlIiwgZmlndXJlPWZpZyksCiAgICAgICAgICAgIGxvY2FsX3BhdGg9ZiJ7cGxvdHNfZGVzdH0vaW1iYWxhbmNlLmh0bWwiLAogICAgICAgICkKICAgICAgICBleHRyYV9kYXRhWyJpbWJhbGFuY2UgY3N2Il0gPSBjb250ZXh0LmxvZ19hcnRpZmFjdCgKICAgICAgICAgICAgVGFibGVBcnRpZmFjdCgKICAgICAgICAgICAgICAgICJpbWJhbGFuY2Utd2VpZ2h0cy12ZWMiLCBkZj1wZC5EYXRhRnJhbWUoeyJ3ZWlnaHRzIjogbGFiZWxzX2NvdW50fSkKICAgICAgICAgICAgKSwKICAgICAgICAgICAgbG9jYWxfcGF0aD1mIntwbG90c19kZXN0fS9pbWJhbGFuY2Utd2VpZ2h0cy12ZWMuY3N2IiwKICAgICAgICApCgoKZGVmIF9jcmVhdGVfY29ycl9hcnRpZmFjdCgKICAgIGNvbnRleHQ6IE1MQ2xpZW50Q3R4LAogICAgZGY6IHBkLkRhdGFGcmFtZSwKICAgIGV4dHJhX2RhdGE6IGRpY3QsCiAgICBsYWJlbF9jb2x1bW46IHN0ciwKICAgIHBsb3RzX2Rlc3Q6IHN0ciwKKToKICAgICIiIgogICAgQ3JlYXRlIGFuZCBsb2cgYW4gY29ycmVsYXRpb24tbWF0cml4IGFydGlmYWN0IChjc3YgKyBwbG90KQogICAgIiIiCiAgICBpZiBsYWJlbF9jb2x1bW4gaXMgbm90IE5vbmU6CiAgICAgICAgZGYgPSBkZi5kcm9wKFtsYWJlbF9jb2x1bW5dLCBheGlzPTEpCiAgICB0Ymxjb3JyID0gZGYuY29ycigpCiAgICBleHRyYV9kYXRhWyJjb3JyZWxhdGlvbi1tYXRyaXgtY3N2Il0gPSBjb250ZXh0LmxvZ19hcnRpZmFjdCgKICAgICAgICBUYWJsZUFydGlmYWN0KCJjb3JyZWxhdGlvbi1tYXRyaXggY3N2IiwgZGY9dGJsY29yciwgdmlzaWJsZT1UcnVlKSwKICAgICAgICBsb2NhbF9wYXRoPWYie3Bsb3RzX2Rlc3R9L2NvcnJlbGF0aW9uLW1hdHJpeC5jc3YiLAogICAgKQoKICAgIHogPSB0Ymxjb3JyLnZhbHVlcy50b2xpc3QoKQogICAgel90ZXh0ID0gW1siezouMmZ9Ii5mb3JtYXQoeSkgZm9yIHkgaW4geF0gZm9yIHggaW4gel0KICAgIGZpZyA9IGZmLmNyZWF0ZV9hbm5vdGF0ZWRfaGVhdG1hcCgKICAgICAgICB6LAogICAgICAgIHg9bGlzdCh0Ymxjb3JyLmNvbHVtbnMpLAogICAgICAgIHk9bGlzdCh0Ymxjb3JyLmNvbHVtbnMpLAogICAgICAgIGFubm90YXRpb25fdGV4dD16X3RleHQsCiAgICAgICAgY29sb3JzY2FsZT0iYWdzdW5zZXQiLAogICAgKQogICAgZmlnWyJsYXlvdXQiXVsieWF4aXMiXVsiYXV0b3JhbmdlIl0gPSAicmV2ZXJzZWQiICAjIGwgLT4gcgogICAgZmlnLnVwZGF0ZV9sYXlvdXQodGl0bGVfdGV4dD0iPGk+PGI+Q29ycmVsYXRpb24gbWF0cml4PC9iPjwvaT4iKQogICAgZmlnWyJkYXRhIl1bMF1bInNob3dzY2FsZSJdID0gVHJ1ZQoKICAgIGV4dHJhX2RhdGFbImNvcnJlbGF0aW9uLW1hdHJpeCJdID0gY29udGV4dC5sb2dfYXJ0aWZhY3QoCiAgICAgICAgUGxvdGx5QXJ0aWZhY3Qoa2V5PSJjb3JyZWxhdGlvbi1tYXRyaXgiLCBmaWd1cmU9ZmlnKSwKICAgICAgICBsb2NhbF9wYXRoPWYie3Bsb3RzX2Rlc3R9L2NvcnIuaHRtbCIsCiAgICApCg==
    commands: []
    code_origin: https://github.com/davesh0812/functions.git#43a25be9b30959a0caa08dc6e70c54c8ca55b4a0:/Users/davids/Projects/functions/describe/describe.py
    origin_filename: /Users/davids/Projects/functions/describe/describe.py
  entry_points:
    analyze:
      name: analyze
      doc: 'The function will output the following artifacts per

        column within the data frame (based on data types):


        histogram matrix chart

        histogram per feature chart

        violin chart

        correlation-matrix chart

        correlation-matrix csv

        imbalance pie chart

        imbalance-weights-vec csv'
      parameters:
      - name: context
        type: MLClientCtx
        doc: the function context
        default: ''
      - name: name
        type: str
        doc: key of dataset to database ("dataset" for default)
        default: dataset
      - name: table
        type: Union[FeatureSet, DataItem]
        doc: MLRun input pointing to pandas dataframe (csv/parquet file path) or FeatureSet
          as param
        default: null
      - name: label_column
        type: str
        doc: ground truth column label
        default: null
      - name: plots_dest
        type: str
        doc: destination folder of summary plots (relative to artifact_path) ("plots"
          for default)
        default: plots
      - name: frac
        type: float
        doc: when the table has more than 5000 samples, the function will execute
          on random frac from the data (0.1 default)
        default: 0.1
      outputs:
      - default: ''
      lineno: 28
  description: describe and visualizes dataset stats
  default_handler: analyze
  disable_auto_mount: false
  env: []
  priority_class_name: ''
  affinity: null
verbose: false
